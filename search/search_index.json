{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"SQLatte Documentation","text":"<p>Welcome to SQLatte - your friendly barista for data analytics! \u2615</p> <p>SQLatte transforms natural language questions into SQL queries, making database analytics accessible to everyone while maintaining enterprise-grade capabilities with its unique \"barista personality.\"</p>"},{"location":"#what-is-sqlatte","title":"What is SQLatte?","text":"<p>SQLatte is an AI-powered natural language to SQL analytics platform that combines the power of Large Language Models with your databases. Think of it as having a knowledgeable data analyst with a coffee shop personality who speaks your language and understands your data.</p> <p></p>"},{"location":"#getting-started","title":"Getting Started","text":"<ul> <li> <p> Quick Start</p> <p>Get SQLatte running in 5 minutes with Docker or Python</p> <p> Installation Guide</p> </li> <li> <p> Configuration</p> <p>Configure databases, LLMs, and optional features via single YAML file</p> <p> Configuration Guide</p> </li> <li> <p> Features</p> <p>Explore scheduling, analytics, insights, and runtime prompts</p> <p> Features Overview</p> </li> <li> <p> API Reference</p> <p>REST endpoints, WebSocket API, and widget JavaScript API</p> <p> API Docs</p> </li> <li> <p> Plugin System</p> <p>Extend SQLatte with custom plugins (auth, integrations)</p> <p> Plugin Guide</p> </li> </ul>"},{"location":"#core-philosophy","title":"Core Philosophy","text":"<p>SQLatte is designed around conversational data analytics - making data accessible through natural dialogue while preserving the power of SQL underneath. The platform emphasizes:</p> <ul> <li>Widget-First Architecture: Embeddable anywhere, from simple websites to complex enterprise dashboards</li> <li>Optional Complexity: Start with basic NL-to-SQL, add enterprise features (auth, scheduling, analytics) only when needed</li> <li>Barista Personality: Friendly, approachable AI that makes data exploration feel natural</li> </ul>"},{"location":"#key-features","title":"Key Features","text":""},{"location":"#ai-powered-query-generation","title":"AI-Powered Query Generation","text":"<ul> <li>Natural Language to SQL: Ask questions in plain English, get optimized SQL queries</li> <li>Context-Aware Conversations: Remembers chat history and understands follow-up questions</li> <li>Multi-Table JOINs: Automatically detects relationships and creates complex joins</li> <li>Smart Schema Understanding: AI learns your database structure for better query generation</li> </ul>"},{"location":"#multi-database-multi-llm-support","title":"Multi-Database &amp; Multi-LLM Support","text":"<ul> <li>Database Providers: Trino, PostgreSQL, MySQL, Google BigQuery</li> <li>LLM Providers: Anthropic Claude (recommended), Google Gemini, Vertex AI</li> <li>Flexible Configuration: Switch providers without code changes via runtime config</li> </ul>"},{"location":"#embeddable-widgets","title":"Embeddable Widgets","text":"<ul> <li>Standard Widget: Config-based authentication, shared database connection</li> <li>Auth Widget: Multi-tenant with per-user database credentials and session isolation</li> <li>Fully Customizable: Position, styling, fullscreen mode, and programmatic control</li> <li>CORS-Ready: Embed in any website across domains</li> </ul>"},{"location":"#enterprise-features","title":"Enterprise Features","text":"<ul> <li>Scheduled Queries: Automate reports with flexible cron schedules (daily, weekly, monthly)</li> <li>Email Reports: CSV, Excel, HTML format delivery with customizable templates</li> <li>Query History &amp; Favorites: Save, replay, and organize frequently-used queries</li> <li>Analytics Dashboard: Query performance metrics, usage statistics, and insights</li> <li>Admin Panel: Runtime configuration, prompt editing, connection testing</li> </ul>"},{"location":"#ai-insights-engine","title":"AI Insights Engine","text":"<ul> <li>Automatic Analysis: AI-powered data pattern detection and trend analysis</li> <li>Context-Aware Insights: Considers temporal patterns and incomplete real-time data</li> <li>Hybrid Mode: Combines LLM reasoning with statistical analysis</li> <li>Smart Summaries: Identifies trends, anomalies, and actionable recommendations</li> </ul>"},{"location":"#runtime-prompt-management","title":"Runtime Prompt Management","text":"<ul> <li>Live Prompt Editing: Modify AI behavior through admin panel without code changes</li> <li>Four Customizable Prompts:<ul> <li>Intent Detection (SQL vs chat determination)</li> <li>Barista Personality (conversational tone)</li> <li>SQL Generation (query construction rules)</li> <li>Insights Generation (data analysis patterns)</li> </ul> </li> <li>Hot Reload: Changes apply immediately across all sessions</li> <li>Database Persistence: Save custom prompts for consistency</li> </ul>"},{"location":"#data-visualization","title":"Data Visualization","text":"<ul> <li>Auto-Generated Charts: Bar, line, pie charts from query results</li> <li>Interactive Charting: Click-to-chart from result tables</li> <li>Multiple Chart Types: Support for various visualization formats</li> <li>Chart.js Integration: Professional-quality visualizations</li> </ul>"},{"location":"#deployment-options","title":"Deployment Options","text":""},{"location":"#use-cases-by-deployment-type","title":"Use Cases by Deployment Type","text":"Embedded Widget (Standard)Embedded Widget (Auth)Standalone Dashboard <p>Best For: Internal tools, single-tenant apps, dashboards</p> <ul> <li>Uses backend config.yaml credentials</li> <li>No user authentication required</li> <li>Shared database connection</li> <li>Embed anywhere with <code>&lt;script&gt;</code> tag</li> <li>Perfect for company intranets</li> </ul> <p>Best For: Multi-tenant SaaS, customer-facing analytics</p> <ul> <li>Per-user database credentials</li> <li>Session-based authentication</li> <li>Isolated connections per user</li> <li>Supports catalog/schema restrictions</li> <li>Ideal for SaaS products</li> </ul> <p>Best For: Dedicated analytics portal, admin interface</p> <ul> <li>Full-featured unified interface</li> <li>Admin panel for configuration</li> <li>Schedule management across all users</li> <li>Analytics dashboard with metrics</li> <li>Home, Assistant, Demo, Analytics, Schedules tabs</li> </ul>"},{"location":"#supported-technologies","title":"Supported Technologies","text":""},{"location":"#database-providers","title":"Database Providers","text":"<ul> <li>Trino - Distributed SQL query engine (Hive, Iceberg, Delta Lake catalogs)</li> <li>PostgreSQL - Advanced open-source relational database  </li> <li>MySQL - Popular relational database</li> <li>Google BigQuery - Serverless cloud data warehouse with service account auth</li> </ul>"},{"location":"#llm-providers","title":"LLM Providers","text":"<ul> <li>Anthropic Claude - Most advanced reasoning (Claude Sonnet 3.5/4 recommended)</li> <li>Google Gemini - Fast and efficient with free tier</li> <li>Vertex AI - Enterprise Google Cloud AI with advanced features</li> </ul>"},{"location":"#storage-options","title":"Storage Options","text":"<ul> <li>In-Memory: Default, zero-config analytics and scheduling</li> <li>PostgreSQL: Persistent storage for enterprise deployments</li> <li>Runtime Switchable: Choose storage backend via config.yaml</li> </ul>"},{"location":"#architecture-highlights","title":"Architecture Highlights","text":""},{"location":"#conversation-memory","title":"Conversation Memory","text":"<p>SQLatte maintains session-based conversation history, allowing context-aware queries: <pre><code>\"Show me top customers\" \u2192 generates SQL\n\"What about last month?\" \u2192 understands context, modifies previous query\n\"Export to CSV\" \u2192 applies to current result set\n</code></pre></p>"},{"location":"#plugin-architecture","title":"Plugin Architecture","text":"<p>Extend functionality without modifying core code: - Authentication Plugin: Multi-tenant user isolation - Base Plugin Class: Hooks for routes, middleware, startup/shutdown - Custom Plugins: Add your own integrations (Slack, webhooks, custom auth)</p>"},{"location":"#configuration-management","title":"Configuration Management","text":"<ul> <li>Single config.yaml: All settings in one place</li> <li>Runtime Overrides: Change config via API without restart</li> <li>Hot Reload: Apply configuration changes immediately</li> <li>Database Persistence: Optional ConfigDB for distributed deployments</li> <li>Change History: Audit trail of all configuration modifications</li> </ul>"},{"location":"#use-cases","title":"Use Cases","text":""},{"location":"#business-analytics","title":"Business Analytics","text":"<p>Enable non-technical teams to query data using natural language without learning SQL. Sales teams can ask \"show me Q4 revenue by region\" and get instant results with visualizations.</p>"},{"location":"#data-exploration","title":"Data Exploration","text":"<p>Quickly explore datasets interactively with conversational follow-ups. Analysts can drill down with \"what about Europe?\" or \"compare to last year\" without writing new queries.</p>"},{"location":"#automated-reporting","title":"Automated Reporting","text":"<p>Schedule queries to run daily/weekly/monthly with automatic email delivery in CSV, Excel, or HTML formats. Perfect for stakeholder reports and KPI tracking.</p>"},{"location":"#embedded-analytics","title":"Embedded Analytics","text":"<p>Add natural language querying to SaaS applications with either standard (shared DB) or auth (multi-tenant) widgets. Give your customers powerful analytics without building custom BI.</p>"},{"location":"#enterprise-bi","title":"Enterprise BI","text":"<p>Complement existing BI tools with conversational interface. SQLatte works alongside Tableau, Looker, or PowerBI to provide ad-hoc query capabilities.</p>"},{"location":"#multi-tenant-saas","title":"Multi-Tenant SaaS","text":"<p>Deploy Auth Widget for customer-facing analytics where each user connects to their own database with isolated sessions and credential management.</p>"},{"location":"#real-world-example-workflows","title":"Real-World Example Workflows","text":""},{"location":"#marketing-analytics","title":"Marketing Analytics","text":"<pre><code>User: \"Show me top 10 campaigns by ROI last quarter\"\nSQLatte: Generates SQL with JOINs across campaigns and metrics tables\n\nUser: \"What about just email campaigns?\"  \nSQLatte: Adds WHERE filter to previous query\n\nUser: \"Chart it by month\"\nSQLatte: Displays interactive bar chart with monthly breakdown\n</code></pre>"},{"location":"#security-analysis","title":"Security Analysis","text":"<pre><code>User: \"Show attack attempts by IP address today\"\nSQLatte: Queries security logs with date filter\n\nUser: \"Schedule this to run daily at 8am and email security team\"\nSQLatte: Creates schedule with email recipients\n\nResult: Daily automated security reports delivered as Excel attachment\n</code></pre>"},{"location":"#getting-help","title":"Getting Help","text":""},{"location":"#community-support","title":"Community &amp; Support","text":"<ul> <li>GitHub Repository: github.com/osmanuygar/sqlatte</li> <li>Issues &amp; Bugs: Report problems or request features via GitHub Issues</li> <li>Discussions: Ask questions, share use cases, and get help from the community</li> <li>Documentation: This comprehensive guide covers all features and configurations</li> </ul>"},{"location":"#contributing","title":"Contributing","text":"<p>SQLatte is open source and welcomes contributions! Check the repository for: - Contributing guidelines - Development setup - Code style and standards - Feature roadmap</p>"},{"location":"#enterprise-support","title":"Enterprise Support","text":"<p>For enterprise deployments, custom features, or dedicated support: - Review the Architecture documentation - Contact via GitHub for partnership opportunities - Consider custom plugin development for specific integrations</p>"},{"location":"#whats-new-in-sqlatte","title":"What's New in SQLatte","text":""},{"location":"#latest-updates-2026","title":"Latest Updates (2026)","text":""},{"location":"#ai-insights-engine_1","title":"AI Insights Engine","text":"<p>Automatic data analysis with context-aware insights, hybrid LLM + statistical mode, and smart handling of incomplete real-time data.</p>"},{"location":"#runtime-prompt-management_1","title":"Runtime Prompt Management","text":"<p>Edit all AI prompts through admin panel - intent detection, personality, SQL generation, and insights prompts - with database persistence and hot reload.</p>"},{"location":"#google-bigquery-support","title":"Google BigQuery Support","text":"<p>Native integration with service account authentication, project/dataset configuration, and optimized query execution.</p>"},{"location":"#unified-dashboard","title":"Unified Dashboard","text":"<p>Tabbed interface with Home, Assistant, Demo, Analytics, Schedules, and Configuration sections for comprehensive platform management.</p>"},{"location":"#enhanced-email-system","title":"Enhanced Email System","text":"<p>Graceful degradation with mock mode when SMTP unavailable, HTML templates, rate limiting, and delivery tracking.</p>"},{"location":"#admin-schedule-manager","title":"Admin Schedule Manager","text":"<p>Cross-user schedule management, execution history, email delivery logs, and bulk operations for enterprise deployments.</p>"},{"location":"#license-attribution","title":"License &amp; Attribution","text":"<p>SQLatte is released as open source software. Check the main repository for license details and attribution requirements.</p> <p>When using SQLatte in production: - Maintain attribution in UI (already included in widgets) - Review license terms for commercial use - Consider contributing improvements back to the project</p> <p>Ready to brew some queries? Start with the Installation Guide and have SQLatte running in 5 minutes! \u2615</p> <p>For a quick overview of all features, see the Configuration Overview.</p>"},{"location":"ui-guide/","title":"User Interface Guide","text":"<p>This visual guide provides a comprehensive overview of SQLatte's user interface across all deployment modes.</p> <p>Screenshots Needed</p> <p>This page includes placeholder sections for screenshots. Add images to <code>/docs/assets/images/ui/</code> directory and reference them below.</p>"},{"location":"ui-guide/#overview","title":"Overview","text":"<p>SQLatte offers three main interface modes:</p> <ol> <li>Widget Mode - Embeddable chat interface</li> <li>Unified Dashboard - Full-featured web application  </li> <li>Admin Panel - Configuration and management</li> </ol>"},{"location":"ui-guide/#widget-interfaces","title":"Widget Interfaces","text":""},{"location":"ui-guide/#standard-widget","title":"Standard Widget","text":"<p>The standard widget provides a simple chat interface with backend-configured database access.</p>"},{"location":"ui-guide/#badge-button","title":"Badge Button","text":"<p>The coffee cup badge that opens the SQLatte widget (bottom-right by default)</p> <p>Features:</p> <ul> <li>Customizable position (bottom-left, bottom-right, top-left, top-right)</li> <li>Responsive design</li> <li>Hover state with tooltip</li> <li>Matches your site's aesthetic</li> </ul>"},{"location":"ui-guide/#chat-modal","title":"Chat Modal","text":"<p>Main chat interface showing conversation with SQLatte</p> <p>Key Components:</p> <ol> <li> <p>Header Bar</p> </li> <li> <p>SQLatte logo and title</p> </li> <li>Minimize/maximize controls</li> <li>Close button</li> <li> <p>Table selector dropdown</p> </li> <li> <p>Chat Area</p> </li> <li> <p>Message history with conversation context</p> </li> <li>User questions in blue bubbles</li> <li>SQLatte responses with SQL code blocks</li> <li>Syntax-highlighted SQL</li> <li> <p>Copy SQL button</p> </li> <li> <p>Input Section</p> </li> <li> <p>Multi-line textarea</p> </li> <li>Send button</li> <li>Placeholder text with examples</li> <li> <p>Enter to send (Shift+Enter for new line)</p> </li> <li> <p>Toolbar</p> </li> <li> <p>History icon (view past queries)</p> </li> <li>Favorites icon (saved queries)</li> <li>Chart icon (visualize results)</li> <li>Export CSV button</li> <li>Clear conversation</li> </ol>"},{"location":"ui-guide/#query-results","title":"Query Results","text":"<p>SQL results displayed in a formatted table</p> <p>Result Table Features:</p> <ul> <li>Column headers with sorting</li> <li>Responsive scrolling for large datasets</li> <li>Row highlighting on hover</li> <li>Copy individual cells</li> <li>Click to chart icon</li> </ul>"},{"location":"ui-guide/#sql-code-display","title":"SQL Code Display","text":"<p>![SQL Code Block] Syntax-highlighted SQL with copy button</p> <p>Code Block Features:</p> <ul> <li>Syntax highlighting (keywords, strings, numbers)</li> <li>Line numbers</li> <li>Copy to clipboard button</li> <li>Execute again button</li> <li>Dark theme for readability</li> </ul>"},{"location":"ui-guide/#chart-visualization","title":"Chart Visualization","text":"<p>Interactive chart generated from query results</p> <p>Chart Features:</p> <ul> <li>Chart type selector (bar, line, pie, doughnut)</li> <li>Metric selector for multi-column data</li> <li>Responsive canvas</li> <li>Chart.js powered visualizations</li> <li>Download chart as image</li> </ul>"},{"location":"ui-guide/#history-panel","title":"History Panel","text":"<p>Slide-out panel showing query history</p> <p>History Panel Features:</p> <ul> <li>Chronological list of queries</li> <li>Question text preview</li> <li>Timestamp</li> <li>Re-run question button</li> <li>Re-run SQL button</li> <li>Add to favorites star icon</li> <li>Clear all history button</li> </ul>"},{"location":"ui-guide/#favorites-panel","title":"Favorites Panel","text":"<p>Saved queries for quick access</p> <p>Favorites Features:</p> <ul> <li>Saved query list</li> <li>Custom labels/names</li> <li>Quick re-run</li> <li>Remove from favorites</li> <li>Persist across sessions (localStorage)</li> </ul>"},{"location":"ui-guide/#auth-widget","title":"Auth Widget","text":"<p>Multi-tenant widget with user authentication and per-user database connections.</p>"},{"location":"ui-guide/#login-modal","title":"Login Modal","text":"<p>Login form for authenticated access</p> <p>Login Form Fields:</p> <ul> <li>Username</li> <li>Password</li> <li>Database Type (if multiple allowed)</li> <li>Catalog (Trino-specific, if restricted)</li> <li>Schema (if restricted)</li> <li>Database info footer</li> </ul> <p>Security Features:</p> <ul> <li>Session-based authentication</li> <li>Credential isolation per user</li> <li>Configurable session TTL</li> <li>Automatic logout on timeout</li> </ul>"},{"location":"ui-guide/#authenticated-chat","title":"Authenticated Chat","text":"<p>Chat interface after successful login</p> <p>Differences from Standard Widget:</p> <ul> <li>User indicator in header</li> <li>Logout button</li> <li>Session status indicator</li> <li>User-specific history/favorites</li> <li>Per-user table access</li> </ul>"},{"location":"ui-guide/#session-management","title":"Session Management","text":"<p>Session Features:</p> <ul> <li>Active session indicator</li> <li>Time remaining display</li> <li>Logout button</li> <li>Session refresh on activity</li> </ul>"},{"location":"ui-guide/#unified-dashboard","title":"Unified Dashboard","text":"<p>The full-featured web application for comprehensive SQLatte access.</p>"},{"location":"ui-guide/#home-tab","title":"Home Tab","text":"<p> Landing page with quick links and overview</p> <p>Home Page Components:</p> <ul> <li>Welcome message</li> <li>Recent activity summary</li> <li>Quick action buttons</li> <li>Feature highlights</li> <li>Status indicators (DB, LLM, services)</li> </ul>"},{"location":"ui-guide/#assistant-tab","title":"Assistant Tab","text":"<p>Features:</p> <ul> <li>Full standard widget functionality</li> <li>Integrated within dashboard layout</li> <li>Sidebar navigation visible</li> <li>Same features as standalone widget</li> </ul>"},{"location":"ui-guide/#demo-tab","title":"Demo Tab","text":"<p>Interactive demo and examples</p> <p>Demo Page Elements:</p> <ul> <li>Sample queries you can try</li> <li>Pre-configured example database</li> <li>Tutorial walkthrough</li> <li>Feature showcase</li> <li>Video tutorials (if available)</li> </ul>"},{"location":"ui-guide/#analytics-tab","title":"Analytics Tab","text":"<p> Query performance and usage metrics</p> <p>Analytics Dashboard Sections:</p> <p>Overview Cards</p> <ul> <li>Total queries executed</li> <li>Average execution time</li> <li>Success rate percentage</li> <li>Active users count</li> </ul> <p>Query Performance Chart</p> <ul> <li>Execution time trends</li> <li>Query volume over time</li> <li>Success/failure ratio</li> <li>Filtering by time range</li> </ul> <p>Top Queries Table</p> <ul> <li>Most frequently run queries</li> <li>Average execution time</li> <li>Success rate</li> <li>Last execution timestamp</li> </ul> <p>Insights Summary    - AI-generated insights count    - Most common insight types    - Insights by category</p> <p>Database Usage    - Tables most queried    - Schema access patterns    - Query complexity distribution</p>"},{"location":"ui-guide/#schedules-tab","title":"Schedules Tab","text":"<p> Scheduled query management interface</p> <p>Schedule Management Features:</p> <p>Schedule List</p> <ul> <li>All active and inactive schedules</li> <li>Frequency (daily, weekly, monthly)</li> <li>Next run time</li> <li>Status indicator</li> <li>Edit/Delete buttons</li> </ul> <p>Create Schedule Modal</p> <ul> <li>Schedule name</li> <li>Query/question selector</li> <li>Frequency picker (cron editor)</li> <li>Time selector</li> <li>Email recipients (multi-input)</li> <li>Format selector (CSV, Excel, HTML)</li> <li>Custom email subject/body</li> </ul> <p>Execution History</p> <ul> <li>Past execution logs</li> <li>Success/failure status</li> <li>Rows returned</li> <li>Execution duration</li> <li>Error messages (if failed)</li> <li>Email delivery status</li> </ul> <p>Email Preview</p> <ul> <li>Preview email template</li> <li>Test send to your email</li> <li>Attachment format preview</li> </ul>"},{"location":"ui-guide/#configuration-tab","title":"Configuration Tab","text":"<p>Admin panel embedded in dashboard</p> <p>Configuration Sections:</p> <ul> <li>Full admin panel functionality</li> <li>Provider settings</li> <li>Prompts editor</li> <li>Email/SMTP config</li> <li>System info</li> <li>All admin features accessible</li> </ul>"},{"location":"ui-guide/#admin-panel","title":"Admin Panel","text":"<p>Dedicated administration interface for configuration and management.</p>"},{"location":"ui-guide/#main-admin-interface","title":"Main Admin Interface","text":"<p> Admin panel landing page</p> <p>Navigation Tabs:</p> <ul> <li>Providers</li> <li>Prompts</li> <li>Email &amp; SMTP</li> <li>Scheduler</li> <li>Insights</li> <li>Export</li> <li>History</li> <li>Snapshots</li> </ul>"},{"location":"ui-guide/#providers-tab","title":"Providers Tab","text":"<p> LLM and database provider configuration</p> <p>LLM Provider Section:</p> <ul> <li>Provider selector dropdown (Anthropic, Gemini, Vertex AI)</li> <li>Model selector</li> <li>API key input (masked)</li> <li>Temperature slider</li> <li>Max tokens input</li> <li>Test connection button</li> <li>Save button</li> </ul> <p>Database Provider Section:</p> <ul> <li>Provider selector (Trino, PostgreSQL, MySQL, BigQuery)</li> <li>Host, port, database inputs</li> <li>Username, password fields</li> <li>Schema/catalog (provider-specific)</li> <li>Test connection button</li> <li>Connection status indicator</li> </ul> <p>System Info Box:</p> <ul> <li>Current LLM provider and model</li> <li>Current database provider</li> <li>Runtime overrides status</li> <li>Hot reload capability status</li> </ul>"},{"location":"ui-guide/#prompts-tab","title":"Prompts Tab","text":"<p> Runtime prompt editing interface</p> <p>Prompt Editor Features:</p> <p>Prompt Selector</p> <ul> <li>Intent Detection</li> <li>Barista Personality</li> <li>SQL Generation</li> <li>Insights Generation</li> </ul> <p>Editor Area</p> <ul> <li>Multi-line textarea</li> <li>Syntax highlighting</li> <li>Template variable hints</li> <li>Character count</li> <li>Line numbers</li> </ul> <p>Action Buttons</p> <ul> <li>Save prompt (to database)</li> <li>Reset to default</li> <li>Preview with sample</li> <li>Copy to clipboard</li> </ul> <p>Template Variables Helper</p> <ul> <li>Available variables list</li> <li>Click to insert</li> <li>Usage examples</li> </ul>"},{"location":"ui-guide/#email-smtp-tab","title":"Email &amp; SMTP Tab","text":"<p> Email service configuration</p> <p>Email Configuration:</p> <ul> <li>Enable/disable toggle</li> <li>SMTP provider dropdown</li> <li>SMTP host</li> <li>SMTP port</li> <li>Username</li> <li>Password (masked)</li> <li>From email address</li> <li>From name</li> <li>Use TLS toggle</li> <li>Test email button (sends test)</li> <li>Save configuration</li> </ul> <p>Email Test Result:</p> <ul> <li>Success/failure message</li> <li>SMTP connection log</li> <li>Delivery confirmation</li> </ul>"},{"location":"ui-guide/#scheduler-tab","title":"Scheduler Tab","text":"<p> Scheduler service configuration</p> <p>Scheduler Settings:</p> <ul> <li>Enable/disable toggle</li> <li>Timezone selector</li> <li>Max concurrent jobs</li> <li>Job timeout (seconds)</li> <li>Keep history days</li> <li>Max executions per schedule</li> </ul> <p>Global Schedule Management:</p> <ul> <li>View all users' schedules (admin view)</li> <li>Bulk enable/disable</li> <li>Delete schedules</li> <li>Execution logs across all users</li> </ul>"},{"location":"ui-guide/#insights-tab","title":"Insights Tab","text":"<p> Insights engine configuration</p> <p>Insights Settings:</p> <ul> <li>Enable/disable toggle</li> <li>Mode selector (LLM only, Statistical only, Hybrid)</li> <li>Max insights per query</li> <li>Include statistical insights toggle</li> <li>Insight categories selector</li> </ul>"},{"location":"ui-guide/#export-tab","title":"Export Tab","text":"<p>Export format configuration</p> <p>Export Settings:</p> <ul> <li>Enabled formats (CSV, Excel, HTML)</li> <li>Max rows limit</li> <li>Max file size (MB)</li> <li>Filename template</li> <li>Add/remove formats</li> </ul>"},{"location":"ui-guide/#history-tab","title":"History Tab","text":"<p>Configuration change history</p> <p>Change Log:</p> <ul> <li>Timestamp</li> <li>Configuration key changed</li> <li>Old value \u2192 New value</li> <li>Changed by (user/admin)</li> <li>Revert button (if supported)</li> </ul> <p>Filtering:</p> <ul> <li>Date range picker</li> <li>Configuration section filter</li> <li>Search by key name</li> </ul>"},{"location":"ui-guide/#snapshots-tab","title":"Snapshots Tab","text":"<p>Configuration backup and restore</p> <p>Snapshot Management:</p> <ul> <li>Create snapshot button</li> <li>Snapshot list with timestamps</li> <li>Snapshot name/description</li> <li>Restore snapshot button</li> <li>Download snapshot (JSON/YAML)</li> <li>Delete snapshot</li> </ul>"},{"location":"ui-guide/#accessibility-features","title":"Accessibility Features","text":"<p>SQLatte is designed with accessibility in mind.</p>"},{"location":"ui-guide/#keyboard-navigation","title":"Keyboard Navigation","text":"<ul> <li>Tab navigation through all interactive elements</li> <li>Enter to submit forms</li> <li>Escape to close modals</li> <li>Arrow keys for dropdown navigation</li> <li>Shortcuts for common actions</li> </ul>"},{"location":"ui-guide/#screen-reader-support","title":"Screen Reader Support","text":"<ul> <li>ARIA labels on all controls</li> <li>Semantic HTML structure</li> <li>Alt text for images</li> <li>Descriptive link text</li> </ul>"},{"location":"ui-guide/#visual-accessibility","title":"Visual Accessibility","text":"<ul> <li>High contrast ratios (WCAG AA compliant)</li> <li>Resizable text</li> <li>Focus indicators</li> <li>Color-blind friendly palette</li> </ul>"},{"location":"ui-guide/#customization","title":"Customization","text":""},{"location":"ui-guide/#widget-styling","title":"Widget Styling","text":"<p>Customize widget appearance via configuration:</p> <pre><code>window.SQLatteWidget.configure({\n    position: 'bottom-right',  // bottom-left, top-right, top-left\n    fullscreen: false,\n    title: 'Custom Title \u2615',\n    placeholder: 'Ask your data...',\n    primaryColor: '#D4A574',   // Custom accent color\n    darkMode: true\n});\n</code></pre>"},{"location":"ui-guide/#dashboard-theming","title":"Dashboard Theming","text":"<p>Modify dashboard colors via CSS variables:</p> <pre><code>:root {\n    --sqlatte-primary: #D4A574;\n    --sqlatte-secondary: #6B4423;\n    --sqlatte-background: #1a1a1a;\n    --sqlatte-text: #e0e0e0;\n}\n</code></pre>"},{"location":"ui-guide/#ui-best-practices","title":"UI Best Practices","text":""},{"location":"ui-guide/#query-input","title":"Query Input","text":"<p>Good Examples:</p> <ul> <li>\"Show me top 10 customers by revenue\"</li> <li>\"What's the average order value last month?\"</li> <li>\"List products with low stock\"</li> </ul> <p>Tips:</p> <ul> <li>Be specific about time ranges</li> <li>Mention table names if known</li> <li>Use natural language</li> <li>Ask follow-up questions</li> </ul>"},{"location":"ui-guide/#interpreting-results","title":"Interpreting Results","text":"<p>Understanding SQL Output:</p> <ul> <li>Column headers match your question</li> <li>Row count indicates data volume</li> <li>Scroll for more results</li> <li>Export for external analysis</li> </ul> <p>Using Charts:</p> <ul> <li>Click chart icon on numeric results</li> <li>Select appropriate chart type</li> <li>Choose metric for multi-column data</li> <li>Download for presentations</li> </ul>"},{"location":"ui-guide/#managing-history","title":"Managing History","text":"<p>Organization:</p> <ul> <li>Star frequently-used queries</li> <li>Clear old history periodically</li> <li>Use descriptive names for schedules</li> </ul>"},{"location":"ui-guide/#troubleshooting-ui-issues","title":"Troubleshooting UI Issues","text":""},{"location":"ui-guide/#widget-not-loading","title":"Widget Not Loading","text":"<p>Check:</p> <ul> <li>JavaScript console for errors</li> <li>Network tab for failed requests</li> <li>CORS configuration</li> <li>API endpoint accessibility</li> </ul>"},{"location":"ui-guide/#slow-performance","title":"Slow Performance","text":"<p>Optimize:</p> <ul> <li>Limit result rows</li> <li>Use specific queries</li> <li>Enable query caching</li> <li>Check database performance</li> </ul>"},{"location":"ui-guide/#display-issues","title":"Display Issues","text":"<p>Fix:</p> <ul> <li>Clear browser cache</li> <li>Try different browser</li> <li>Disable browser extensions</li> <li>Check CSS conflicts</li> </ul>"},{"location":"ui-guide/#video-tutorials","title":"Video Tutorials","text":"<p>Video Coming Soon</p> <p>Video walkthroughs will be added to demonstrate: - First-time setup - Creating schedules - Using the admin panel - Embedding widgets</p>"},{"location":"ui-guide/#next-steps","title":"Next Steps","text":"<p>Now that you understand the UI:</p> <ul> <li>Explore features: Scheduled Queries</li> <li>Customize prompts: Runtime Prompts</li> <li>Configure settings: Configuration Overview</li> </ul> <p>Need help? Check the GitHub Issues or create a new issue with screenshots of your problem.</p>"},{"location":"api/endpoints/","title":"REST API Endpoints","text":"<p>Complete reference for SQLatte's REST API.</p>"},{"location":"api/endpoints/#base-url","title":"Base URL","text":"<pre><code>http://localhost:8000\n</code></pre>"},{"location":"api/endpoints/#authentication","title":"Authentication","text":""},{"location":"api/endpoints/#standard-widget-no-auth","title":"Standard Widget (No Auth)","text":"<p>No authentication required - uses backend config credentials.</p> <pre><code>curl http://localhost:8000/api/query\n</code></pre>"},{"location":"api/endpoints/#auth-widget-session-based","title":"Auth Widget (Session-Based)","text":"<p>Requires login and session ID in headers.</p> <p>1. Login: <pre><code>curl -X POST http://localhost:8000/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"username\": \"user@company.com\",\n    \"password\": \"password\",\n    \"database_type\": \"trino\",\n    \"host\": \"trino.company.com\",\n    \"catalog\": \"hive\"\n  }'\n\n# Response:\n{\n  \"session_id\": \"abc123...\",\n  \"username\": \"user@company.com\"\n}\n</code></pre></p> <p>2. Use session ID: <pre><code>curl http://localhost:8000/auth/query \\\n  -H \"X-Session-ID: abc123...\"\n</code></pre></p>"},{"location":"api/endpoints/#core-endpoints","title":"Core Endpoints","text":""},{"location":"api/endpoints/#query-execution","title":"Query Execution","text":""},{"location":"api/endpoints/#post-apiquery","title":"POST /api/query","text":"<p>Execute natural language query (standard widget).</p> <p>Request: <pre><code>curl -X POST http://localhost:8000/api/query \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"question\": \"Show me top 10 customers by revenue\",\n    \"schema\": \"Table: customers\\nColumns: id, name, revenue\",\n    \"session_id\": \"optional-session-id\"\n  }'\n</code></pre></p> <p>Response: <pre><code>{\n  \"sql\": \"SELECT * FROM customers ORDER BY revenue DESC LIMIT 10\",\n  \"columns\": [\"id\", \"name\", \"revenue\"],\n  \"data\": [\n    [1, \"Acme Corp\", 50000],\n    [2, \"TechCo\", 45000]\n  ],\n  \"insights\": [\n    {\n      \"type\": \"trend\",\n      \"severity\": \"medium\",\n      \"message\": \"Top customer revenue increased 15% from last month\"\n    }\n  ],\n  \"session_id\": \"abc123...\"\n}\n</code></pre></p>"},{"location":"api/endpoints/#post-authquery","title":"POST /auth/query","text":"<p>Execute query with user credentials (auth widget).</p> <p>Request: <pre><code>curl -X POST http://localhost:8000/auth/query \\\n  -H \"Content-Type: application/json\" \\\n  -H \"X-Session-ID: abc123...\" \\\n  -d '{\n    \"question\": \"Show total sales today\",\n    \"schema\": \"Table: orders...\"\n  }'\n</code></pre></p> <p>Response: Same as <code>/api/query</code></p>"},{"location":"api/endpoints/#table-management","title":"Table Management","text":""},{"location":"api/endpoints/#get-apitables","title":"GET /api/tables","text":"<p>List available tables.</p> <p>Request: <pre><code>curl http://localhost:8000/api/tables\n</code></pre></p> <p>Response: <pre><code>{\n  \"tables\": [\"customers\", \"orders\", \"products\", \"sessions\"]\n}\n</code></pre></p>"},{"location":"api/endpoints/#post-apischema","title":"POST /api/schema","text":"<p>Get schema for specific tables.</p> <p>Request: <pre><code>curl -X POST http://localhost:8000/api/schema \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"tables\": [\"customers\", \"orders\"]\n  }'\n</code></pre></p> <p>Response: <pre><code>{\n  \"combined_schema\": \"Table: customers\\nColumns: id (INT), name (VARCHAR), revenue (DECIMAL)\\n\\nTable: orders\\nColumns: order_id (INT), customer_id (INT), amount (DECIMAL), order_date (DATE)\"\n}\n</code></pre></p>"},{"location":"api/endpoints/#health-check","title":"Health Check","text":""},{"location":"api/endpoints/#get-health","title":"GET /health","text":"<p>System health status.</p> <p>Request: <pre><code>curl http://localhost:8000/health\n</code></pre></p> <p>Response: <pre><code>{\n  \"status\": \"healthy\",\n  \"version\": \"1.0.0\",\n  \"database\": \"connected\",\n  \"llm\": \"available\",\n  \"analytics\": \"enabled\",\n  \"scheduler\": \"running\"\n}\n</code></pre></p>"},{"location":"api/endpoints/#auth-widget-endpoints","title":"Auth Widget Endpoints","text":""},{"location":"api/endpoints/#post-authlogin","title":"POST /auth/login","text":"<p>Authenticate user and create session.</p> <p>Request: <pre><code>{\n  \"username\": \"user@company.com\",\n  \"password\": \"password\",\n  \"database_type\": \"trino\",\n  \"host\": \"trino.company.com\",\n  \"port\": 443,\n  \"catalog\": \"hive\",\n  \"schema\": \"default\"\n}\n</code></pre></p> <p>Response: <pre><code>{\n  \"session_id\": \"abc123...\",\n  \"username\": \"user@company.com\",\n  \"expires_in\": 28800\n}\n</code></pre></p>"},{"location":"api/endpoints/#post-authlogout","title":"POST /auth/logout","text":"<p>End user session.</p> <p>Request: <pre><code>curl -X POST http://localhost:8000/auth/logout \\\n  -H \"X-Session-ID: abc123...\"\n</code></pre></p> <p>Response: <pre><code>{\n  \"message\": \"Logged out successfully\"\n}\n</code></pre></p>"},{"location":"api/endpoints/#get-authtables","title":"GET /auth/tables","text":"<p>List tables for authenticated user.</p> <p>Request: <pre><code>curl http://localhost:8000/auth/tables \\\n  -H \"X-Session-ID: abc123...\"\n</code></pre></p> <p>Response: <pre><code>{\n  \"tables\": [\"orders\", \"customers\"]\n}\n</code></pre></p>"},{"location":"api/endpoints/#schedule-endpoints","title":"Schedule Endpoints","text":""},{"location":"api/endpoints/#get-apischedules","title":"GET /api/schedules","text":"<p>List all schedules.</p> <p>Request: <pre><code>curl http://localhost:8000/api/schedules\n</code></pre></p> <p>Response: <pre><code>{\n  \"schedules\": [\n    {\n      \"id\": \"schedule_1\",\n      \"name\": \"Daily Sales Report\",\n      \"question\": \"Show sales by product\",\n      \"cron\": \"0 9 * * *\",\n      \"next_run\": \"2025-02-12T09:00:00Z\",\n      \"enabled\": true\n    }\n  ]\n}\n</code></pre></p>"},{"location":"api/endpoints/#post-apischedules","title":"POST /api/schedules","text":"<p>Create new schedule.</p> <p>Request: <pre><code>{\n  \"name\": \"Weekly Revenue Report\",\n  \"question\": \"Show weekly revenue by region\",\n  \"tables\": [\"orders\", \"regions\"],\n  \"cron\": \"0 8 * * 1\",\n  \"email_recipients\": [\"team@company.com\"],\n  \"format\": \"excel\"\n}\n</code></pre></p> <p>Response: <pre><code>{\n  \"schedule_id\": \"schedule_2\",\n  \"message\": \"Schedule created successfully\",\n  \"next_run\": \"2025-02-17T08:00:00Z\"\n}\n</code></pre></p>"},{"location":"api/endpoints/#delete-apischedulesid","title":"DELETE /api/schedules/{id}","text":"<p>Delete schedule.</p> <p>Request: <pre><code>curl -X DELETE http://localhost:8000/api/schedules/schedule_1\n</code></pre></p> <p>Response: <pre><code>{\n  \"message\": \"Schedule deleted successfully\"\n}\n</code></pre></p>"},{"location":"api/endpoints/#analytics-endpoints","title":"Analytics Endpoints","text":""},{"location":"api/endpoints/#get-analyticsmetrics","title":"GET /analytics/metrics","text":"<p>Query performance metrics.</p> <p>Request: <pre><code>curl http://localhost:8000/analytics/metrics\n</code></pre></p> <p>Response: <pre><code>{\n  \"total_queries\": 1250,\n  \"avg_execution_time_ms\": 145,\n  \"success_rate\": 0.95,\n  \"queries_today\": 87\n}\n</code></pre></p>"},{"location":"api/endpoints/#get-analyticshistory","title":"GET /analytics/history","text":"<p>Query history with filters.</p> <p>Request: <pre><code>curl \"http://localhost:8000/analytics/history?limit=10&amp;success=true\"\n</code></pre></p> <p>Response: <pre><code>{\n  \"queries\": [\n    {\n      \"id\": \"query_123\",\n      \"question\": \"Show top customers\",\n      \"sql\": \"SELECT * FROM customers...\",\n      \"execution_time_ms\": 120,\n      \"success\": true,\n      \"created_at\": \"2025-02-11T14:30:00Z\"\n    }\n  ],\n  \"total\": 1250\n}\n</code></pre></p>"},{"location":"api/endpoints/#admin-endpoints","title":"Admin Endpoints","text":""},{"location":"api/endpoints/#post-adminreload","title":"POST /admin/reload","text":"<p>Reload configuration without restart.</p> <p>Request: <pre><code>curl -X POST http://localhost:8000/admin/reload\n</code></pre></p> <p>Response: <pre><code>{\n  \"message\": \"Configuration reloaded successfully\",\n  \"changes\": [\"llm.temperature\", \"prompts.sql_generation\"]\n}\n</code></pre></p>"},{"location":"api/endpoints/#get-adminprompts","title":"GET /admin/prompts","text":"<p>Get all runtime prompts.</p> <p>Request: <pre><code>curl http://localhost:8000/admin/prompts\n</code></pre></p> <p>Response: <pre><code>{\n  \"prompts\": {\n    \"intent_detection\": \"Analyze user question...\",\n    \"sql_generation\": \"Generate SQL based on...\",\n    \"barista_personality\": \"You are SQLatte...\",\n    \"insights_generation\": \"Analyze results...\"\n  }\n}\n</code></pre></p>"},{"location":"api/endpoints/#put-adminpromptstype","title":"PUT /admin/prompts/{type}","text":"<p>Update specific prompt.</p> <p>Request: <pre><code>curl -X PUT http://localhost:8000/admin/prompts/sql_generation \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"prompt\": \"Custom SQL generation rules...\"\n  }'\n</code></pre></p> <p>Response: <pre><code>{\n  \"message\": \"Prompt updated successfully\",\n  \"type\": \"sql_generation\"\n}\n</code></pre></p>"},{"location":"api/endpoints/#error-responses","title":"Error Responses","text":""},{"location":"api/endpoints/#standard-error-format","title":"Standard Error Format","text":"<pre><code>{\n  \"error\": \"Error message\",\n  \"code\": \"ERROR_CODE\",\n  \"details\": \"Additional details\"\n}\n</code></pre>"},{"location":"api/endpoints/#common-error-codes","title":"Common Error Codes","text":"Status Code Description 400 INVALID_REQUEST Missing or invalid parameters 401 UNAUTHORIZED Session expired or invalid 404 NOT_FOUND Resource not found 429 RATE_LIMIT Too many requests 500 INTERNAL_ERROR Server error"},{"location":"api/endpoints/#rate-limiting","title":"Rate Limiting","text":"<p>Limits: - 100 requests/minute per IP - 1000 requests/hour per session</p> <p>Headers: <pre><code>X-RateLimit-Limit: 100\nX-RateLimit-Remaining: 95\nX-RateLimit-Reset: 1644591600\n</code></pre></p>"},{"location":"api/endpoints/#examples","title":"Examples","text":""},{"location":"api/endpoints/#complete-workflow","title":"Complete Workflow","text":"<p>1. Get tables: <pre><code>curl http://localhost:8000/api/tables\n</code></pre></p> <p>2. Get schema: <pre><code>curl -X POST http://localhost:8000/api/schema \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"tables\": [\"orders\"]}'\n</code></pre></p> <p>3. Execute query: <pre><code>curl -X POST http://localhost:8000/api/query \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"question\": \"Show total sales today\",\n    \"schema\": \"Table: orders...\"\n  }'\n</code></pre></p>"},{"location":"api/endpoints/#with-authentication","title":"With Authentication","text":"<p>1. Login: <pre><code>SESSION=$(curl -X POST http://localhost:8000/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"username\": \"user@company.com\",\n    \"password\": \"password\",\n    \"database_type\": \"trino\",\n    \"host\": \"trino.company.com\"\n  }' | jq -r '.session_id')\n</code></pre></p> <p>2. Query with session: <pre><code>curl -X POST http://localhost:8000/auth/query \\\n  -H \"Content-Type: application/json\" \\\n  -H \"X-Session-ID: $SESSION\" \\\n  -d '{\n    \"question\": \"Show my orders\"\n  }'\n</code></pre></p> <p>3. Logout: <pre><code>curl -X POST http://localhost:8000/auth/logout \\\n  -H \"X-Session-ID: $SESSION\"\n</code></pre></p> <p>Next: WebSocket API </p>"},{"location":"api/websocket/","title":"WebSocket API","text":"<p>Real-time communication with SQLatte for streaming query results and live updates.</p>"},{"location":"api/websocket/#overview","title":"Overview","text":"<p>WebSocket API enables:</p> <ul> <li>Real-time query execution</li> <li>Streaming large result sets</li> <li>Live schedule notifications</li> <li>Progress updates for long queries</li> </ul> <p>Status: \ud83d\udea7 Coming Soon - Currently in development</p>"},{"location":"api/websocket/#connection","title":"Connection","text":""},{"location":"api/websocket/#endpoint","title":"Endpoint","text":"<pre><code>ws://localhost:8000/ws\n</code></pre>"},{"location":"api/websocket/#javascript-example","title":"JavaScript Example","text":"<pre><code>const socket = new WebSocket('ws://localhost:8000/ws');\n\nsocket.onopen = () =&gt; {\n  console.log('Connected to SQLatte');\n};\n\nsocket.onmessage = (event) =&gt; {\n  const data = JSON.parse(event.data);\n  console.log('Received:', data);\n};\n\nsocket.onerror = (error) =&gt; {\n  console.error('WebSocket error:', error);\n};\n\nsocket.onclose = () =&gt; {\n  console.log('Disconnected');\n};\n</code></pre>"},{"location":"api/websocket/#message-format","title":"Message Format","text":""},{"location":"api/websocket/#client-server","title":"Client \u2192 Server","text":"<pre><code>{\n  \"type\": \"query\",\n  \"data\": {\n    \"question\": \"Show me all orders\",\n    \"schema\": \"Table: orders...\",\n    \"session_id\": \"abc123\"\n  }\n}\n</code></pre>"},{"location":"api/websocket/#server-client","title":"Server \u2192 Client","text":"<pre><code>{\n  \"type\": \"query_result\",\n  \"data\": {\n    \"sql\": \"SELECT * FROM orders\",\n    \"columns\": [\"id\", \"amount\"],\n    \"rows\": [[1, 100], [2, 200]],\n    \"total_rows\": 2,\n    \"execution_time_ms\": 150\n  }\n}\n</code></pre>"},{"location":"api/websocket/#message-types","title":"Message Types","text":""},{"location":"api/websocket/#query-execution","title":"Query Execution","text":"<p>Client sends: <pre><code>{\n  \"type\": \"query\",\n  \"data\": {\n    \"question\": \"Show sales today\",\n    \"schema\": \"Table: orders...\"\n  }\n}\n</code></pre></p> <p>Server responds: <pre><code>{\n  \"type\": \"query_start\",\n  \"data\": {\n    \"query_id\": \"q_123\"\n  }\n}\n</code></pre></p> <pre><code>{\n  \"type\": \"query_progress\",\n  \"data\": {\n    \"query_id\": \"q_123\",\n    \"progress\": 50,\n    \"message\": \"Processing 500 rows...\"\n  }\n}\n</code></pre> <pre><code>{\n  \"type\": \"query_result\",\n  \"data\": {\n    \"query_id\": \"q_123\",\n    \"sql\": \"SELECT...\",\n    \"columns\": [...],\n    \"rows\": [...]\n  }\n}\n</code></pre>"},{"location":"api/websocket/#streaming-results","title":"Streaming Results","text":"<p>For large datasets (&gt;1000 rows):</p> <p>Server sends chunks: <pre><code>{\n  \"type\": \"result_chunk\",\n  \"data\": {\n    \"query_id\": \"q_123\",\n    \"chunk\": 1,\n    \"rows\": [[1, 100], [2, 200], ...]\n  }\n}\n</code></pre></p> <pre><code>{\n  \"type\": \"result_complete\",\n  \"data\": {\n    \"query_id\": \"q_123\",\n    \"total_rows\": 5000,\n    \"total_chunks\": 5\n  }\n}\n</code></pre>"},{"location":"api/websocket/#live-notifications","title":"Live Notifications","text":"<p>Schedule execution: <pre><code>{\n  \"type\": \"schedule_executed\",\n  \"data\": {\n    \"schedule_id\": \"schedule_1\",\n    \"schedule_name\": \"Daily Sales\",\n    \"success\": true,\n    \"rows_returned\": 150\n  }\n}\n</code></pre></p> <p>Error notification: <pre><code>{\n  \"type\": \"error\",\n  \"data\": {\n    \"message\": \"Query execution failed\",\n    \"error\": \"Table not found: orders\"\n  }\n}\n</code></pre></p>"},{"location":"api/websocket/#authentication","title":"Authentication","text":""},{"location":"api/websocket/#with-session-id","title":"With Session ID","text":"<pre><code>const socket = new WebSocket('ws://localhost:8000/ws');\n\nsocket.onopen = () =&gt; {\n  // Send authentication\n  socket.send(JSON.stringify({\n    type: 'auth',\n    data: {\n      session_id: 'abc123...'\n    }\n  }));\n};\n</code></pre>"},{"location":"api/websocket/#examples","title":"Examples","text":""},{"location":"api/websocket/#simple-query","title":"Simple Query","text":"<pre><code>// Connect\nconst socket = new WebSocket('ws://localhost:8000/ws');\n\n// Send query\nsocket.onopen = () =&gt; {\n  socket.send(JSON.stringify({\n    type: 'query',\n    data: {\n      question: 'Show top 10 customers',\n      schema: 'Table: customers\\nColumns: id, name, revenue'\n    }\n  }));\n};\n\n// Receive results\nsocket.onmessage = (event) =&gt; {\n  const message = JSON.parse(event.data);\n\n  if (message.type === 'query_result') {\n    console.log('SQL:', message.data.sql);\n    console.log('Rows:', message.data.rows);\n  }\n};\n</code></pre>"},{"location":"api/websocket/#streaming-large-dataset","title":"Streaming Large Dataset","text":"<pre><code>let allRows = [];\n\nsocket.onmessage = (event) =&gt; {\n  const message = JSON.parse(event.data);\n\n  switch (message.type) {\n    case 'query_start':\n      console.log('Query started:', message.data.query_id);\n      break;\n\n    case 'query_progress':\n      console.log('Progress:', message.data.progress + '%');\n      break;\n\n    case 'result_chunk':\n      allRows.push(...message.data.rows);\n      console.log(`Received chunk ${message.data.chunk}`);\n      break;\n\n    case 'result_complete':\n      console.log('Complete! Total rows:', allRows.length);\n      renderTable(allRows);\n      break;\n  }\n};\n</code></pre>"},{"location":"api/websocket/#live-dashboard","title":"Live Dashboard","text":"<p>Subscribe to real-time updates:</p> <pre><code>socket.onopen = () =&gt; {\n  // Subscribe to schedule events\n  socket.send(JSON.stringify({\n    type: 'subscribe',\n    data: {\n      events: ['schedule_executed', 'query_completed']\n    }\n  }));\n};\n\nsocket.onmessage = (event) =&gt; {\n  const message = JSON.parse(event.data);\n\n  if (message.type === 'schedule_executed') {\n    updateDashboard(message.data);\n  }\n};\n</code></pre>"},{"location":"api/websocket/#error-handling","title":"Error Handling","text":""},{"location":"api/websocket/#connection-errors","title":"Connection Errors","text":"<pre><code>socket.onerror = (error) =&gt; {\n  console.error('Connection error:', error);\n};\n\nsocket.onclose = (event) =&gt; {\n  if (!event.wasClean) {\n    console.error('Connection lost:', event.code, event.reason);\n    // Attempt reconnection\n    setTimeout(reconnect, 5000);\n  }\n};\n</code></pre>"},{"location":"api/websocket/#query-errors","title":"Query Errors","text":"<pre><code>socket.onmessage = (event) =&gt; {\n  const message = JSON.parse(event.data);\n\n  if (message.type === 'error') {\n    console.error('Query error:', message.data.message);\n    showErrorToUser(message.data.message);\n  }\n};\n</code></pre>"},{"location":"api/websocket/#reconnection","title":"Reconnection","text":"<pre><code>class SQLatteWebSocket {\n  constructor(url) {\n    this.url = url;\n    this.reconnectAttempts = 0;\n    this.maxReconnectAttempts = 5;\n    this.connect();\n  }\n\n  connect() {\n    this.socket = new WebSocket(this.url);\n\n    this.socket.onopen = () =&gt; {\n      console.log('Connected');\n      this.reconnectAttempts = 0;\n    };\n\n    this.socket.onclose = () =&gt; {\n      if (this.reconnectAttempts &lt; this.maxReconnectAttempts) {\n        this.reconnectAttempts++;\n        setTimeout(() =&gt; this.connect(), 2000);\n      }\n    };\n  }\n}\n</code></pre>"},{"location":"api/websocket/#performance-tips","title":"Performance Tips","text":""},{"location":"api/websocket/#batch-messages","title":"Batch Messages","text":"<pre><code>// Don't send messages one by one\nmessages.forEach(msg =&gt; socket.send(msg)); // \u274c\n\n// Batch them\nsocket.send(JSON.stringify({\n  type: 'batch',\n  data: {\n    messages: messages\n  }\n})); // \u2705\n</code></pre>"},{"location":"api/websocket/#throttle-updates","title":"Throttle Updates","text":"<pre><code>let buffer = [];\nlet timeout;\n\nsocket.onmessage = (event) =&gt; {\n  buffer.push(JSON.parse(event.data));\n\n  clearTimeout(timeout);\n  timeout = setTimeout(() =&gt; {\n    processMessages(buffer);\n    buffer = [];\n  }, 100);\n};\n</code></pre>"},{"location":"api/websocket/#limitations","title":"Limitations","text":"<ul> <li>\u26a0\ufe0f Not yet implemented - Coming in future version</li> <li> <p>\ud83d\udea7 Planned features:</p> </li> <li> <p>Real-time query execution</p> </li> <li>Streaming results for large datasets</li> <li>Live schedule notifications</li> <li>Progress updates</li> <li>Multi-user collaboration</li> </ul>"},{"location":"api/websocket/#roadmap","title":"Roadmap","text":"<p>Phase 1: Basic WebSocket connection</p> <ul> <li>Query execution</li> <li>Result streaming</li> </ul> <p>Phase 2: Live updates</p> <ul> <li>Schedule notifications</li> <li>Real-time dashboard</li> </ul> <p>Phase 3: Collaboration</p> <ul> <li>Multi-user queries</li> <li>Shared sessions</li> <li>Live cursors</li> </ul>"},{"location":"api/websocket/#alternative-server-sent-events-sse","title":"Alternative: Server-Sent Events (SSE)","text":"<p>For one-way updates, consider SSE:</p> <pre><code>const eventSource = new EventSource('http://localhost:8000/events');\n\neventSource.onmessage = (event) =&gt; {\n  const data = JSON.parse(event.data);\n  console.log('Update:', data);\n};\n</code></pre> <p>Use cases:</p> <ul> <li>Live dashboard updates</li> <li>Schedule execution notifications</li> <li>System status monitoring</li> </ul> <p>Next: REST Endpoints </p> <p>Note: WebSocket API is currently in development. Use REST API for production deployments.</p>"},{"location":"architecture/overview/","title":"System Overview","text":"<p>This document provides a detailed technical overview of SQLatte's system architecture, component interactions, and data flow patterns.</p>"},{"location":"architecture/overview/#high-level-architecture","title":"High-Level Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         User Interfaces                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Standard     \u2502 Auth Widget  \u2502 Dashboard    \u2502 Admin Panel        \u2502\n\u2502 Widget       \u2502 (Multi-user) \u2502 (Unified)    \u2502 (Config)           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502              \u2502              \u2502                \u2502\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2193\n       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n       \u2502              FastAPI Backend                      \u2502\n       \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n       \u2502  \u2502         API Routes &amp; Endpoints             \u2502  \u2502\n       \u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  \u2502\n       \u2502  \u2502  /api/query    /auth/login   /admin/*     \u2502  \u2502\n       \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2193\n       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n       \u2502            Core Business Logic                    \u2502\n       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n       \u2502 Conversation \u2502 Session       \u2502 Query History     \u2502\n       \u2502 Manager      \u2502 Manager       \u2502 Manager           \u2502\n       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n       \u2502 Config       \u2502 Scheduler     \u2502 Email Service     \u2502\n       \u2502 Manager      \u2502 Manager       \u2502                   \u2502\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2193\n       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n       \u2502         Provider Abstraction Layer                \u2502\n       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n       \u2502  LLM Providers        \u2502  Database Providers       \u2502\n       \u2502  - Anthropic Claude   \u2502  - Trino                  \u2502\n       \u2502  - Google Gemini      \u2502  - PostgreSQL             \u2502\n       \u2502  - Vertex AI          \u2502  - MySQL                  \u2502\n       \u2502                       \u2502  - BigQuery               \u2502\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2193\n       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n       \u2502           External Systems                        \u2502\n       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n       \u2502  LLM APIs             \u2502  User Databases           \u2502\n       \u2502  - api.anthropic.com  \u2502  - Production DBs         \u2502\n       \u2502  - generativelanguage \u2502  - Data Warehouses        \u2502\n       \u2502  - aiplatform.google  \u2502  - Analytics DBs          \u2502\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/overview/#core-components","title":"Core Components","text":""},{"location":"architecture/overview/#1-api-layer-fastapi","title":"1. API Layer (FastAPI)","text":"<p>Location: <code>src/api/app.py</code></p> <p>Responsibilities: - HTTP request handling - Route registration - CORS configuration - Plugin initialization - Error handling</p> <p>Key Endpoints:</p> Endpoint Method Purpose <code>/api/query</code> POST Execute natural language query (standard widget) <code>/api/tables</code> GET List available database tables <code>/api/schema</code> POST Get table schema information <code>/auth/login</code> POST Authenticate user (auth widget) <code>/auth/query</code> POST Execute query with user credentials <code>/auth/tables</code> GET List tables for authenticated user <code>/admin/*</code> GET/POST Admin panel endpoints <code>/analytics/*</code> GET Analytics dashboard endpoints <code>/health</code> GET Health check <p>Request Flow Example:</p> <pre><code>@app.post(\"/api/query\")\nasync def query_endpoint(request: QueryRequest):\n    # 1. Get/create conversation session\n    session_id, session = conversation_manager.get_or_create_session(\n        request.session_id\n    )\n\n    # 2. Add user message to session\n    conversation_manager.add_message(\n        session_id, \n        role=\"user\", \n        content=request.question\n    )\n\n    # 3. Get conversation context\n    context = conversation_manager.get_conversation_context(session_id)\n\n    # 4. Determine intent (SQL vs chat)\n    intent = llm_provider.determine_intent(\n        request.question, \n        request.schema\n    )\n\n    # 5. Execute based on intent\n    if intent == \"sql\":\n        sql, explanation = llm_provider.generate_sql(...)\n        columns, data = db_provider.execute_query(sql)\n        insights = insights_engine.generate_insights(...)\n        result = {\"sql\": sql, \"data\": data, \"insights\": insights}\n    else:\n        response = llm_provider.generate_chat_response(...)\n        result = {\"message\": response}\n\n    # 6. Add assistant response to session\n    conversation_manager.add_message(\n        session_id,\n        role=\"assistant\",\n        content=result\n    )\n\n    # 7. Log to analytics (if enabled)\n    query_history.add_query(...)\n\n    return result\n</code></pre>"},{"location":"architecture/overview/#2-conversation-manager","title":"2. Conversation Manager","text":"<p>Location: <code>src/core/conversation_manager.py</code></p> <p>Purpose: Manages conversation sessions and message history for context-aware responses.</p> <p>Class Structure:</p> <pre><code>class ConversationMessage:\n    role: str           # \"user\" or \"assistant\"\n    content: str        # Message content\n    metadata: dict      # Additional data\n    timestamp: datetime # When message was created\n\nclass ConversationSession:\n    session_id: str                      # Unique session ID\n    messages: List[ConversationMessage]  # Message history\n    created_at: datetime                 # Session creation time\n    last_activity: datetime              # Last message timestamp\n\n    def add_message(role, content, metadata)\n    def get_llm_context(max_messages=10) \u2192 List[dict]\n    def is_expired(timeout_minutes) \u2192 bool\n\nclass ConversationManager:\n    sessions: Dict[str, ConversationSession]  # session_id \u2192 session\n    session_timeout_minutes: int              # Default: 60\n    max_context_messages: int                 # Default: 10\n\n    def create_session() \u2192 str\n    def get_or_create_session(session_id) \u2192 (session_id, session)\n    def add_message(session_id, role, content, metadata)\n    def get_conversation_context(session_id) \u2192 List[dict]\n</code></pre> <p>Key Features: - \u2705 In-Memory Storage: Fast access, no DB overhead - \u2705 Session Timeout: Auto-expire inactive sessions - \u2705 Context Window: Last N messages sent to LLM - \u2705 Thread-Safe: Supports concurrent sessions</p> <p>Conversation Flow:</p> <pre><code>User: \"Show me top customers\"\n    \u2193\nConversationManager.add_message(role=\"user\", content=\"Show me...\")\n    \u2193\nSession.messages = [\n    {role: \"user\", content: \"Show me top customers\"}\n]\n    \u2193\nLLM generates SQL and executes\n    \u2193\nConversationManager.add_message(role=\"assistant\", content={sql, data})\n    \u2193\nSession.messages = [\n    {role: \"user\", content: \"Show me top customers\"},\n    {role: \"assistant\", content: {sql: \"SELECT...\", data: [...]}}\n]\n    \u2193\nUser: \"What about last month?\"\n    \u2193\nConversationManager.get_conversation_context()\n    \u2193\nReturns last 10 messages to LLM for context\n    \u2193\nLLM understands \"last month\" refers to customers query\n</code></pre>"},{"location":"architecture/overview/#3-session-manager-auth-plugin","title":"3. Session Manager (Auth Plugin)","text":"<p>Location: <code>src/plugins/session_manager.py</code></p> <p>Purpose: Manages authenticated user sessions for multi-tenant deployments.</p> <p>Class Structure:</p> <pre><code>class AuthSession:\n    session_id: str          # Unique session ID\n    username: str            # User identifier\n    db_config: Dict          # User's database credentials\n    created_at: datetime     # Session start time\n    last_activity: datetime  # Last request time\n    ttl_minutes: int         # Session timeout (default: 480 = 8 hours)\n    conversation_id: str     # Linked conversation session\n\n    def is_expired() \u2192 bool\n    def touch()  # Update last_activity\n\nclass SessionManager:\n    sessions: Dict[str, AuthSession]  # session_id \u2192 auth_session\n    lock: threading.RLock             # Thread-safe access\n    cleanup_task: Thread              # Background cleanup thread\n\n    def create_session(username, db_config) \u2192 str\n    def get_session(session_id) \u2192 AuthSession\n    def delete_session(session_id)\n    def cleanup_expired_sessions()  # Background task\n</code></pre> <p>Thread Safety:</p> <pre><code>class SessionManager:\n    def __init__(self):\n        self.sessions = {}\n        self.lock = threading.RLock()  # Reentrant lock\n\n    def get_session(self, session_id):\n        with self.lock:  # Thread-safe access\n            session = self.sessions.get(session_id)\n            if session:\n                session.touch()  # Update activity\n            return session\n</code></pre> <p>Background Cleanup:</p> <pre><code>def cleanup_expired_sessions(self):\n    \"\"\"Background task runs every 5 minutes\"\"\"\n    while self.running:\n        time.sleep(300)  # 5 minutes\n\n        with self.lock:\n            expired = [\n                sid for sid, session in self.sessions.items()\n                if session.is_expired()\n            ]\n\n            for sid in expired:\n                del self.sessions[sid]\n                print(f\"\ud83d\uddd1\ufe0f Cleaned up expired session: {sid[:8]}...\")\n</code></pre>"},{"location":"architecture/overview/#4-provider-factory","title":"4. Provider Factory","text":"<p>Location: <code>src/core/provider_factory.py</code></p> <p>Purpose: Creates database and LLM provider instances based on configuration.</p> <p>Pattern:</p> <pre><code>class ProviderFactory:\n    @staticmethod\n    def create_db_provider(config):\n        provider_type = config['database']['provider']\n\n        if provider_type == 'trino':\n            return TrinoProvider(config['database']['trino'])\n        elif provider_type == 'postgresql':\n            return PostgreSQLProvider(config['database']['postgresql'])\n        elif provider_type == 'mysql':\n            return MySQLProvider(config['database']['mysql'])\n        elif provider_type == 'bigquery':\n            return BigQueryProvider(config['database']['bigquery'])\n        else:\n            raise ValueError(f\"Unknown provider: {provider_type}\")\n\n    @staticmethod\n    def create_llm_provider(config):\n        provider_type = config['llm']['provider']\n\n        if provider_type == 'anthropic':\n            return AnthropicProvider(config['llm']['anthropic'])\n        elif provider_type == 'gemini':\n            return GeminiProvider(config['llm']['gemini'])\n        elif provider_type == 'vertex':\n            return VertexAIProvider(config['llm']['vertex'])\n        else:\n            raise ValueError(f\"Unknown LLM provider: {provider_type}\")\n</code></pre> <p>Benefits: - \u2705 Single point of provider instantiation - \u2705 Easy to add new providers - \u2705 Configuration-driven selection</p>"},{"location":"architecture/overview/#5-database-providers","title":"5. Database Providers","text":"<p>Base Interface:</p> <pre><code>class DatabaseProvider(ABC):\n    @abstractmethod\n    def execute_query(self, sql: str) \u2192 Tuple[List[str], List[List]]:\n        \"\"\"Execute SQL and return (columns, rows)\"\"\"\n        pass\n\n    @abstractmethod\n    def get_tables(self) \u2192 List[str]:\n        \"\"\"Get list of available tables\"\"\"\n        pass\n\n    @abstractmethod\n    def get_table_schema(self, table_name: str) \u2192 str:\n        \"\"\"Get schema for a specific table\"\"\"\n        pass\n</code></pre> <p>Trino Provider:</p> <pre><code>class TrinoProvider(DatabaseProvider):\n    def __init__(self, config):\n        self.conn = trino.dbapi.connect(\n            host=config['host'],\n            port=config['port'],\n            user=config['user'],\n            catalog=config['catalog'],\n            schema=config['schema'],\n            http_scheme=config.get('http_scheme', 'https')\n        )\n\n    def execute_query(self, sql):\n        cursor = self.conn.cursor()\n        cursor.execute(sql)\n        columns = [desc[0] for desc in cursor.description]\n        data = cursor.fetchall()\n        return columns, data\n</code></pre> <p>PostgreSQL Provider:</p> <pre><code>class PostgreSQLProvider(DatabaseProvider):\n    def __init__(self, config):\n        self.pool = psycopg2.pool.SimpleConnectionPool(\n            minconn=1,\n            maxconn=config.get('pool_size', 5),\n            host=config['host'],\n            port=config['port'],\n            database=config['database'],\n            user=config['user'],\n            password=config['password']\n        )\n\n    def execute_query(self, sql):\n        conn = self.pool.getconn()\n        try:\n            cursor = conn.cursor()\n            cursor.execute(sql)\n            columns = [desc[0] for desc in cursor.description]\n            data = cursor.fetchall()\n            return columns, data\n        finally:\n            self.pool.putconn(conn)\n</code></pre>"},{"location":"architecture/overview/#6-llm-providers","title":"6. LLM Providers","text":"<p>Base Interface:</p> <pre><code>class LLMProvider(ABC):\n    @abstractmethod\n    def determine_intent(self, question: str, schema: str) \u2192 dict:\n        \"\"\"Determine if question requires SQL or is chat\"\"\"\n        pass\n\n    @abstractmethod\n    def generate_sql(self, question: str, schema: str) \u2192 Tuple[str, str]:\n        \"\"\"Generate SQL query and explanation\"\"\"\n        pass\n\n    @abstractmethod\n    def generate_chat_response(self, question: str, schema: str = \"\") \u2192 str:\n        \"\"\"Generate chat response for non-SQL questions\"\"\"\n        pass\n\n    @abstractmethod\n    def generate_insights(self, data, question, sql) \u2192 List[dict]:\n        \"\"\"Analyze query results and generate insights\"\"\"\n        pass\n</code></pre> <p>Anthropic Provider:</p> <pre><code>class AnthropicProvider(LLMProvider):\n    def __init__(self, config):\n        self.client = anthropic.Anthropic(\n            api_key=config['api_key']\n        )\n        self.model = config.get('model', 'claude-sonnet-4-20250514')\n        self.temperature = config.get('temperature', 0.0)\n        self.max_tokens = config.get('max_tokens', 4096)\n\n    def generate_sql(self, question, schema):\n        # Get custom prompt from config\n        prompt_template = config_manager.get_prompt('sql_generation')\n\n        # Inject variables\n        prompt = prompt_template.format(\n            schema_info=schema,\n            question=question\n        )\n\n        # Call Claude API\n        message = self.client.messages.create(\n            model=self.model,\n            max_tokens=self.max_tokens,\n            temperature=self.temperature,\n            messages=[{\"role\": \"user\", \"content\": prompt}]\n        )\n\n        # Parse response\n        response = message.content[0].text\n        sql = self._extract_sql(response)\n        explanation = self._extract_explanation(response)\n\n        return sql, explanation\n</code></pre>"},{"location":"architecture/overview/#7-configuration-manager","title":"7. Configuration Manager","text":"<p>Location: <code>src/core/config_manager_enhanced.py</code></p> <p>Purpose: Centralized configuration management with hot reload support.</p> <pre><code>class ConfigManager:\n    def __init__(self):\n        self.config_path = \"config/config.yaml\"\n        self.base_config = {}           # From YAML\n        self.runtime_overrides = {}     # From admin panel\n        self.db_enabled = False         # PostgreSQL persistence\n        self.config_db = None           # Optional ConfigDB\n\n    def load_config(self):\n        \"\"\"Load base config from YAML\"\"\"\n        with open(self.config_path) as f:\n            self.base_config = yaml.safe_load(f)\n\n    def get_config(self):\n        \"\"\"Merge base + overrides\"\"\"\n        merged = deep_merge(self.base_config, self.runtime_overrides)\n        return merged\n\n    def set_runtime_override(self, key, value):\n        \"\"\"Update config without restart\"\"\"\n        self.runtime_overrides[key] = value\n        if self.db_enabled:\n            self.config_db.save_override(key, value)\n\n    def reload_providers(self):\n        \"\"\"Hot reload LLM/DB providers\"\"\"\n        config = self.get_config()\n        global llm_provider, db_provider\n        llm_provider = ProviderFactory.create_llm_provider(config)\n        db_provider = ProviderFactory.create_db_provider(config)\n</code></pre> <p>Configuration Hierarchy:</p> <pre><code>1. config.yaml (Base configuration)\n    \u2193\n2. Environment Variables (Override specific values)\n    SQLATTE_DB_HOST=production.db.com\n    SQLATTE_LLM_API_KEY=sk-ant-xxxxx\n    \u2193\n3. Runtime Overrides (Admin panel changes)\n    config_manager.set_runtime_override('llm.temperature', 0.5)\n    \u2193\n4. Database Persistence (Optional)\n    ConfigDB.save_override('prompts.sql_generation', new_prompt)\n    \u2193\n5. Final Merged Configuration\n</code></pre>"},{"location":"architecture/overview/#8-scheduler-manager","title":"8. Scheduler Manager","text":"<p>Location: <code>src/core/scheduler_manager.py</code></p> <p>Purpose: Background job scheduling for automated query execution.</p> <pre><code>class ScheduleManager:\n    def __init__(self):\n        self.scheduler = BackgroundScheduler()  # APScheduler\n        self.schedules_db = ScheduledQueriesDB()\n        self.email_service = EmailService()\n\n    def create_schedule(self, schedule_config):\n        \"\"\"Create a new scheduled query\"\"\"\n        # Save to database\n        schedule_id = self.schedules_db.create_schedule(schedule_config)\n\n        # Register with APScheduler\n        trigger = CronTrigger.from_crontab(schedule_config['cron'])\n        self.scheduler.add_job(\n            func=self.execute_schedule,\n            trigger=trigger,\n            args=[schedule_id],\n            id=schedule_id\n        )\n\n        return schedule_id\n\n    async def execute_schedule(self, schedule_id):\n        \"\"\"Execute a scheduled query\"\"\"\n        schedule = self.schedules_db.get_schedule(schedule_id)\n\n        # Execute query\n        db_provider = ProviderFactory.create_db_provider(config)\n        columns, data = db_provider.execute_query(schedule['sql'])\n\n        # Format result\n        formatted = format_result(\n            columns, data, \n            format_type=schedule['format']  # csv, excel, html\n        )\n\n        # Send email\n        await self.email_service.send_email(\n            recipients=schedule['email_recipients'],\n            subject=schedule['email_subject'],\n            body=self.email_service.create_report_email(...),\n            attachments=[formatted]\n        )\n\n        # Log execution\n        self.schedules_db.log_execution(schedule_id, success=True)\n</code></pre> <p>Cron Examples:</p> <pre><code># Daily at 9 AM\ncron = \"0 9 * * *\"\n\n# Every Monday at 8 AM\ncron = \"0 8 * * 1\"\n\n# First day of month at 6 AM\ncron = \"0 6 1 * *\"\n</code></pre>"},{"location":"architecture/overview/#9-plugin-system","title":"9. Plugin System","text":"<p>Base Plugin Class:</p> <pre><code>class BasePlugin(ABC):\n    def __init__(self, config: Dict[str, Any]):\n        self.config = config\n        self.enabled = config.get('enabled', False)\n\n    @abstractmethod\n    def initialize(self, app: FastAPI):\n        \"\"\"Called on application startup\"\"\"\n        pass\n\n    @abstractmethod\n    def register_routes(self, app: FastAPI):\n        \"\"\"Register plugin-specific endpoints\"\"\"\n        pass\n\n    async def before_request(self, request):\n        \"\"\"Middleware: before request processing\"\"\"\n        return None\n\n    async def after_request(self, request, response):\n        \"\"\"Middleware: after request processing\"\"\"\n        return response\n\n    def shutdown(self):\n        \"\"\"Cleanup on application shutdown\"\"\"\n        pass\n</code></pre> <p>Plugin Manager:</p> <pre><code>class PluginManager:\n    def __init__(self):\n        self.plugins: List[BasePlugin] = []\n\n    def register_plugin(self, plugin: BasePlugin):\n        if plugin.enabled:\n            self.plugins.append(plugin)\n\n    def initialize_all(self, app: FastAPI):\n        for plugin in self.plugins:\n            plugin.initialize(app)\n            plugin.register_routes(app)\n</code></pre>"},{"location":"architecture/overview/#data-flow-diagrams","title":"Data Flow Diagrams","text":""},{"location":"architecture/overview/#standard-widget-query-flow","title":"Standard Widget Query Flow","text":"<pre><code>1. User enters question in widget\n    \u2193\n2. Widget \u2192 POST /api/query\n    {\n        question: \"Show top customers\",\n        schema: \"Table: customers...\",\n        session_id: \"abc123\"\n    }\n    \u2193\n3. Backend: Get/create conversation session\n    conversation_manager.get_or_create_session(\"abc123\")\n    \u2193\n4. Backend: Add user message to session\n    conversation_manager.add_message(\n        session_id=\"abc123\",\n        role=\"user\",\n        content=\"Show top customers\"\n    )\n    \u2193\n5. Backend: Get conversation context\n    context = conversation_manager.get_conversation_context(\"abc123\")\n    # Returns last 10 messages for LLM context\n    \u2193\n6. Backend: Determine intent\n    intent = llm_provider.determine_intent(\n        question=\"Show top customers\",\n        schema=\"Table: customers...\"\n    )\n    # Returns: {intent: \"sql\", confidence: 0.95}\n    \u2193\n7. Backend: Generate SQL (if intent = sql)\n    sql, explanation = llm_provider.generate_sql(\n        question=\"Show top customers\",\n        schema=\"Table: customers...\"\n    )\n    # Returns: \"SELECT * FROM customers ORDER BY revenue DESC LIMIT 10\"\n    \u2193\n8. Backend: Execute SQL\n    columns, data = db_provider.execute_query(sql)\n    # Returns: ([columns], [[row1], [row2], ...])\n    \u2193\n9. Backend: Generate insights (if enabled)\n    insights = insights_engine.generate_insights(\n        question=\"Show top customers\",\n        sql=sql,\n        data=data\n    )\n    \u2193\n10. Backend: Add assistant response to session\n    conversation_manager.add_message(\n        session_id=\"abc123\",\n        role=\"assistant\",\n        content={sql: ..., data: ..., insights: ...}\n    )\n    \u2193\n11. Backend: Log to analytics (if enabled)\n    query_history.add_query(\n        session_id=\"abc123\",\n        question=\"Show top customers\",\n        sql=sql,\n        execution_time_ms=150,\n        success=True\n    )\n    \u2193\n12. Backend \u2192 Widget: Response\n    {\n        sql: \"SELECT...\",\n        columns: [\"id\", \"name\", \"revenue\"],\n        data: [[1, \"Acme\", 50000], ...],\n        insights: [{type: \"trend\", message: \"...\"}],\n        session_id: \"abc123\"\n    }\n    \u2193\n13. Widget: Display results\n    - Show SQL with syntax highlighting\n    - Render data table\n    - Display insights\n    - Enable chart/export buttons\n</code></pre>"},{"location":"architecture/overview/#auth-widget-query-flow","title":"Auth Widget Query Flow","text":"<pre><code>1. User logs in with credentials\n    \u2193\n2. Widget \u2192 POST /auth/login\n    {\n        username: \"user@company.com\",\n        password: \"***\",\n        database_type: \"trino\",\n        host: \"trino.company.com\",\n        catalog: \"hive\"\n    }\n    \u2193\n3. Auth Plugin: Test database connection\n    db_provider = ProviderFactory.create_db_provider(user_credentials)\n    db_provider.execute_query(\"SELECT 1\")  # Test query\n    \u2193\n4. Auth Plugin: Create session\n    session_id = session_manager.create_session(\n        username=\"user@company.com\",\n        db_config={host: ..., user: ..., password: ...}\n    )\n    \u2193\n5. Auth Plugin \u2192 Widget: Session ID\n    {\n        session_id: \"xyz789\",\n        username: \"user@company.com\"\n    }\n    \u2193\n6. Widget: Store session ID (localStorage)\n    localStorage.setItem('sqlatte_session_id', 'xyz789')\n    \u2193\n7. User enters question\n    \u2193\n8. Widget \u2192 POST /auth/query\n    Headers: {X-Session-ID: \"xyz789\"}\n    Body: {\n        question: \"Show top orders\",\n        schema: \"Table: orders...\"\n    }\n    \u2193\n9. Auth Plugin: Validate session\n    session = session_manager.get_session(\"xyz789\")\n    if not session or session.is_expired():\n        return 401 Unauthorized\n    \u2193\n10. Auth Plugin: Get/create conversation session\n    if not session.conversation_id:\n        conv_id = conversation_manager.create_session()\n        session.conversation_id = conv_id\n    \u2193\n11. Auth Plugin: Execute query with user's DB config\n    # Uses ThreadPoolExecutor for isolation\n    result = await executor.run(\n        _execute_query_for_session,\n        db_config=session.db_config,\n        question=\"Show top orders\",\n        schema=\"Table: orders...\"\n    )\n    \u2193\n12. Auth Plugin \u2192 Widget: Results\n    {\n        sql: \"SELECT...\",\n        data: [...],\n        insights: [...]\n    }\n    \u2193\n13. Widget: Display results\n</code></pre>"},{"location":"architecture/overview/#performance-considerations","title":"Performance Considerations","text":""},{"location":"architecture/overview/#connection-pooling","title":"Connection Pooling","text":"<pre><code># PostgreSQL example\nclass PostgreSQLProvider:\n    def __init__(self, config):\n        self.pool = psycopg2.pool.SimpleConnectionPool(\n            minconn=config.get('min_connections', 1),\n            maxconn=config.get('pool_size', 5),\n            ...\n        )\n\n    def execute_query(self, sql):\n        conn = self.pool.getconn()  # Get from pool\n        try:\n            cursor = conn.cursor()\n            cursor.execute(sql)\n            return cursor.fetchall()\n        finally:\n            self.pool.putconn(conn)  # Return to pool\n</code></pre>"},{"location":"architecture/overview/#async-execution","title":"Async Execution","text":"<pre><code># Auth Plugin uses ThreadPoolExecutor\nclass AuthPlugin:\n    def __init__(self, config):\n        self.executor = ThreadPoolExecutor(\n            max_workers=config.get('max_workers', 40)\n        )\n\n    async def execute_query_async(self, session, question, schema):\n        loop = asyncio.get_event_loop()\n        result = await loop.run_in_executor(\n            self.executor,\n            self._execute_query_sync,\n            session.db_config,\n            question,\n            schema\n        )\n        return result\n</code></pre>"},{"location":"architecture/overview/#caching-strategy-future","title":"Caching Strategy (Future)","text":"<pre><code># Future: Redis-backed query cache\nclass QueryCache:\n    def __init__(self):\n        self.redis = redis.Redis(...)\n        self.ttl = 3600  # 1 hour\n\n    def get_cached_result(self, sql_hash):\n        key = f\"query:{sql_hash}\"\n        cached = self.redis.get(key)\n        if cached:\n            return json.loads(cached)\n        return None\n\n    def cache_result(self, sql_hash, result):\n        key = f\"query:{sql_hash}\"\n        self.redis.setex(key, self.ttl, json.dumps(result))\n</code></pre>"},{"location":"architecture/overview/#deployment-architecture","title":"Deployment Architecture","text":""},{"location":"architecture/overview/#single-instance-current","title":"Single Instance (Current)","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         SQLatte Container              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  FastAPI App                     \u2502  \u2502\n\u2502  \u2502  - API Routes                    \u2502  \u2502\n\u2502  \u2502  - Conversation Manager (memory) \u2502  \u2502\n\u2502  \u2502  - Session Manager (memory)      \u2502  \u2502\n\u2502  \u2502  - APScheduler (background)      \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502               \u2193                         \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  Database Connections            \u2502  \u2502\n\u2502  \u2502  - User DB (Trino/PostgreSQL)    \u2502  \u2502\n\u2502  \u2502  - Analytics DB (optional)       \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/overview/#multi-instance-future","title":"Multi-Instance (Future)","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Load Balancer     \u2502\n\u2502   (Nginx/HAProxy)   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2193             \u2193          \u2193          \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502SQLatte \u2502   \u2502SQLatte \u2502  \u2502SQLatte \u2502  \u2502SQLatte \u2502\n\u2502Instance\u2502   \u2502Instance\u2502  \u2502Instance\u2502  \u2502Instance\u2502\n\u2502   1    \u2502   \u2502   2    \u2502  \u2502   3    \u2502  \u2502   4    \u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518\n     \u2502            \u2502            \u2502            \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2193\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502   Redis (Session Store)    \u2502  # Future\n     \u2502   - Conversation sessions  \u2502\n     \u2502   - Auth sessions          \u2502\n     \u2502   - Query cache            \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2193\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502   PostgreSQL               \u2502\n     \u2502   - Analytics              \u2502\n     \u2502   - Configuration          \u2502\n     \u2502   - Schedule metadata      \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Current Limitation: Conversation memory is in-memory (not shared across instances)</p> <p>Roadmap: - Redis-backed session store - Distributed conversation manager - Sticky sessions at load balancer</p>"},{"location":"architecture/overview/#security-architecture","title":"Security Architecture","text":""},{"location":"architecture/overview/#authentication-flow-auth-widget","title":"Authentication Flow (Auth Widget)","text":"<pre><code>1. User submits credentials\n    \u2193\n2. Auth Plugin validates + tests DB connection\n    \u2193\n3. Create session with encrypted credentials\n    session = AuthSession(\n        session_id=uuid4(),\n        username=username,\n        db_config={\n            'user': username,\n            'password': encrypt(password),  # Future enhancement\n            'host': host,\n            ...\n        }\n    )\n    \u2193\n4. Return session ID to widget (stored in localStorage)\n    \u2193\n5. All subsequent requests include: X-Session-ID header\n    \u2193\n6. Session Manager validates session on each request\n    - Check if session exists\n    - Check if not expired\n    - Update last_activity\n    \u2193\n7. Execute query with session's db_config\n</code></pre>"},{"location":"architecture/overview/#data-isolation","title":"Data Isolation","text":"<pre><code>User A:\n    Session A \u2192 DB Config A \u2192 Connection Pool A \u2192 User A's Database\n\nUser B:\n    Session B \u2192 DB Config B \u2192 Connection Pool B \u2192 User B's Database\n\nThreadPoolExecutor ensures:\n    - Each query executes in isolated thread\n    - No data leakage between users\n    - Concurrent execution without interference\n</code></pre>"},{"location":"architecture/overview/#monitoring-observability","title":"Monitoring &amp; Observability","text":""},{"location":"architecture/overview/#logging","title":"Logging","text":"<pre><code># Structured logging\nimport logging\n\nlogger = logging.getLogger(__name__)\n\n# Request logging\nlogger.info(f\"\ud83d\udcdd Query: {question[:50]}...\")\nlogger.info(f\"\u2705 Result: {len(data)} rows in {exec_time}ms\")\nlogger.error(f\"\u274c Error: {error}\")\n\n# Performance logging\nlogger.debug(f\"\u23f1\ufe0f LLM call: {llm_time}ms\")\nlogger.debug(f\"\u23f1\ufe0f DB query: {db_time}ms\")\n</code></pre>"},{"location":"architecture/overview/#metrics-future","title":"Metrics (Future)","text":"<pre><code># Prometheus metrics\nfrom prometheus_client import Counter, Histogram\n\nquery_counter = Counter('sqlatte_queries_total', 'Total queries')\nquery_duration = Histogram('sqlatte_query_duration_seconds', 'Query duration')\n\n@query_duration.time()\ndef execute_query(sql):\n    query_counter.inc()\n    # Execute...\n</code></pre>"},{"location":"architecture/overview/#summary","title":"Summary","text":"<p>SQLatte's architecture is designed for:</p> <ol> <li>Modularity - Each component has a single responsibility</li> <li>Extensibility - Plugin system for custom features</li> <li>Flexibility - Provider abstraction for databases and LLMs</li> <li>Scalability - Thread-safe design, connection pooling</li> <li>Simplicity - Optional features, graceful degradation</li> </ol> <p>Core Components: - FastAPI (API layer) - Conversation Manager (context memory) - Session Manager (multi-tenancy) - Provider Factory (abstraction) - Scheduler Manager (automation) - Plugin System (extensibility)</p> <p>Next Steps: - Review Design Principles for architectural decisions - Check Configuration Reference for setup details</p> <p>Questions? Open an issue on GitHub.</p>"},{"location":"architecture/principles/","title":"Design Principles","text":"<p>SQLatte is built on a foundation of optional complexity - start simple, add features when needed. This philosophy permeates every architectural decision, from the plugin system to the configuration management.</p>"},{"location":"architecture/principles/#core-design-principles","title":"Core Design Principles","text":""},{"location":"architecture/principles/#1-widget-first-architecture","title":"1. Widget-First Architecture","text":"<p>Philosophy: SQLatte is designed to be embeddable anywhere, not just a standalone application.</p> <p>Key Decisions: - Two Widget Modes:   - Standard Widget - Config-based auth, shared database connection   - Auth Widget - Per-user credentials, session isolation - Single-File Components - All HTML/CSS/JS in one file for easy embedding - CORS-Ready - Cross-domain support built-in - Zero Dependencies - Pure JavaScript, no framework lock-in</p> <p>Benefits: <pre><code>&lt;!-- Embed in any site with 2 lines --&gt;\n&lt;script src=\"https://your-server/static/js/sqlatte-badge.js\"&gt;&lt;/script&gt;\n&lt;script&gt;SQLatteWidget.configure({apiBase: 'https://your-server'});&lt;/script&gt;\n</code></pre></p> <p>Design Trade-offs: - \u2705 Pro: Extremely easy to integrate anywhere - \u2705 Pro: No build process for users - \u26a0\ufe0f Con: Larger initial JavaScript bundle - \u26a0\ufe0f Con: Limited to vanilla JS patterns</p>"},{"location":"architecture/principles/#2-optional-complexity","title":"2. Optional Complexity","text":"<p>Philosophy: Every feature beyond basic NL-to-SQL is optional and can be disabled.</p> <p>Progressive Feature Adoption: <pre><code># Phase 1: Basic (Day 1)\ndatabase: {...}\nllm: {...}\n\n# Phase 2: Add Analytics (Week 1)\nanalytics:\n  enabled: true\n\n# Phase 3: Add Sessions (Month 1)\nplugins:\n  auth:\n    enabled: true\n\n# Phase 4: Add Scheduling (Month 2)\nscheduler:\n  enabled: true\nemail:\n  enabled: true\n</code></pre></p> <p>Benefits: - \u2705 Quick onboarding (5 minutes to first query) - \u2705 Scale complexity with needs - \u2705 Lower resource usage when features disabled - \u2705 Easier debugging (fewer moving parts)</p> <p>Implementation: - Features check <code>enabled</code> flag at runtime - Graceful degradation (e.g., email defaults to mock mode) - No startup errors when optional features disabled</p>"},{"location":"architecture/principles/#3-conversational-data-analytics","title":"3. Conversational Data Analytics","text":"<p>Philosophy: Data exploration should feel like a conversation, not writing code.</p> <p>Conversation Memory System: <pre><code># Session-Based Memory\nUser: \"Show me top customers\"\n  \u2193 [Stores in session]\nAssistant: [Returns SQL + Results]\n  \u2193 [Stores in session]\nUser: \"What about last month?\"\n  \u2193 [Uses context from session]\nAssistant: [Understands \"last month\" refers to customers]\n</code></pre></p> <p>Architecture: <pre><code>ConversationManager (In-Memory)\n  \u251c\u2500\u2500 Session 1 (User A)\n  \u2502   \u251c\u2500\u2500 Message 1: \"Show top products\"\n  \u2502   \u251c\u2500\u2500 Message 2: [SQL Result]\n  \u2502   \u251c\u2500\u2500 Message 3: \"What about revenue?\"\n  \u2502   \u2514\u2500\u2500 Message 4: [SQL Result with context]\n  \u2514\u2500\u2500 Session 2 (User B)\n      \u2514\u2500\u2500 Independent conversation\n</code></pre></p> <p>Key Components: - <code>ConversationSession</code> - Single conversation thread - <code>ConversationMessage</code> - Individual message (user/assistant) - <code>ConversationManager</code> - Manages multiple sessions - Session Timeout: Configurable (default 60 min) - Context Window: Last 10 messages sent to LLM</p> <p>Benefits: - \u2705 Natural follow-up questions - \u2705 Context-aware query refinement - \u2705 Reduced user effort (no repeated details) - \u26a0\ufe0f Limitation: In-memory only (resets on restart)</p>"},{"location":"architecture/principles/#4-plugin-based-extensibility","title":"4. Plugin-Based Extensibility","text":"<p>Philosophy: Core should be minimal, extensions should be modular.</p> <p>Plugin Architecture: <pre><code>BasePlugin (Abstract)\n    \u251c\u2500\u2500 initialize(app)       # Called on startup\n    \u251c\u2500\u2500 register_routes(app)  # Add custom endpoints\n    \u251c\u2500\u2500 before_request()      # Request middleware\n    \u251c\u2500\u2500 after_request()       # Response middleware\n    \u2514\u2500\u2500 shutdown()            # Cleanup\n\nAuthPlugin (Implementation)\n    \u251c\u2500\u2500 /auth/login           # Custom endpoint\n    \u251c\u2500\u2500 /auth/query           # Override default query\n    \u251c\u2500\u2500 SessionManager        # Per-user sessions\n    \u2514\u2500\u2500 ThreadPoolExecutor    # Concurrent user isolation\n</code></pre></p> <p>Plugin System Benefits: - \u2705 Isolation: Plugins don't interfere with core - \u2705 Hot-Swappable: Enable/disable without code changes - \u2705 Backward Compatible: Standard widget works without plugins - \u2705 Extensible: Add Slack plugin, webhooks, custom auth</p> <p>Plugin Examples:</p> <p>Auth Plugin: <pre><code>plugins:\n  auth:\n    enabled: true\n    session_ttl_minutes: 480\n    max_workers: 40\n</code></pre> Adds: Multi-tenant auth, per-user DB connections</p> <p>Custom Integration Plugin: <pre><code>class SlackPlugin(BasePlugin):\n    def register_routes(self, app):\n        @app.post(\"/slack/query\")\n        async def slack_query(payload):\n            # Handle Slack slash command\n            return {\"text\": \"Results...\"}\n</code></pre> Adds: Slack integration for team queries</p>"},{"location":"architecture/principles/#5-database-provider-abstraction","title":"5. Database Provider Abstraction","text":"<p>Philosophy: Support multiple databases through a unified interface.</p> <p>Provider Pattern: <pre><code>DatabaseProvider (Abstract)\n    \u251c\u2500\u2500 execute_query(sql) \u2192 (columns, data)\n    \u251c\u2500\u2500 get_tables() \u2192 List[str]\n    \u2514\u2500\u2500 get_table_schema(table) \u2192 str\n\nTrinoProvider (Implementation)\n    \u2514\u2500\u2500 Uses trino-python-client\n\nPostgreSQLProvider (Implementation)\n    \u2514\u2500\u2500 Uses psycopg2\n\nMySQLProvider (Implementation)\n    \u2514\u2500\u2500 Uses mysql-connector-python\n\nBigQueryProvider (Implementation)\n    \u2514\u2500\u2500 Uses google-cloud-bigquery\n</code></pre></p> <p>Factory Pattern: <pre><code>ProviderFactory.create_db_provider(config)\n  \u2193\n  Reads config['database']['provider']\n  \u2193\n  Returns: TrinoProvider | PostgreSQLProvider | MySQLProvider | BigQueryProvider\n</code></pre></p> <p>Benefits: - \u2705 Uniform API: Same interface for all databases - \u2705 Easy Migration: Switch providers via config - \u2705 Database-Specific Optimizations: Each provider can optimize queries - \u2705 Extensible: Add new providers without touching core</p> <p>Design Considerations: - SQL syntax differences handled by prompts (database-specific rules) - Connection pooling per provider - Graceful error handling (DB-specific error messages)</p>"},{"location":"architecture/principles/#6-llm-provider-abstraction","title":"6. LLM Provider Abstraction","text":"<p>Philosophy: Not locked to a single AI provider.</p> <p>Provider Pattern: <pre><code>LLMProvider (Abstract)\n    \u251c\u2500\u2500 determine_intent(question, schema) \u2192 dict\n    \u251c\u2500\u2500 generate_sql(question, schema) \u2192 (sql, explanation)\n    \u251c\u2500\u2500 generate_chat_response(question) \u2192 str\n    \u2514\u2500\u2500 generate_insights(results) \u2192 List[Insight]\n\nAnthropicProvider (Implementation)\n    \u2514\u2500\u2500 Uses anthropic SDK\n\nGeminiProvider (Implementation)\n    \u2514\u2500\u2500 Uses google-generativeai\n\nVertexAIProvider (Implementation)\n    \u2514\u2500\u2500 Uses google-cloud-aiplatform\n</code></pre></p> <p>Benefits: - \u2705 Flexibility: Choose best LLM for your use case - \u2705 Cost Optimization: Switch to cheaper provider for simple queries - \u2705 A/B Testing: Test prompt quality across providers - \u2705 Fallback: If one provider has issues, switch to another</p>"},{"location":"architecture/principles/#7-configuration-management","title":"7. Configuration Management","text":"<p>Philosophy: Single source of truth, multiple override mechanisms.</p> <p>Configuration Hierarchy: <pre><code>1. config.yaml (Base configuration)\n    \u2193\n2. Environment Variables (Override specific values)\n    \u2193\n3. Runtime Overrides (Admin panel changes)\n    \u2193\n4. Database Persistence (Saved overrides)\n</code></pre></p> <p>Hot Reload Architecture: <pre><code>ConfigManager\n    \u251c\u2500\u2500 config.yaml (loaded on startup)\n    \u251c\u2500\u2500 runtime_overrides (in-memory dict)\n    \u251c\u2500\u2500 ConfigDB (optional persistent storage)\n    \u2514\u2500\u2500 reload() \u2192 Merge config + overrides\n</code></pre></p> <p>Benefits: - \u2705 Environment-Specific: Dev/staging/prod via env vars - \u2705 Hot Reload: Change LLM params without restart - \u2705 Audit Trail: Track all config changes - \u2705 Rollback: Snapshots for config recovery</p> <p>Key Features: - Prompts Management: Edit AI prompts via admin UI - Provider Switching: Change LLM/DB without restart (where possible) - Secrets Management: Support for <code>${ENV_VAR}</code> syntax - Validation: Schema validation on load</p>"},{"location":"architecture/principles/#8-scheduled-execution-system","title":"8. Scheduled Execution System","text":"<p>Philosophy: Automation should be simple, not enterprise-complex.</p> <p>Architecture: <pre><code>APScheduler (Background Jobs)\n    \u251c\u2500\u2500 Cron Expressions (flexible scheduling)\n    \u251c\u2500\u2500 Job Queue (in-memory or Redis)\n    \u2514\u2500\u2500 Execution Logs (PostgreSQL or in-memory)\n\nEmail Service\n    \u251c\u2500\u2500 SMTP Client (sendgrid, gmail, etc.)\n    \u251c\u2500\u2500 Template Engine (HTML reports)\n    \u251c\u2500\u2500 Attachment Builder (CSV, Excel, HTML)\n    \u2514\u2500\u2500 Mock Mode (when SMTP disabled)\n\nScheduleManager\n    \u251c\u2500\u2500 create_schedule()\n    \u251c\u2500\u2500 execute_schedule()\n    \u2514\u2500\u2500 get_execution_history()\n</code></pre></p> <p>Graceful Degradation: <pre><code>if email.enabled:\n    send_actual_email()\nelse:\n    # Mock mode - logs but doesn't send\n    logger.info(f\" Mock: Would send to {recipients}\")\n</code></pre></p> <p>Benefits: - \u2705 Flexible Scheduling: Cron syntax (daily, weekly, monthly) - \u2705 Email Delivery: Automated report distribution - \u2705 Execution History: Track success/failure - \u2705 Works Without Email: Scheduler runs, logs results</p>"},{"location":"architecture/principles/#9-analytics-insights","title":"9. Analytics &amp; Insights","text":"<p>Philosophy: Make data analysis accessible, not just query execution.</p> <p>Two-Tier Analytics:</p> <p>Tier 1: Query Analytics (Optional) <pre><code>PostgreSQL Storage (or In-Memory)\n    \u251c\u2500\u2500 query_history table\n    \u251c\u2500\u2500 execution_logs table\n    \u2514\u2500\u2500 insights_cache table\n</code></pre></p> <p>Tier 2: Insights Engine <pre><code>Hybrid Mode (Recommended)\n    \u251c\u2500\u2500 LLM Insights (pattern detection, recommendations)\n    \u2514\u2500\u2500 Statistical Analysis (trends, anomalies)\n</code></pre></p> <p>Insights Generation Flow: <pre><code>Query Results\n    \u2193\n[Statistical Analysis]\n    \u251c\u2500\u2500 Detect trends (growth/decline)\n    \u251c\u2500\u2500 Find anomalies (outliers)\n    \u2514\u2500\u2500 Calculate metrics (avg, median, etc.)\n    \u2193\n[LLM Analysis]\n    \u251c\u2500\u2500 Context: User question + SQL + Results\n    \u251c\u2500\u2500 Generate: Actionable insights\n    \u2514\u2500\u2500 Format: TYPE | SEVERITY | MESSAGE\n    \u2193\n[Merge &amp; Return]\n    \u2514\u2500\u2500 Best insights from both approaches\n</code></pre></p> <p>Benefits: - \u2705 Hybrid Approach: LLM creativity + statistical accuracy - \u2705 Context-Aware: Considers temporal patterns - \u2705 Actionable: Recommendations, not just observations - \u2705 Optional: Can disable entirely for lightweight deployment</p>"},{"location":"architecture/principles/#10-security-multi-tenancy","title":"10. Security &amp; Multi-Tenancy","text":"<p>Philosophy: Secure by design, with layers of isolation.</p> <p>Standard Widget (Single-Tenant): <pre><code>User \u2192 Backend Config \u2192 Shared DB Connection\n    \u251c\u2500\u2500 No user credentials stored\n    \u251c\u2500\u2500 Backend controls all access\n    \u2514\u2500\u2500 Suitable for internal tools\n</code></pre></p> <p>Auth Widget (Multi-Tenant): <pre><code>User A \u2192 Login \u2192 Session A \u2192 DB Config A \u2192 Isolated Connection\nUser B \u2192 Login \u2192 Session B \u2192 DB Config B \u2192 Isolated Connection\n\nSessionManager (Thread-Safe)\n    \u251c\u2500\u2500 Per-user sessions\n    \u251c\u2500\u2500 Credential encryption\n    \u251c\u2500\u2500 Session timeouts\n    \u2514\u2500\u2500 Automatic cleanup\n</code></pre></p> <p>Security Layers:</p> <ol> <li> <p>Session Isolation: <pre><code>   class SessionManager:\n       sessions: Dict[str, AuthSession]  # session_id \u2192 session\n       lock = threading.RLock()  # Thread-safe access\n</code></pre></p> </li> <li> <p>Credential Isolation: <pre><code>   # User credentials never stored in logs\n   db_config = {\n       'user': session.username,\n       'password': '***REDACTED***'  # Masked in logs\n   }\n</code></pre></p> </li> <li> <p>Connection Pooling: <pre><code>   ThreadPoolExecutor(max_workers=40)\n       \u2514\u2500\u2500 Isolated query execution per user\n</code></pre></p> </li> </ol> <p>Benefits: - \u2705 Session-Based Auth: JWT-free, simple - \u2705 Per-User Connections: Complete data isolation - \u2705 Thread-Safe: Concurrent users don't interfere - \u2705 Automatic Cleanup: Expired sessions removed</p>"},{"location":"architecture/principles/#design-trade-offs","title":"Design Trade-offs","text":""},{"location":"architecture/principles/#1-in-memory-vs-persistent-conversations","title":"1. In-Memory vs Persistent Conversations","text":"<p>Current: In-memory (simple, fast) <pre><code>ConversationManager.sessions = {}  # RAM\n</code></pre></p> <p>Trade-off: - \u2705 Pro: Fast, no DB overhead - \u26a0\ufe0f Con: Lost on restart - \u26a0\ufe0f Con: Not shared across instances</p> <p>Future: Optional PostgreSQL backend</p>"},{"location":"architecture/principles/#2-apscheduler-vs-celery","title":"2. APScheduler vs Celery","text":"<p>Current: APScheduler (simpler)</p> <p>Trade-off: - \u2705 Pro: Zero dependencies, built-in - \u2705 Pro: Works without Redis - \u26a0\ufe0f Con: Limited to single instance - \u26a0\ufe0f Con: No distributed task queue</p>"},{"location":"architecture/principles/#3-vanilla-js-vs-react","title":"3. Vanilla JS vs React","text":"<p>Current: Vanilla JavaScript</p> <p>Trade-off: - \u2705 Pro: No build step for users - \u2705 Pro: Smaller bundle (no framework) - \u26a0\ufe0f Con: More verbose code - \u26a0\ufe0f Con: No component state management</p>"},{"location":"architecture/principles/#extension-points","title":"Extension Points","text":""},{"location":"architecture/principles/#1-custom-plugins","title":"1. Custom Plugins","text":"<pre><code>from src.plugins.base_plugin import BasePlugin\n\nclass CustomPlugin(BasePlugin):\n    def register_routes(self, app):\n        @app.get(\"/custom\")\n        async def custom_route():\n            return {\"message\": \"Custom feature\"}\n</code></pre>"},{"location":"architecture/principles/#2-custom-database-providers","title":"2. Custom Database Providers","text":"<pre><code>from src.core.db_provider import DatabaseProvider\n\nclass CustomDBProvider(DatabaseProvider):\n    def execute_query(self, sql):\n        # Custom DB logic\n        pass\n</code></pre>"},{"location":"architecture/principles/#3-custom-llm-providers","title":"3. Custom LLM Providers","text":"<pre><code>from src.core.llm_provider import LLMProvider\n\nclass CustomLLMProvider(LLMProvider):\n    def generate_sql(self, question, schema):\n        # Custom LLM logic\n        pass\n</code></pre>"},{"location":"architecture/principles/#future-architecture-enhancements","title":"Future Architecture Enhancements","text":""},{"location":"architecture/principles/#planned-features","title":"Planned Features","text":"<ol> <li> <p>Distributed Sessions</p> </li> <li> <p>Redis-backed conversation storage</p> </li> <li> <p>Shared sessions across instances</p> </li> <li> <p>Advanced Caching</p> </li> <li> <p>Query result caching (Redis)</p> </li> <li>Semantic similarity matching</li> <li> <p>Deduplicate identical queries</p> </li> <li> <p>Webhooks &amp; Integrations</p> </li> <li> <p>Slack plugin</p> </li> <li>MS Teams plugin</li> <li> <p>Custom webhook endpoints</p> </li> <li> <p>Advanced Auth</p> </li> <li> <p>OAuth2 support</p> </li> <li>SAML integration</li> <li> <p>RBAC (Role-Based Access Control)</p> </li> <li> <p>Query Optimization</p> </li> <li> <p>Query plan analysis</p> </li> <li>Automatic index suggestions</li> <li>Partition recommendation engine</li> </ol>"},{"location":"architecture/principles/#summary","title":"Summary","text":"<p>SQLatte's architecture prioritizes:</p> <ol> <li>\u2705 Simplicity - Get started in 5 minutes</li> <li>\u2705 Flexibility - Choose your database, LLM, features</li> <li>\u2705 Extensibility - Plugin system for custom needs</li> <li>\u2705 Conversation-First - Memory and context awareness</li> <li>\u2705 Optional Complexity - Add features when needed</li> </ol> <p>Core Philosophy: Make data analytics conversational, embeddable, and progressively complex.</p> <p>Next: System Overview for component-level architecture details.</p>"},{"location":"configuration/analytics/","title":"Analytics Setup","text":"<p>Track query history, performance metrics, and usage patterns.</p>"},{"location":"configuration/analytics/#quick-start","title":"Quick Start","text":""},{"location":"configuration/analytics/#option-1-in-memory-default","title":"Option 1: In-Memory (Default)","text":"<p>No setup needed - analytics work out of the box:</p> <pre><code>analytics:\n  enabled: true\n  storage: \"memory\"              # Default\n</code></pre> <p>Pros: Zero configuration, fast Cons: Data lost on restart, not shared across instances</p>"},{"location":"configuration/analytics/#option-2-postgresql-recommended-for-production","title":"Option 2: PostgreSQL (Recommended for Production)","text":"<p>Persistent storage with full analytics:</p> <pre><code>analytics:\n  enabled: true\n  storage: \"postgresql\"\n\n  postgresql:\n    host: \"localhost\"\n    port: 5432\n    database: \"sqlatte_analytics\"\n    user: \"sqlatte\"\n    password: \"analytics_password\"\n\n  query_history_days: 90         # Retention period\n  execution_logs_days: 30\n</code></pre> <p>Pros: Persistent, shared across instances, full history Cons: Requires PostgreSQL database</p>"},{"location":"configuration/analytics/#postgresql-setup","title":"PostgreSQL Setup","text":""},{"location":"configuration/analytics/#1-create-database","title":"1. Create Database","text":"<pre><code># Connect to PostgreSQL\npsql -U postgres\n\n# Create database and user\nCREATE DATABASE sqlatte_analytics;\nCREATE USER sqlatte WITH PASSWORD 'analytics_password';\nGRANT ALL PRIVILEGES ON DATABASE sqlatte_analytics TO sqlatte;\n</code></pre>"},{"location":"configuration/analytics/#2-update-config","title":"2. Update Config","text":"<pre><code>analytics:\n  enabled: true\n  storage: \"postgresql\"\n  postgresql:\n    host: \"localhost\"\n    port: 5432\n    database: \"sqlatte_analytics\"\n    user: \"sqlatte\"\n    password: \"analytics_password\"\n</code></pre>"},{"location":"configuration/analytics/#3-start-sqlatte","title":"3. Start SQLatte","text":"<p>Tables are created automatically on first run:</p> <pre><code>python run.py\n\n# Tables created:\n# - query_history\n# - execution_logs\n# - insights_cache\n# - runtime_overrides (for config management)\n</code></pre>"},{"location":"configuration/analytics/#what-gets-tracked","title":"What Gets Tracked","text":""},{"location":"configuration/analytics/#query-history","title":"Query History","text":"<ul> <li>User questions</li> <li>Generated SQL</li> <li>Execution time</li> <li>Row count</li> <li>Success/failure</li> <li>Timestamps</li> </ul>"},{"location":"configuration/analytics/#execution-logs","title":"Execution Logs","text":"<ul> <li>Scheduled query runs</li> <li>Email delivery status</li> <li>Error messages</li> <li>Performance metrics</li> </ul>"},{"location":"configuration/analytics/#insights-cache","title":"Insights Cache","text":"<ul> <li>AI-generated insights</li> <li>Statistical analysis</li> <li>Trend detection</li> </ul>"},{"location":"configuration/analytics/#analytics-dashboard","title":"Analytics Dashboard","text":"<p>Access analytics at: <code>http://localhost:8000/analytics</code></p> <p>Metrics: - Total queries executed - Average execution time - Success rate - Most queried tables - Top users (if auth enabled) - Query trends over time</p> <p>Charts: - Queries per day/hour - Execution time distribution - Success vs failure ratio - Table usage heatmap</p>"},{"location":"configuration/analytics/#configuration-options","title":"Configuration Options","text":"<pre><code>analytics:\n  enabled: true\n  storage: \"postgresql\"        # or \"memory\"\n\n  # Retention policies\n  query_history_days: 90       # Keep query logs for 90 days\n  execution_logs_days: 30      # Keep execution logs for 30 days\n\n  # Performance\n  batch_size: 100              # Batch insert size\n  flush_interval_seconds: 60   # How often to flush to DB\n</code></pre>"},{"location":"configuration/analytics/#insights-engine","title":"Insights Engine","text":"<p>Enable AI-powered insights:</p> <pre><code>insights:\n  enabled: true\n  mode: \"hybrid\"               # llm_only, statistical_only, hybrid\n  max_insights: 3              # Per query\n  include_statistical: true    # Fallback to statistical\n</code></pre> <p>Modes:</p> Mode Description Use Case <code>llm_only</code> Pure AI insights Best quality, higher cost <code>statistical_only</code> Rule-based Fast, no LLM cost <code>hybrid</code> Best of both Recommended (balanced)"},{"location":"configuration/analytics/#querying-analytics","title":"Querying Analytics","text":""},{"location":"configuration/analytics/#via-api","title":"Via API","text":"<pre><code># Get query history\ncurl http://localhost:8000/analytics/history?limit=10\n\n# Get performance metrics\ncurl http://localhost:8000/analytics/metrics\n\n# Get top queries\ncurl http://localhost:8000/analytics/top-queries\n</code></pre>"},{"location":"configuration/analytics/#via-database-postgresql","title":"Via Database (PostgreSQL)","text":"<pre><code>-- Most frequent queries\nSELECT question, COUNT(*) as count\nFROM query_history\nWHERE created_at &gt; NOW() - INTERVAL '7 days'\nGROUP BY question\nORDER BY count DESC\nLIMIT 10;\n\n-- Average execution time by table\nSELECT \n  tables,\n  AVG(execution_time_ms) as avg_time,\n  COUNT(*) as query_count\nFROM query_history\nWHERE success = true\nGROUP BY tables\nORDER BY avg_time DESC;\n\n-- Daily query volume\nSELECT \n  DATE(created_at) as date,\n  COUNT(*) as queries\nFROM query_history\nGROUP BY DATE(created_at)\nORDER BY date DESC\nLIMIT 30;\n</code></pre>"},{"location":"configuration/analytics/#data-retention","title":"Data Retention","text":"<p>Automatic cleanup keeps database size manageable:</p> <pre><code>analytics:\n  query_history_days: 90       # Delete older than 90 days\n  execution_logs_days: 30      # Delete older than 30 days\n</code></pre> <p>Manual cleanup: <pre><code>-- Delete old query history\nDELETE FROM query_history \nWHERE created_at &lt; NOW() - INTERVAL '90 days';\n\n-- Delete old execution logs\nDELETE FROM execution_logs \nWHERE created_at &lt; NOW() - INTERVAL '30 days';\n</code></pre></p>"},{"location":"configuration/analytics/#privacy-compliance","title":"Privacy &amp; Compliance","text":""},{"location":"configuration/analytics/#anonymization","title":"Anonymization","text":"<p>Anonymize user data:</p> <pre><code>analytics:\n  anonymize_users: true        # Hash user IDs\n  anonymize_queries: false     # Keep queries readable\n</code></pre>"},{"location":"configuration/analytics/#disable-analytics","title":"Disable Analytics","text":"<p>Completely disable analytics:</p> <pre><code>analytics:\n  enabled: false               # No tracking\n</code></pre>"},{"location":"configuration/analytics/#gdpr-compliance","title":"GDPR Compliance","text":"<p>Delete specific user data:</p> <pre><code>-- Delete all data for a user\nDELETE FROM query_history WHERE user_id = 'user123';\nDELETE FROM execution_logs WHERE user_id = 'user123';\n</code></pre>"},{"location":"configuration/analytics/#performance-impact","title":"Performance Impact","text":""},{"location":"configuration/analytics/#memory-mode","title":"Memory Mode","text":"<ul> <li>CPU: Minimal (&lt;1%)</li> <li>Memory: ~10MB per 1000 queries</li> <li>Disk: None</li> </ul>"},{"location":"configuration/analytics/#postgresql-mode","title":"PostgreSQL Mode","text":"<ul> <li>CPU: Minimal (&lt;2%)</li> <li>Network: ~1KB per query logged</li> <li>DB Storage: ~100MB per 10,000 queries</li> </ul>"},{"location":"configuration/analytics/#monitoring-analytics-db","title":"Monitoring Analytics DB","text":""},{"location":"configuration/analytics/#check-database-size","title":"Check Database Size","text":"<pre><code>-- Total size\nSELECT pg_size_pretty(pg_database_size('sqlatte_analytics'));\n\n-- Table sizes\nSELECT \n  tablename,\n  pg_size_pretty(pg_total_relation_size(tablename::regclass)) as size\nFROM pg_tables\nWHERE schemaname = 'public'\nORDER BY pg_total_relation_size(tablename::regclass) DESC;\n</code></pre>"},{"location":"configuration/analytics/#check-query-count","title":"Check Query Count","text":"<pre><code>-- Total queries logged\nSELECT COUNT(*) FROM query_history;\n\n-- Queries today\nSELECT COUNT(*) FROM query_history \nWHERE created_at &gt; CURRENT_DATE;\n</code></pre>"},{"location":"configuration/analytics/#troubleshooting","title":"Troubleshooting","text":""},{"location":"configuration/analytics/#analytics-not-working","title":"Analytics Not Working","text":"<pre><code># Check config\nanalytics:\n  enabled: true  # Must be true\n\n# Check database connection\npsql -U sqlatte -d sqlatte_analytics -h localhost\n\n# Check logs\ntail -f logs/sqlatte.log | grep analytics\n</code></pre>"},{"location":"configuration/analytics/#database-connection-failed","title":"Database Connection Failed","text":"<pre><code># Verify credentials\n# Check PostgreSQL is running\n# Check firewall rules\n# Test connection manually\n</code></pre>"},{"location":"configuration/analytics/#slow-dashboard","title":"Slow Dashboard","text":"<pre><code># Add indexes\nCREATE INDEX idx_query_history_created ON query_history(created_at);\nCREATE INDEX idx_query_history_user ON query_history(user_id);\n\n# Reduce retention\nanalytics:\n  query_history_days: 30  # Instead of 90\n</code></pre>"},{"location":"configuration/analytics/#best-practices","title":"Best Practices","text":""},{"location":"configuration/analytics/#for-development","title":"For Development","text":"<ul> <li>\u2705 Use in-memory mode</li> <li>\u2705 Disable insights to save LLM costs</li> <li>\u2705 Short retention (7 days)</li> </ul>"},{"location":"configuration/analytics/#for-production","title":"For Production","text":"<ul> <li>\u2705 Use PostgreSQL storage</li> <li>\u2705 Enable insights (hybrid mode)</li> <li>\u2705 Set appropriate retention (30-90 days)</li> <li>\u2705 Monitor database size</li> <li>\u2705 Create indexes for performance</li> </ul>"},{"location":"configuration/analytics/#for-compliance","title":"For Compliance","text":"<ul> <li>\u2705 Enable anonymization</li> <li>\u2705 Document data retention policy</li> <li>\u2705 Provide user data deletion capability</li> <li>\u2705 Encrypt database at rest</li> </ul> <p>Next: Email Settings | Full Config Reference</p>"},{"location":"configuration/config-yaml/","title":"Complete config.yaml Reference","text":"<p>This page provides a comprehensive reference for all configuration options in SQLatte's <code>config.yaml</code> file.</p> <p>Quick Start</p> <p>Looking for a minimal configuration? Jump to Minimal Configuration section.</p>"},{"location":"configuration/config-yaml/#file-location","title":"File Location","text":"<p>SQLatte looks for the configuration file in these locations (in order):</p> <ol> <li>Path specified via <code>--config</code> argument: <code>python run.py --config /path/to/config.yaml</code></li> <li>Environment variable: <code>export SQLATTE_CONFIG=/path/to/config.yaml</code></li> <li>Default location: <code>config/config.yaml</code></li> </ol>"},{"location":"configuration/config-yaml/#complete-configuration-template","title":"Complete Configuration Template","text":"<p>Here's the complete <code>config.yaml</code> structure with all available options:</p> <pre><code># ============================================\n# APPLICATION SETTINGS\n# ============================================\napp:\n  name: \"SQLatte\"\n  version: \"1.0.0\"\n  host: \"0.0.0.0\"              # Listen address (0.0.0.0 = all interfaces)\n  port: 8000                   # Port number\n  debug: false                 # Debug mode (set true for development only)\n  log_level: \"INFO\"            # Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL\n\n# ============================================\n# CORS SETTINGS\n# ============================================\ncors:\n  allow_origins:\n    - \"*\"                      # Allowed origins (* = all, restrict in production!)\n    # - \"https://yourdomain.com\"\n    # - \"http://localhost:3000\"\n  allow_credentials: true      # Allow cookies/auth headers\n  allow_methods: [\"*\"]         # HTTP methods (* = all)\n  allow_headers: [\"*\"]         # HTTP headers (* = all)\n\n# ============================================\n# DATABASE CONFIGURATION\n# ============================================\n# Choose ONE provider: trino, postgresql, mysql, or bigquery\ndatabase:\n  provider: \"postgresql\"       # Options: trino, postgresql, mysql, bigquery\n\n  # PostgreSQL Configuration\n  postgresql:\n    host: \"localhost\"\n    port: 5432\n    database: \"your_database\"\n    user: \"your_user\"\n    password: \"your_password\"\n    schema: \"public\"           # Default schema\n    pool_size: 5               # Connection pool size\n    max_overflow: 10           # Max connections beyond pool_size\n\n  # Trino Configuration\n  trino:\n    host: \"trino.company.com\"\n    port: 443\n    user: \"your_user\"\n    password: \"your_password\"  # Optional, depending on auth\n    catalog: \"hive\"            # Trino catalog\n    schema: \"default\"          # Trino schema\n    http_scheme: \"https\"       # http or https\n    verify_ssl: true           # SSL verification\n\n  # MySQL Configuration\n  mysql:\n    host: \"localhost\"\n    port: 3306\n    database: \"your_database\"\n    user: \"your_user\"\n    password: \"your_password\"\n    charset: \"utf8mb4\"\n\n  # BigQuery Configuration\n  bigquery:\n    project_id: \"your-gcp-project\"\n    dataset: \"your_dataset\"\n    credentials_path: \"/path/to/service-account.json\"\n    location: \"US\"             # Data location (US, EU, etc.)\n\n# ============================================\n# LLM PROVIDER CONFIGURATION\n# ============================================\n# Choose ONE provider: anthropic, gemini, or vertex\nllm:\n  provider: \"anthropic\"        # Options: anthropic, gemini, vertex\n\n  # Anthropic Claude Configuration\n  anthropic:\n    api_key: \"sk-ant-xxxxx\"\n    model: \"claude-sonnet-4-20250514\"  # Recommended model\n    max_tokens: 4096\n    temperature: 0.0           # 0.0 = deterministic, 1.0 = creative\n    timeout: 60                # Request timeout in seconds\n\n  # Google Gemini Configuration\n  gemini:\n    api_key: \"your-gemini-api-key\"\n    model: \"gemini-2.0-flash-exp\"\n    max_tokens: 4096\n    temperature: 0.0\n\n  # Google Vertex AI Configuration\n  vertex:\n    project_id: \"your-gcp-project\"\n    location: \"us-central1\"\n    model: \"gemini-2.0-flash-exp\"\n    credentials_path: \"/path/to/service-account.json\"\n    max_tokens: 4096\n    temperature: 0.0\n\n# ============================================\n# SCHEDULED QUERIES &amp; EMAIL REPORTS\n# ============================================\nscheduler:\n  enabled: false               # Enable scheduled queries feature\n  timezone: \"UTC\"              # Default timezone for schedules\n  max_concurrent_jobs: 10      # Max jobs running simultaneously\n  job_timeout_seconds: 300     # Timeout for each job execution\n\n  # Execution History\n  keep_history_days: 30        # How long to keep execution logs\n  max_executions_per_schedule: 100  # Max execution logs per schedule\n\n# Email Configuration\nemail:\n  enabled: false               # Set to true to enable email reports\n  provider: \"smtp\"             # Currently only SMTP supported\n\n  smtp:\n    host: \"smtp.gmail.com\"\n    port: 587\n    user: \"your-email@gmail.com\"     # SMTP username\n    password: \"app-password\"         # SMTP password (use app password for Gmail)\n    from_email: \"noreply@company.com\"  # From email address\n    from_name: \"SQLatte Reports\"     # From name\n    use_tls: true                    # Use TLS encryption\n\n  # Email Templates\n  templates:\n    success_subject: \"\u2705 {{schedule_name}} - {{date}}\"\n    failure_subject: \"\u274c Failed: {{schedule_name}}\"\n\n  # Rate Limiting\n  max_emails_per_day: 1000     # Max emails per day\n  max_recipients_per_email: 10  # Max recipients per email\n\n# Export Configuration\nexport:\n  formats:\n    - csv\n    - excel\n    - html\n\n  max_rows: 1000               # Max rows to export (prevent huge files)\n  max_file_size_mb: 25         # Max attachment size\n\n  # File naming template\n  filename_template: \"{{schedule_name}}_{{date}}_{{time}}.{{format}}\"\n\n# ============================================\n# INSIGHTS ENGINE\n# ============================================\ninsights:\n  enabled: true                # Enable AI-powered insights\n  mode: \"hybrid\"               # Options: llm_only, statistical_only, hybrid\n  max_insights: 3              # Maximum insights per query\n  include_statistical: true    # Include statistical analysis\n\n# ============================================\n# ANALYTICS &amp; STORAGE\n# ============================================\n# Optional: Store query history, analytics, and configurations\nanalytics:\n  enabled: false               # Enable analytics tracking\n  storage: \"memory\"            # Options: memory, postgresql\n\n  # PostgreSQL storage (if storage=postgresql)\n  postgresql:\n    host: \"localhost\"\n    port: 5432\n    database: \"sqlatte_analytics\"\n    user: \"sqlatte\"\n    password: \"analytics_password\"\n\n  # Retention settings\n  query_history_days: 90       # Keep query history for 90 days\n  execution_logs_days: 30      # Keep execution logs for 30 days\n\n# ============================================\n# PLUGIN SYSTEM\n# ============================================\nplugins:\n  # Authentication Plugin (Multi-tenant mode)\n  auth:\n    enabled: false             # Enable multi-tenant authentication\n    session_ttl_minutes: 480   # Session timeout (8 hours)\n    max_workers: 40            # Thread pool size for concurrent users\n\n    # Server-side database configuration (for auth plugin)\n    db_provider: \"trino\"       # Database type\n    db_host: \"trino.company.com\"\n    db_port: 443\n\n    # Catalog/Schema restrictions (empty = allow all)\n    allowed_catalogs:\n      # - \"hive\"\n      # - \"iceberg\"\n    allowed_schemas:\n      # - \"default\"\n      # - \"production\"\n    allowed_db_types:\n      # - \"trino\"\n      # - \"postgresql\"\n\n# ============================================\n# PROMPTS CONFIGURATION\n# ============================================\n# These prompts control how SQLatte interacts with your data\n# You can customize them via Admin Panel or directly here\nprompts:\n  # Intent Detection: Determines if question needs SQL or is chat\n  intent_detection: |\n    Analyze this user question and determine if it requires a SQL query or is general conversation.\n\n    Available Tables Schema:\n    {schema_info}\n\n    User Question: {question}\n\n    Rules:\n    1. If question asks about data, analytics, or queries related to the available tables \u2192 intent: \"sql\"\n    2. If question is greeting, general chat, help, or unrelated to tables \u2192 intent: \"chat\"\n    3. If tables are not selected but question seems like SQL query \u2192 intent: \"chat\" (explain they need to select tables)\n\n    Respond in this exact format:\n    INTENT: sql or chat\n    CONFIDENCE: 0.0 to 1.0\n    REASONING: brief explanation\n\n  # Barista Personality: Chat response personality\n  barista_personality: |\n    You are SQLatte \u2615 - a friendly AI assistant that helps users query their databases with natural language.\n\n    Your personality:\n    - Helpful and friendly, like a barista serving the perfect drink\n    - Knowledgeable about SQL and databases\n    - Can have casual conversations too\n    - Use coffee/brewing metaphors occasionally when appropriate\n\n    When users ask general questions (not about data):\n    - Respond naturally and helpfully\n    - If they seem lost, guide them on how to use SQLatte\n    - Be concise but friendly\n\n  # SQL Generation: Natural language to SQL translation\n  sql_generation: |\n    You are a SQL expert. Generate a SQL query based on the user's question.\n\n    Table Schema(s):\n    {schema_info}\n\n    User Question: {question}\n\n    Rules:\n    1. Generate ONLY valid SQL syntax for the target database\n    2. If multiple tables are provided, use appropriate JOINs\n    3. Infer JOIN conditions from table relationships (common column names)\n    4. Use table aliases for readability (e.g., orders o, customers c)\n    5. Include LIMIT clause for safety (default 100 rows)\n    6. For aggregations, use GROUP BY appropriately\n    7. Use explicit JOIN syntax (INNER JOIN, LEFT JOIN, etc.)\n\n    \u26a1 PERFORMANCE OPTIMIZATION (CRITICAL):\n    8. **PARTITION COLUMN**: If schema contains a 'dt' column (VARCHAR format YYYYMMDD, e.g., '20251218'), this is a PARTITION KEY\n       - ALWAYS add WHERE clause with 'dt' filter when possible\n       - Date filters MUST use dt column in format: dt = '20251218' or dt BETWEEN '20251201' AND '20251218'\n       - For \"recent\", \"latest\", \"today\", \"last\" queries \u2192 use last 2 days\n       - For \"yesterday\" \u2192 use appropriate date\n       - For specific date range \u2192 convert to dt format\n       - \u26a0\ufe0f NEVER query without dt filter unless explicitly asked for \"all time\" data\n    9. If 'datetime' column exists alongside 'dt', use 'dt' for filtering (faster) and 'datetime' for display\n    10. Example optimized query: \n        SELECT * FROM orders WHERE dt &gt;= '20251201' AND status = 'completed' LIMIT 100\n\n    Format your response as:\n    SQL: [your SQL query here]\n    EXPLANATION: [brief explanation including JOIN strategy if applicable]\n\n  # Insights Generation: Analyze results and provide insights\n  insights_generation: |\n    Analyze query results and generate actionable insights.\n\n    Available Information:\n    - User Question: {user_question}\n    - SQL Query: {sql_query}\n    - Data Sample: {data_preview}\n    - Schema: {schema_info}\n\n    Generate 1-3 key insights that are:\n    1. Actionable and specific\n    2. Based on actual data patterns\n    3. Relevant to the user's question\n    4. Easy to understand\n\n    Identify patterns such as:\n    - Trends (increasing/decreasing over time)\n    - Anomalies (unexpected values, outliers)\n    - Recommendations (what action to take)\n    - Summaries (key takeaways)\n\n    Format each insight as:\n    TYPE: trend/anomaly/recommendation/summary\n    SEVERITY: low/medium/high\n    MESSAGE: &lt;concise, actionable insight&gt;\n</code></pre>"},{"location":"configuration/config-yaml/#minimal-configuration","title":"Minimal Configuration","text":"<p>The absolute minimum needed to run SQLatte:</p> <pre><code>database:\n  provider: postgresql\n  postgresql:\n    host: localhost\n    port: 5432\n    database: mydb\n    user: dbuser\n    password: dbpass\n\nllm:\n  provider: anthropic\n  anthropic:\n    api_key: sk-ant-xxxxx\n    model: claude-sonnet-4-20250514\n</code></pre> <p>This gives you basic natural language to SQL conversion without optional features.</p>"},{"location":"configuration/config-yaml/#configuration-by-section","title":"Configuration by Section","text":""},{"location":"configuration/config-yaml/#app-settings","title":"App Settings","text":"<p>Controls the FastAPI application server.</p> <pre><code>app:\n  name: \"SQLatte\"              # Application name (appears in UI)\n  version: \"1.0.0\"             # Version number\n  host: \"0.0.0.0\"              # Bind address\n  port: 8000                   # Server port\n  debug: false                 # Enable debug mode (dev only!)\n  log_level: \"INFO\"            # Logging verbosity\n</code></pre> <p>Host Options: - <code>0.0.0.0</code> - Listen on all network interfaces (production) - <code>127.0.0.1</code> - Listen only on localhost (development)</p> <p>Log Levels: - <code>DEBUG</code> - Verbose logging, includes SQL queries - <code>INFO</code> - Standard logging - <code>WARNING</code> - Warnings only - <code>ERROR</code> - Errors only - <code>CRITICAL</code> - Critical errors only</p>"},{"location":"configuration/config-yaml/#cors-settings","title":"CORS Settings","text":"<p>Cross-Origin Resource Sharing configuration for widget embedding.</p> <pre><code>cors:\n  allow_origins:\n    - \"*\"                      # Allow all origins (dev only!)\n    - \"https://myapp.com\"      # Specific domain\n  allow_credentials: true\n  allow_methods: [\"*\"]         # or [\"GET\", \"POST\"]\n  allow_headers: [\"*\"]\n</code></pre> <p>Production CORS</p> <p>Never use <code>\"*\"</code> for <code>allow_origins</code> in production! Specify exact domains.</p>"},{"location":"configuration/config-yaml/#database-providers","title":"Database Providers","text":"<p>SQLatte supports four database providers. Choose one by setting <code>database.provider</code>.</p>"},{"location":"configuration/config-yaml/#postgresql","title":"PostgreSQL","text":"<pre><code>database:\n  provider: \"postgresql\"\n  postgresql:\n    host: \"localhost\"\n    port: 5432\n    database: \"your_db\"\n    user: \"your_user\"\n    password: \"your_password\"\n    schema: \"public\"           # Default schema\n    pool_size: 5               # Connection pool\n    max_overflow: 10           # Additional connections\n</code></pre> <p>Connection String Alternative: <pre><code>database:\n  provider: \"postgresql\"\n  postgresql:\n    connection_string: \"postgresql://user:password@host:5432/database\"\n</code></pre></p>"},{"location":"configuration/config-yaml/#trino","title":"Trino","text":"<pre><code>database:\n  provider: \"trino\"\n  trino:\n    host: \"trino.company.com\"\n    port: 443\n    user: \"your_user\"\n    password: \"optional_password\"\n    catalog: \"hive\"            # Hive, Iceberg, Delta Lake, etc.\n    schema: \"default\"\n    http_scheme: \"https\"\n    verify_ssl: true\n</code></pre> <p>Trino-Specific Notes: - Catalogs represent different data sources (Hive, Iceberg, PostgreSQL connector, etc.) - Schema is the namespace within a catalog - HTTP scheme usually <code>https</code> in production</p>"},{"location":"configuration/config-yaml/#mysql","title":"MySQL","text":"<pre><code>database:\n  provider: \"mysql\"\n  mysql:\n    host: \"localhost\"\n    port: 3306\n    database: \"your_db\"\n    user: \"your_user\"\n    password: \"your_password\"\n    charset: \"utf8mb4\"         # UTF-8 support\n</code></pre>"},{"location":"configuration/config-yaml/#google-bigquery","title":"Google BigQuery","text":"<pre><code>database:\n  provider: \"bigquery\"\n  bigquery:\n    project_id: \"my-gcp-project\"\n    dataset: \"my_dataset\"\n    credentials_path: \"/path/to/service-account.json\"\n    location: \"US\"             # or \"EU\", \"asia-northeast1\", etc.\n</code></pre> <p>Service Account Setup: 1. Create service account in GCP Console 2. Grant <code>BigQuery Data Viewer</code> and <code>BigQuery Job User</code> roles 3. Download JSON key file 4. Set <code>credentials_path</code> to JSON file location</p>"},{"location":"configuration/config-yaml/#llm-providers","title":"LLM Providers","text":"<p>SQLatte supports three LLM providers. Choose one by setting <code>llm.provider</code>.</p>"},{"location":"configuration/config-yaml/#anthropic-claude-recommended","title":"Anthropic Claude (Recommended)","text":"<pre><code>llm:\n  provider: \"anthropic\"\n  anthropic:\n    api_key: \"sk-ant-xxxxx\"\n    model: \"claude-sonnet-4-20250514\"  # Most balanced\n    # model: \"claude-opus-4-20250514\"  # Most capable\n    # model: \"claude-haiku-4-20250316\" # Fastest/cheapest\n    max_tokens: 4096\n    temperature: 0.0           # Deterministic (recommended for SQL)\n    timeout: 60\n</code></pre> <p>Model Comparison: - Sonnet 4 - Best balance of speed/quality/cost (recommended) - Opus 4 - Highest quality, slower, more expensive - Haiku 4 - Fastest, cheapest, good for simple queries</p>"},{"location":"configuration/config-yaml/#google-gemini","title":"Google Gemini","text":"<pre><code>llm:\n  provider: \"gemini\"\n  gemini:\n    api_key: \"your-gemini-api-key\"\n    model: \"gemini-2.0-flash-exp\"\n    max_tokens: 4096\n    temperature: 0.0\n</code></pre> <p>Getting API Key: 1. Visit https://makersuite.google.com/app/apikey 2. Create new API key 3. Free tier available with rate limits</p>"},{"location":"configuration/config-yaml/#google-vertex-ai","title":"Google Vertex AI","text":"<pre><code>llm:\n  provider: \"vertex\"\n  vertex:\n    project_id: \"your-gcp-project\"\n    location: \"us-central1\"\n    model: \"gemini-2.0-flash-exp\"\n    credentials_path: \"/path/to/service-account.json\"\n    max_tokens: 4096\n    temperature: 0.0\n</code></pre>"},{"location":"configuration/config-yaml/#scheduler-email","title":"Scheduler &amp; Email","text":"<p>Enable automated query execution and email delivery.</p> <pre><code>scheduler:\n  enabled: true\n  timezone: \"America/New_York\"  # Use IANA timezone names\n  max_concurrent_jobs: 10\n  job_timeout_seconds: 300\n  keep_history_days: 30\n\nemail:\n  enabled: true\n  smtp:\n    host: \"smtp.gmail.com\"\n    port: 587                   # 587 for TLS, 465 for SSL\n    user: \"your-email@gmail.com\"\n    password: \"app-password\"    # Gmail: use App Password, not account password\n    from_email: \"noreply@company.com\"\n    from_name: \"SQLatte Reports\"\n    use_tls: true\n\nexport:\n  formats: [csv, excel, html]\n  max_rows: 1000\n  max_file_size_mb: 25\n  filename_template: \"{{schedule_name}}_{{date}}_{{time}}.{{format}}\"\n</code></pre> <p>Gmail App Password: 1. Enable 2FA on Gmail account 2. Go to https://myaccount.google.com/apppasswords 3. Generate app password 4. Use generated password in config</p> <p>Template Variables: - <code>{{schedule_name}}</code> - Name of the schedule - <code>{{date}}</code> - Date in YYYY-MM-DD format - <code>{{time}}</code> - Time in HH-MM-SS format - <code>{{format}}</code> - File format (csv, excel, html)</p>"},{"location":"configuration/config-yaml/#insights-engine","title":"Insights Engine","text":"<p>AI-powered data analysis and pattern detection.</p> <pre><code>insights:\n  enabled: true\n  mode: \"hybrid\"               # llm_only, statistical_only, or hybrid\n  max_insights: 3\n  include_statistical: true\n</code></pre> <p>Modes: - <code>llm_only</code> - Pure AI-generated insights - <code>statistical_only</code> - Rule-based statistical analysis - <code>hybrid</code> - Best of both (recommended)</p>"},{"location":"configuration/config-yaml/#analytics-storage","title":"Analytics Storage","text":"<p>Track query history and performance metrics.</p> <pre><code>analytics:\n  enabled: true\n  storage: \"postgresql\"        # memory or postgresql\n\n  postgresql:\n    host: \"localhost\"\n    port: 5432\n    database: \"sqlatte_analytics\"\n    user: \"sqlatte\"\n    password: \"analytics_pass\"\n\n  query_history_days: 90\n  execution_logs_days: 30\n</code></pre> <p>Storage Modes: - <code>memory</code> - In-memory storage, fast but not persistent - <code>postgresql</code> - Persistent storage in PostgreSQL database</p>"},{"location":"configuration/config-yaml/#plugin-configuration","title":"Plugin Configuration","text":""},{"location":"configuration/config-yaml/#auth-plugin-multi-tenant","title":"Auth Plugin (Multi-Tenant)","text":"<p>Enable per-user database authentication.</p> <pre><code>plugins:\n  auth:\n    enabled: true\n    session_ttl_minutes: 480    # 8 hours\n    max_workers: 40\n\n    # Server-side database info (what DB type to connect to)\n    db_provider: \"trino\"\n    db_host: \"trino.company.com\"\n    db_port: 443\n\n    # Restrictions (empty arrays = allow all)\n    allowed_catalogs:\n      - \"hive\"\n      - \"iceberg\"\n    allowed_schemas:\n      - \"default\"\n      - \"production\"\n    allowed_db_types:\n      - \"trino\"\n</code></pre> <p>When to Enable: - Multi-tenant SaaS applications - Per-user database access control - Customer-facing analytics</p> <p>When to Disable: - Internal tools with shared database access - Single-tenant deployments</p>"},{"location":"configuration/config-yaml/#prompts-configuration","title":"Prompts Configuration","text":"<p>Customize AI behavior through prompts. These can also be edited via Admin Panel.</p> <pre><code>prompts:\n  intent_detection: |\n    [Your custom intent detection prompt]\n\n  barista_personality: |\n    [Your custom chat personality]\n\n  sql_generation: |\n    [Your custom SQL generation rules]\n\n  insights_generation: |\n    [Your custom insights analysis prompt]\n</code></pre> <p>Template Variables Available: - <code>{schema_info}</code> - Database schema information - <code>{question}</code> - User's natural language question - <code>{query_result}</code> - SQL query execution results - <code>{user_question}</code> - Original user question - <code>{sql_query}</code> - Generated SQL query - <code>{data_preview}</code> - Sample of query results</p> <p>See Runtime Prompts for detailed customization guide.</p>"},{"location":"configuration/config-yaml/#environment-variable-overrides","title":"Environment Variable Overrides","text":"<p>Any configuration value can be overridden with environment variables using this pattern:</p> <pre><code># Database\nexport SQLATTE_DB_HOST=production-db.company.com\nexport SQLATTE_DB_PASSWORD=secure_password\n\n# LLM\nexport SQLATTE_LLM_PROVIDER=anthropic\nexport SQLATTE_LLM_API_KEY=sk-ant-xxxxx\n\n# Email\nexport SQLATTE_SMTP_HOST=smtp.gmail.com\nexport SQLATTE_SMTP_PASSWORD=app_password\n\n# App\nexport SQLATTE_PORT=8000\nexport SQLATTE_DEBUG=false\n</code></pre> <p>Naming Convention: <code>SQLATTE_&lt;SECTION&gt;_&lt;KEY&gt;=&lt;value&gt;</code></p> <p>Environment variables take precedence over <code>config.yaml</code> values.</p>"},{"location":"configuration/config-yaml/#configuration-validation","title":"Configuration Validation","text":"<p>SQLatte validates configuration on startup and provides helpful error messages.</p>"},{"location":"configuration/config-yaml/#common-validation-errors","title":"Common Validation Errors","text":"<p>Database Connection Failed: <pre><code>ERROR: Could not connect to PostgreSQL at localhost:5432\n- Check host and port are correct\n- Verify credentials\n- Ensure database exists\n- Check firewall rules\n</code></pre></p> <p>Invalid LLM API Key: <pre><code>ERROR: Anthropic API authentication failed\n- Verify API key starts with 'sk-ant-'\n- Check key has not expired\n- Ensure sufficient API credits\n</code></pre></p> <p>Missing Required Fields: <pre><code>ERROR: Missing required field: database.postgresql.database\n- Add 'database' field under postgresql section\n</code></pre></p>"},{"location":"configuration/config-yaml/#manual-validation","title":"Manual Validation","text":"<p>Run validation without starting server:</p> <pre><code>python -m src.core.config_validator --config config/config.yaml\n</code></pre>"},{"location":"configuration/config-yaml/#security-best-practices","title":"Security Best Practices","text":"<p>Never Commit Secrets</p> <p>Do not commit <code>config.yaml</code> with real credentials to version control!</p>"},{"location":"configuration/config-yaml/#recommended-approach","title":"Recommended Approach","text":"<p>1. Template Configuration</p> <p>Create <code>config/config.template.yaml</code>: <pre><code>database:\n  provider: postgresql\n  postgresql:\n    host: ${DB_HOST}\n    password: ${DB_PASSWORD}\n\nllm:\n  provider: anthropic\n  anthropic:\n    api_key: ${ANTHROPIC_API_KEY}\n</code></pre></p> <p>2. .gitignore</p> <pre><code>config/config.yaml\n*.env\n.env.local\n</code></pre> <p>3. Environment Variables</p> <p>Use <code>.env</code> file (not committed): <pre><code>DB_HOST=localhost\nDB_PASSWORD=secret\nANTHROPIC_API_KEY=sk-ant-xxxxx\n</code></pre></p> <p>4. Production Secrets Manager</p> <p>For production, use: - AWS Secrets Manager - Google Cloud Secret Manager - HashiCorp Vault - Azure Key Vault</p>"},{"location":"configuration/config-yaml/#configuration-examples","title":"Configuration Examples","text":""},{"location":"configuration/config-yaml/#e-commerce-analytics","title":"E-Commerce Analytics","text":"<pre><code>database:\n  provider: postgresql\n  postgresql:\n    host: analytics-db.company.com\n    database: ecommerce_prod\n\nanalytics:\n  enabled: true\n  storage: postgresql\n  query_history_days: 180\n\nscheduler:\n  enabled: true\n  timezone: \"America/Los_Angeles\"\n\nemail:\n  enabled: true\n  smtp:\n    host: smtp.sendgrid.net\n    from_email: analytics@company.com\n\ninsights:\n  enabled: true\n  mode: hybrid\n</code></pre>"},{"location":"configuration/config-yaml/#multi-tenant-saas","title":"Multi-Tenant SaaS","text":"<pre><code>plugins:\n  auth:\n    enabled: true\n    session_ttl_minutes: 240\n    max_workers: 100\n    db_provider: trino\n    allowed_catalogs:\n      - customer_data\n\nanalytics:\n  enabled: true\n  storage: postgresql\n\ncors:\n  allow_origins:\n    - \"https://app.company.com\"\n  allow_credentials: true\n</code></pre>"},{"location":"configuration/config-yaml/#data-warehouse-querying","title":"Data Warehouse Querying","text":"<pre><code>database:\n  provider: bigquery\n  bigquery:\n    project_id: company-analytics\n    dataset: warehouse\n\nllm:\n  provider: vertex\n  vertex:\n    project_id: company-analytics\n    location: us-central1\n\nanalytics:\n  enabled: false  # Keep it lightweight\n  storage: memory\n</code></pre>"},{"location":"configuration/config-yaml/#configuration-tips","title":"Configuration Tips","text":""},{"location":"configuration/config-yaml/#performance-optimization","title":"Performance Optimization","text":"<pre><code>database:\n  postgresql:\n    pool_size: 10              # Increase for high concurrency\n    max_overflow: 20\n\nscheduler:\n  max_concurrent_jobs: 20      # Limit parallel scheduled queries\n  job_timeout_seconds: 600     # Prevent long-running queries\n</code></pre>"},{"location":"configuration/config-yaml/#development-vs-production","title":"Development vs Production","text":"DevelopmentProduction <pre><code>app:\n  debug: true\n  log_level: \"DEBUG\"\n\ncors:\n  allow_origins: [\"*\"]\n\nanalytics:\n  enabled: false\n  storage: memory\n</code></pre> <pre><code>app:\n  debug: false\n  log_level: \"INFO\"\n\ncors:\n  allow_origins:\n    - \"https://analytics.company.com\"\n\nanalytics:\n  enabled: true\n  storage: postgresql\n</code></pre>"},{"location":"configuration/config-yaml/#resource-limits","title":"Resource Limits","text":"<pre><code>export:\n  max_rows: 10000              # Limit CSV export size\n  max_file_size_mb: 50         # Limit email attachments\n\nemail:\n  max_emails_per_day: 5000     # Rate limiting\n  max_recipients_per_email: 20\n</code></pre>"},{"location":"configuration/config-yaml/#troubleshooting","title":"Troubleshooting","text":""},{"location":"configuration/config-yaml/#config-not-loading","title":"Config Not Loading","text":"<pre><code># Check file exists\nls -l config/config.yaml\n\n# Check YAML syntax\npython -c \"import yaml; yaml.safe_load(open('config/config.yaml'))\"\n\n# Check permissions\nchmod 600 config/config.yaml\n</code></pre>"},{"location":"configuration/config-yaml/#changes-not-taking-effect","title":"Changes Not Taking Effect","text":"<p>Some changes require restart:</p> <pre><code># Stop SQLatte\npkill -f \"python run.py\"\n\n# Start again\npython run.py\n</code></pre> <p>For hot-reloadable configs (prompts, LLM parameters), use admin panel or reload endpoint:</p> <pre><code>curl -X POST http://localhost:8000/admin/reload\n</code></pre>"},{"location":"configuration/config-yaml/#next-steps","title":"Next Steps","text":"<ul> <li>Database Setup: Configure your database provider \u2192</li> <li>LLM Setup: Configure your LLM provider \u2192</li> <li>Runtime Prompts: Customize AI behavior \u2192</li> <li>Scheduling: Set up automated reports \u2192</li> </ul> <p>Need help? Check Configuration Overview or create an issue on GitHub.</p>"},{"location":"configuration/database-providers/","title":"Database Providers","text":"<p>SQLatte supports four database providers. Configure one in <code>config.yaml</code>:</p> <pre><code>database:\n  provider: \"postgresql\"  # trino, postgresql, mysql, bigquery\n</code></pre>"},{"location":"configuration/database-providers/#trino","title":"Trino","text":"<p>Best for: Distributed data lakes (Hive, Iceberg, Delta Lake)</p> <pre><code>database:\n  provider: \"trino\"\n  trino:\n    host: \"trino.company.com\"\n    port: 443\n    user: \"username\"\n    password: \"password\"         # Optional\n    catalog: \"hive\"              # hive, iceberg, delta, etc.\n    schema: \"default\"\n    http_scheme: \"https\"         # http or https\n    verify_ssl: true\n</code></pre> <p>Tips: - Use fully qualified table names: <code>catalog.schema.table</code> - Optimize with partition filters: <code>WHERE dt &gt;= '20251201'</code> - Enable HTTPS in production</p>"},{"location":"configuration/database-providers/#postgresql","title":"PostgreSQL","text":"<p>Best for: Relational databases, OLTP workloads</p> <pre><code>database:\n  provider: \"postgresql\"\n  postgresql:\n    host: \"localhost\"\n    port: 5432\n    database: \"mydb\"\n    user: \"postgres\"\n    password: \"password\"\n    schema: \"public\"             # Default schema\n    pool_size: 5                 # Connection pool\n    max_overflow: 10             # Extra connections\n</code></pre> <p>Connection String Alternative: <pre><code>database:\n  provider: \"postgresql\"\n  postgresql:\n    connection_string: \"postgresql://user:pass@host:5432/db\"\n</code></pre></p> <p>Tips: - Use connection pooling for performance - Set appropriate <code>pool_size</code> for concurrent users - Use schemas to organize tables</p>"},{"location":"configuration/database-providers/#mysql","title":"MySQL","text":"<p>Best for: Web applications, MySQL workloads</p> <pre><code>database:\n  provider: \"mysql\"\n  mysql:\n    host: \"localhost\"\n    port: 3306\n    database: \"mydb\"\n    user: \"root\"\n    password: \"password\"\n    charset: \"utf8mb4\"           # UTF-8 support\n</code></pre> <p>Tips: - Use <code>utf8mb4</code> for full Unicode support - Enable SSL for production: <code>ssl_ca</code>, <code>ssl_cert</code>, <code>ssl_key</code></p>"},{"location":"configuration/database-providers/#google-bigquery","title":"Google BigQuery","text":"<p>Best for: Cloud data warehouse, analytics at scale</p> <pre><code>database:\n  provider: \"bigquery\"\n  bigquery:\n    project_id: \"my-gcp-project\"\n    dataset: \"analytics\"\n    credentials_path: \"/path/to/service-account.json\"\n    location: \"US\"               # US, EU, asia-northeast1, etc.\n</code></pre>"},{"location":"configuration/database-providers/#service-account-setup","title":"Service Account Setup","text":"<ol> <li> <p>Create Service Account: <pre><code># In GCP Console \u2192 IAM &amp; Admin \u2192 Service Accounts\n# Click \"Create Service Account\"\n</code></pre></p> </li> <li> <p>Grant Permissions:</p> </li> <li><code>BigQuery Data Viewer</code> - Read data</li> <li> <p><code>BigQuery Job User</code> - Execute queries</p> </li> <li> <p>Download JSON Key: <pre><code># Click on service account \u2192 Keys \u2192 Add Key \u2192 JSON\n# Save to: /path/to/service-account.json\n</code></pre></p> </li> <li> <p>Update Config: <pre><code>credentials_path: \"/path/to/service-account.json\"\n</code></pre></p> </li> </ol> <p>Tips: - Use backticks for table names: <code>`project.dataset.table`</code> - Leverage partitioning: <code>WHERE _PARTITIONTIME &gt;= '2025-01-01'</code> - Monitor costs with query limits</p>"},{"location":"configuration/database-providers/#testing-connection","title":"Testing Connection","text":"<p>Test your database connection:</p> <pre><code># Via SQLatte\ncurl http://localhost:8000/health\n\n# Via Admin Panel\nhttp://localhost:8000/admin\n# \u2192 Providers tab \u2192 Test Connection button\n</code></pre>"},{"location":"configuration/database-providers/#switching-providers","title":"Switching Providers","text":"<p>Change provider without code changes:</p> <ol> <li>Edit <code>config.yaml</code></li> <li>Update <code>database.provider</code></li> <li>Add provider-specific config</li> <li>Restart SQLatte (or use admin panel reload)</li> </ol> <p>Example - Trino to PostgreSQL: <pre><code># Before\ndatabase:\n  provider: \"trino\"\n  trino: {...}\n\n# After\ndatabase:\n  provider: \"postgresql\"\n  postgresql: {...}\n</code></pre></p>"},{"location":"configuration/database-providers/#performance-tips","title":"Performance Tips","text":""},{"location":"configuration/database-providers/#trino_1","title":"Trino","text":"<ul> <li>Use partition pruning: <code>WHERE dt &gt;= '20251201'</code></li> <li>Prefer <code>approx_distinct()</code> over <code>COUNT(DISTINCT)</code></li> <li>Use <code>LIMIT</code> to control result size</li> </ul>"},{"location":"configuration/database-providers/#postgresql_1","title":"PostgreSQL","text":"<ul> <li>Create indexes on frequently queried columns</li> <li>Use <code>EXPLAIN ANALYZE</code> for query optimization</li> <li>Increase <code>pool_size</code> for concurrent users</li> </ul>"},{"location":"configuration/database-providers/#mysql_1","title":"MySQL","text":"<ul> <li>Use <code>LIMIT</code> in queries</li> <li>Index foreign key columns</li> <li>Enable query cache if applicable</li> </ul>"},{"location":"configuration/database-providers/#bigquery","title":"BigQuery","text":"<ul> <li>Use clustering and partitioning</li> <li>Avoid <code>SELECT *</code> on large tables</li> <li>Use <code>APPROX_COUNT_DISTINCT</code> for large cardinality</li> </ul>"},{"location":"configuration/database-providers/#troubleshooting","title":"Troubleshooting","text":""},{"location":"configuration/database-providers/#connection-refused","title":"Connection Refused","text":"<pre><code># Check host and port\nping your-db-host\ntelnet your-db-host 5432\n\n# Check firewall rules\n# Check database is running\n</code></pre>"},{"location":"configuration/database-providers/#authentication-failed","title":"Authentication Failed","text":"<pre><code># Verify credentials\n# Check user has necessary permissions\n# Check password special characters (escape in YAML)\n</code></pre>"},{"location":"configuration/database-providers/#timeout-errors","title":"Timeout Errors","text":"<pre><code># Increase timeout in config\n# Check network latency\n# Optimize slow queries\n</code></pre> <p>Next: LLM Providers | Full Config Reference</p>"},{"location":"configuration/email/","title":"Email Settings","text":"<p>Configure email delivery for scheduled reports and notifications.</p>"},{"location":"configuration/email/#quick-start","title":"Quick Start","text":""},{"location":"configuration/email/#gmail-setup-recommended-for-testing","title":"Gmail Setup (Recommended for Testing)","text":"<pre><code>email:\n  enabled: true\n\n  smtp:\n    host: \"smtp.gmail.com\"\n    port: 587\n    user: \"your-email@gmail.com\"\n    password: \"your-app-password\"        # NOT your Gmail password!\n    from_email: \"your-email@gmail.com\"\n    from_name: \"SQLatte Reports\"\n    use_tls: true\n</code></pre>"},{"location":"configuration/email/#get-gmail-app-password","title":"Get Gmail App Password","text":"<ol> <li>Enable 2FA on your Gmail account</li> <li>Visit myaccount.google.com/apppasswords</li> <li>Select Mail and your device</li> <li>Click Generate</li> <li>Copy the 16-character password</li> <li>Use in <code>config.yaml</code> (no spaces)</li> </ol>"},{"location":"configuration/email/#smtp-providers","title":"SMTP Providers","text":""},{"location":"configuration/email/#gmail","title":"Gmail","text":"<pre><code>smtp:\n  host: \"smtp.gmail.com\"\n  port: 587                              # TLS\n  use_tls: true\n</code></pre> <p>Limits: 500 emails/day (free), 2,000/day (Workspace)</p>"},{"location":"configuration/email/#sendgrid","title":"SendGrid","text":"<pre><code>smtp:\n  host: \"smtp.sendgrid.net\"\n  port: 587\n  user: \"apikey\"                         # Literally \"apikey\"\n  password: \"SG.xxxxx\"                   # Your SendGrid API key\n  use_tls: true\n</code></pre> <p>Get API Key: 1. Sign up at sendgrid.com 2. Settings \u2192 API Keys \u2192 Create API Key 3. Copy and use as password</p> <p>Limits: 100 emails/day (free), unlimited (paid)</p>"},{"location":"configuration/email/#amazon-ses","title":"Amazon SES","text":"<pre><code>smtp:\n  host: \"email-smtp.us-east-1.amazonaws.com\"\n  port: 587\n  user: \"AKIAXXXXX\"                      # SMTP username\n  password: \"xxxxx\"                      # SMTP password\n  use_tls: true\n</code></pre> <p>Setup: 1. Enable SES in AWS Console 2. Verify sender email/domain 3. Create SMTP credentials 4. Move out of sandbox (for production)</p> <p>Limits: 62,000 emails/month (free tier)</p>"},{"location":"configuration/email/#microsoft-365","title":"Microsoft 365","text":"<pre><code>smtp:\n  host: \"smtp.office365.com\"\n  port: 587\n  user: \"your-email@company.com\"\n  password: \"your-password\"\n  use_tls: true\n</code></pre> <p>Limits: 10,000 emails/day</p>"},{"location":"configuration/email/#custom-smtp-server","title":"Custom SMTP Server","text":"<pre><code>smtp:\n  host: \"mail.company.com\"\n  port: 587                              # 25, 465, 587\n  user: \"username\"\n  password: \"password\"\n  from_email: \"noreply@company.com\"\n  from_name: \"Company Analytics\"\n  use_tls: true                          # or false for port 25\n</code></pre>"},{"location":"configuration/email/#email-configuration","title":"Email Configuration","text":""},{"location":"configuration/email/#complete-configuration","title":"Complete Configuration","text":"<pre><code>email:\n  enabled: true\n\n  smtp:\n    host: \"smtp.gmail.com\"\n    port: 587\n    user: \"your-email@gmail.com\"\n    password: \"app-password\"\n    from_email: \"noreply@company.com\"    # Sender email\n    from_name: \"SQLatte Reports\"          # Sender name\n    use_tls: true\n\n  # Email templates\n  templates:\n    success_subject: \"\u2705 {{schedule_name}} - {{date}}\"\n    failure_subject: \"\u274c Failed: {{schedule_name}}\"\n\n  # Rate limiting\n  max_emails_per_day: 1000               # Daily limit\n  max_recipients_per_email: 10           # Per email\n</code></pre>"},{"location":"configuration/email/#template-variables","title":"Template Variables","text":"<p>Available in email subjects/bodies:</p> Variable Description Example <code>{{schedule_name}}</code> Schedule name Daily Sales Report <code>{{date}}</code> Date (YYYY-MM-DD) 2025-02-11 <code>{{time}}</code> Time (HH:MM:SS) 09:00:00 <code>{{format}}</code> File format csv, excel, html"},{"location":"configuration/email/#export-formats","title":"Export Formats","text":"<p>Configure report file formats:</p> <pre><code>export:\n  formats:\n    - csv\n    - excel\n    - html\n\n  max_rows: 1000                         # Limit rows per export\n  max_file_size_mb: 25                   # Attachment size limit\n\n  # Filename template\n  filename_template: \"{{schedule_name}}_{{date}}_{{time}}.{{format}}\"\n</code></pre> <p>Example filename: <code>Daily_Sales_2025-02-11_09-00-00.xlsx</code></p>"},{"location":"configuration/email/#testing-email","title":"Testing Email","text":""},{"location":"configuration/email/#test-via-admin-panel","title":"Test via Admin Panel","text":"<pre><code>http://localhost:8000/admin\n\u2192 Email &amp; SMTP tab\n\u2192 Fill in SMTP settings\n\u2192 Click \"Send Test Email\"\n\u2192 Check inbox\n</code></pre>"},{"location":"configuration/email/#test-via-api","title":"Test via API","text":"<pre><code>curl -X POST http://localhost:8000/admin/test-email \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"to\": \"test@example.com\",\n    \"subject\": \"Test Email\",\n    \"body\": \"This is a test\"\n  }'\n</code></pre>"},{"location":"configuration/email/#mock-mode-no-email","title":"Mock Mode (No Email)","text":"<p>Test without sending actual emails:</p> <pre><code>email:\n  enabled: false                         # Emails logged but not sent\n</code></pre> <p>Output in logs: <pre><code>\ud83d\udce7 Mock: Would send to john@example.com\n\ud83d\udce7 Subject: Daily Sales Report - 2025-02-11\n\ud83d\udce7 Attachment: report.xlsx (2.5MB)\n</code></pre></p> <p>Use case: Development, testing, debugging</p>"},{"location":"configuration/email/#email-security","title":"Email Security","text":""},{"location":"configuration/email/#use-environment-variables","title":"Use Environment Variables","text":"<p>Don't store passwords in config.yaml:</p> <pre><code># .env file\nSMTP_USER=your-email@gmail.com\nSMTP_PASSWORD=your-app-password\n</code></pre> <pre><code># config.yaml\nsmtp:\n  user: \"${SMTP_USER}\"\n  password: \"${SMTP_PASSWORD}\"\n</code></pre>"},{"location":"configuration/email/#tlsssl","title":"TLS/SSL","text":"<p>Always use encryption in production:</p> <pre><code>smtp:\n  port: 587                              # TLS (recommended)\n  use_tls: true\n\n  # OR for SSL\n  port: 465\n  use_ssl: true\n</code></pre> <p>Never use port 25 without encryption in production!</p>"},{"location":"configuration/email/#troubleshooting","title":"Troubleshooting","text":""},{"location":"configuration/email/#authentication-failed","title":"Authentication Failed","text":"<pre><code># Error: 535 Authentication failed\n# - Verify username/password\n# - For Gmail: Use App Password (not account password)\n# - For SendGrid: Use \"apikey\" as username\n</code></pre>"},{"location":"configuration/email/#connection-refused","title":"Connection Refused","text":"<pre><code># Error: Connection refused\n# - Check host and port\n# - Verify firewall allows outbound SMTP\n# - Test with telnet: telnet smtp.gmail.com 587\n</code></pre>"},{"location":"configuration/email/#tlsssl-error","title":"TLS/SSL Error","text":"<pre><code># Error: SSL handshake failed\n# - Use port 587 with use_tls: true\n# - Or port 465 with use_ssl: true\n# - Don't mix TLS and SSL settings\n</code></pre>"},{"location":"configuration/email/#rate-limit-exceeded","title":"Rate Limit Exceeded","text":"<pre><code># Error: Too many emails\n# - Check provider limits (Gmail: 500/day)\n# - Reduce max_emails_per_day in config\n# - Upgrade to paid plan\n</code></pre>"},{"location":"configuration/email/#email-not-received","title":"Email Not Received","text":"<pre><code># Check spam folder\n# Verify sender email is verified (SES, SendGrid)\n# Check email logs in admin panel\n# Test with simple email first\n</code></pre>"},{"location":"configuration/email/#best-practices","title":"Best Practices","text":""},{"location":"configuration/email/#for-development","title":"For Development","text":"<ul> <li>\u2705 Use Gmail with app password</li> <li>\u2705 Enable mock mode for testing</li> <li>\u2705 Send to your own email</li> <li>\u2705 Use small <code>max_recipients_per_email</code></li> </ul>"},{"location":"configuration/email/#for-production","title":"For Production","text":"<ul> <li>\u2705 Use dedicated email service (SendGrid, SES)</li> <li>\u2705 Verify sender domain (SPF, DKIM, DMARC)</li> <li>\u2705 Store credentials in environment variables</li> <li>\u2705 Enable TLS/SSL</li> <li>\u2705 Monitor email delivery rates</li> <li>\u2705 Set appropriate rate limits</li> </ul>"},{"location":"configuration/email/#for-compliance","title":"For Compliance","text":"<ul> <li>\u2705 Include unsubscribe link</li> <li>\u2705 Add company contact info</li> <li>\u2705 Follow CAN-SPAM Act / GDPR</li> <li>\u2705 Don't send to unverified emails</li> </ul>"},{"location":"configuration/email/#email-templates","title":"Email Templates","text":""},{"location":"configuration/email/#customize-email-content","title":"Customize Email Content","text":"<p>Create custom email templates:</p> <pre><code>templates:\n  success_subject: \"\ud83d\udcca {{schedule_name}} Ready\"\n  success_body: |\n    Hi there,\n\n    Your report \"{{schedule_name}}\" is ready!\n\n    Generated: {{date}} at {{time}}\n\n    Please find the {{format}} file attached.\n\n    Best regards,\n    SQLatte Team\n\n  failure_subject: \"\u26a0\ufe0f Report Failed: {{schedule_name}}\"\n  failure_body: |\n    Hi there,\n\n    Unfortunately, your report \"{{schedule_name}}\" failed to generate.\n\n    Error: {{error_message}}\n\n    Please check your query and try again.\n\n    Best regards,\n    SQLatte Team\n</code></pre>"},{"location":"configuration/email/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"configuration/email/#multiple-recipients","title":"Multiple Recipients","text":"<pre><code># In schedule configuration\nrecipients:\n  - team@company.com\n  - manager@company.com\n  - analytics@company.com\n</code></pre> <p>Note: Limited by <code>max_recipients_per_email</code></p>"},{"location":"configuration/email/#custom-headers","title":"Custom Headers","text":"<pre><code>smtp:\n  custom_headers:\n    X-Mailer: \"SQLatte v1.0\"\n    X-Priority: \"1\"                      # High priority\n</code></pre>"},{"location":"configuration/email/#reply-to-address","title":"Reply-To Address","text":"<pre><code>smtp:\n  from_email: \"noreply@company.com\"\n  reply_to: \"support@company.com\"        # Where replies go\n</code></pre>"},{"location":"configuration/email/#monitoring-email-delivery","title":"Monitoring Email Delivery","text":""},{"location":"configuration/email/#via-admin-panel","title":"Via Admin Panel","text":"<pre><code>http://localhost:8000/admin\n\u2192 Scheduler tab\n\u2192 View execution history\n\u2192 Check \"Email Sent\" status\n</code></pre>"},{"location":"configuration/email/#via-database-if-analytics-enabled","title":"Via Database (if analytics enabled)","text":"<pre><code>SELECT \n  schedule_name,\n  execution_time,\n  email_sent,\n  email_error\nFROM execution_logs\nWHERE execution_time &gt; NOW() - INTERVAL '7 days'\nORDER BY execution_time DESC;\n</code></pre>"},{"location":"configuration/email/#cost-optimization","title":"Cost Optimization","text":"Provider Free Tier Paid Gmail 500/day 2,000/day (Workspace) SendGrid 100/day $15/mo (40,000/mo) Amazon SES 62,000/mo $0.10/1,000 emails Mailgun 5,000/mo $35/mo (50,000/mo) <p>Recommendation: Start with Gmail, upgrade to SendGrid/SES for production.</p> <p>Next: Scheduled Queries | Full Config Reference</p>"},{"location":"configuration/llm-providers/","title":"LLM Providers","text":"<p>SQLatte supports three LLM providers. Configure one in <code>config.yaml</code>:</p> <pre><code>llm:\n  provider: \"anthropic\"  # anthropic, gemini, vertex\n</code></pre>"},{"location":"configuration/llm-providers/#anthropic-claude-recommended","title":"Anthropic Claude (Recommended)","text":"<p>Best for: SQL generation, complex reasoning, highest quality</p> <pre><code>llm:\n  provider: \"anthropic\"\n  anthropic:\n    api_key: \"sk-ant-xxxxx\"\n    model: \"claude-sonnet-4-20250514\"    # Recommended\n    max_tokens: 4096\n    temperature: 0.0                      # Deterministic (best for SQL)\n    timeout: 60\n</code></pre>"},{"location":"configuration/llm-providers/#models","title":"Models","text":"Model Best For Speed Cost <code>claude-sonnet-4-20250514</code> Balanced (recommended) Fast $$ <code>claude-opus-4-20250514</code> Highest quality Slow $$$ <code>claude-haiku-4-20250316</code> Simple queries Fastest $"},{"location":"configuration/llm-providers/#getting-api-key","title":"Getting API Key","text":"<ol> <li>Visit console.anthropic.com</li> <li>Sign up / Log in</li> <li>Go to API Keys</li> <li>Click Create Key</li> <li>Copy <code>sk-ant-xxxxx</code></li> <li>Add to config.yaml</li> </ol> <p>Pricing: Pay-as-you-go, ~$3 per 1M input tokens (Sonnet)</p>"},{"location":"configuration/llm-providers/#google-gemini","title":"Google Gemini","text":"<p>Best for: Free tier, fast responses, Google ecosystem</p> <pre><code>llm:\n  provider: \"gemini\"\n  gemini:\n    api_key: \"your-gemini-api-key\"\n    model: \"gemini-2.0-flash-exp\"         # Latest model\n    max_tokens: 4096\n    temperature: 0.0\n</code></pre>"},{"location":"configuration/llm-providers/#getting-api-key_1","title":"Getting API Key","text":"<ol> <li>Visit makersuite.google.com/app/apikey</li> <li>Sign in with Google account</li> <li>Click Create API Key</li> <li>Copy key</li> <li>Add to config.yaml</li> </ol> <p>Free Tier: 60 requests/minute, 1,500 requests/day</p> <p>Pricing: Free tier available, then pay-as-you-go</p>"},{"location":"configuration/llm-providers/#google-vertex-ai","title":"Google Vertex AI","text":"<p>Best for: Enterprise GCP deployments, production scale</p> <pre><code>llm:\n  provider: \"vertex\"\n  vertex:\n    project_id: \"my-gcp-project\"\n    location: \"us-central1\"               # or europe-west1, asia-northeast1\n    model: \"gemini-2.0-flash-exp\"\n    credentials_path: \"/path/to/service-account.json\"\n    max_tokens: 4096\n    temperature: 0.0\n</code></pre>"},{"location":"configuration/llm-providers/#service-account-setup","title":"Service Account Setup","text":"<ol> <li> <p>Create Service Account: <pre><code># GCP Console \u2192 IAM &amp; Admin \u2192 Service Accounts\n</code></pre></p> </li> <li> <p>Grant Permissions:</p> </li> <li><code>Vertex AI User</code></li> <li> <p><code>Service Account Token Creator</code></p> </li> <li> <p>Download JSON Key: <pre><code># Keys \u2192 Add Key \u2192 JSON\n# Save to /path/to/service-account.json\n</code></pre></p> </li> <li> <p>Enable Vertex AI API: <pre><code>gcloud services enable aiplatform.googleapis.com\n</code></pre></p> </li> </ol> <p>Pricing: Enterprise pricing, similar to Gemini API</p>"},{"location":"configuration/llm-providers/#comparison","title":"Comparison","text":"Feature Anthropic Claude Google Gemini Vertex AI Quality (SQL) \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 Speed Fast Very Fast Fast Cost $$ $ (free tier) $$ Setup Easy Easiest Complex Free Tier No Yes No Best For Production Testing/Free Enterprise GCP"},{"location":"configuration/llm-providers/#model-parameters","title":"Model Parameters","text":""},{"location":"configuration/llm-providers/#temperature","title":"Temperature","text":"<pre><code>temperature: 0.0   # Deterministic (recommended for SQL)\ntemperature: 0.5   # Balanced\ntemperature: 1.0   # Creative (not recommended for SQL)\n</code></pre> <p>Recommendation: Always use <code>0.0</code> for SQL generation to ensure consistent queries.</p>"},{"location":"configuration/llm-providers/#max-tokens","title":"Max Tokens","text":"<pre><code>max_tokens: 4096   # Standard (recommended)\nmax_tokens: 8192   # For complex queries with large schemas\n</code></pre>"},{"location":"configuration/llm-providers/#timeout","title":"Timeout","text":"<pre><code>timeout: 60        # Default (60 seconds)\ntimeout: 120       # For complex queries\n</code></pre>"},{"location":"configuration/llm-providers/#testing-llm-connection","title":"Testing LLM Connection","text":"<pre><code># Via Admin Panel\nhttp://localhost:8000/admin\n# \u2192 Providers tab \u2192 Test LLM button\n\n# Via API\ncurl http://localhost:8000/health\n# Check: \"llm\": \"available\"\n</code></pre>"},{"location":"configuration/llm-providers/#switching-providers","title":"Switching Providers","text":"<p>Change LLM provider in real-time:</p> <p>Option 1: Config File <pre><code># Edit config.yaml\nllm:\n  provider: \"gemini\"  # Changed from anthropic\n</code></pre></p> <p>Option 2: Admin Panel <pre><code>http://localhost:8000/admin\n\u2192 Providers tab\n\u2192 Select LLM provider\n\u2192 Save\n\u2192 Hot reload (no restart needed!)\n</code></pre></p>"},{"location":"configuration/llm-providers/#cost-optimization","title":"Cost Optimization","text":""},{"location":"configuration/llm-providers/#use-cheaper-models-for-simple-queries","title":"Use Cheaper Models for Simple Queries","text":"<pre><code># For simple queries, use Haiku (Anthropic) or Gemini free tier\n</code></pre>"},{"location":"configuration/llm-providers/#adjust-token-limits","title":"Adjust Token Limits","text":"<pre><code>max_tokens: 2048   # Reduce if queries are simple\n</code></pre>"},{"location":"configuration/llm-providers/#cache-prompts-future","title":"Cache Prompts (Future)","text":"<pre><code># Cache common schema descriptions\n# Reuse prompt templates\n</code></pre>"},{"location":"configuration/llm-providers/#troubleshooting","title":"Troubleshooting","text":""},{"location":"configuration/llm-providers/#invalid-api-key","title":"Invalid API Key","text":"<pre><code># Error: 401 Unauthorized\n# - Verify API key is correct\n# - Check key hasn't expired\n# - Ensure no extra spaces in config.yaml\n</code></pre>"},{"location":"configuration/llm-providers/#rate-limit-exceeded","title":"Rate Limit Exceeded","text":"<pre><code># Error: 429 Too Many Requests\n# - Reduce request frequency\n# - Upgrade to paid tier\n# - Use different model\n</code></pre>"},{"location":"configuration/llm-providers/#model-not-found","title":"Model Not Found","text":"<pre><code># Error: 404 Model not found\n# - Check model name spelling\n# - Verify model is available in your region\n# - Use latest model names\n</code></pre>"},{"location":"configuration/llm-providers/#timeout_1","title":"Timeout","text":"<pre><code># Error: Request timeout\n# - Increase timeout in config\n# - Simplify query/schema\n# - Use faster model (Haiku, Gemini Flash)\n</code></pre>"},{"location":"configuration/llm-providers/#best-practices","title":"Best Practices","text":""},{"location":"configuration/llm-providers/#for-production","title":"For Production","text":"<ul> <li>\u2705 Use Claude Sonnet 4 for best SQL quality</li> <li>\u2705 Set <code>temperature: 0.0</code> for deterministic results</li> <li>\u2705 Monitor API costs with usage limits</li> <li>\u2705 Use environment variables for API keys</li> </ul>"},{"location":"configuration/llm-providers/#for-development","title":"For Development","text":"<ul> <li>\u2705 Use Gemini free tier for testing</li> <li>\u2705 Test with sample queries before production</li> <li>\u2705 Validate generated SQL before execution</li> </ul>"},{"location":"configuration/llm-providers/#for-enterprise","title":"For Enterprise","text":"<ul> <li>\u2705 Use Vertex AI for GCP integration</li> <li>\u2705 Set up service account with minimal permissions</li> <li>\u2705 Enable audit logging</li> <li>\u2705 Use VPC for network isolation</li> </ul>"},{"location":"configuration/llm-providers/#environment-variables","title":"Environment Variables","text":"<p>Store API keys securely:</p> <pre><code># .env file (don't commit!)\nANTHROPIC_API_KEY=sk-ant-xxxxx\nGEMINI_API_KEY=your-gemini-key\n</code></pre> <pre><code># config.yaml\nllm:\n  provider: \"anthropic\"\n  anthropic:\n    api_key: \"${ANTHROPIC_API_KEY}\"  # From environment\n</code></pre> <p>Next: Analytics Setup | Full Config Reference</p>"},{"location":"configuration/overview/","title":"Configuration Overview","text":"<p>SQLatte uses a YAML-based configuration system that follows the \"optional complexity\" philosophy - start with minimal settings and add features as needed.</p>"},{"location":"configuration/overview/#configuration-file","title":"Configuration File","text":"<p>SQLatte loads configuration from <code>config.yaml</code> in the root directory. You can also specify a custom path:</p> <pre><code>python app.py --config /path/to/custom-config.yaml\n</code></pre> <p>Or use environment variable: <pre><code>export SQLATTE_CONFIG=/path/to/custom-config.yaml\n</code></pre></p>"},{"location":"configuration/overview/#minimal-configuration","title":"Minimal Configuration","text":"<p>The absolute minimum to get started:</p> <pre><code>database:\n  provider: postgresql\n  host: localhost\n  database: mydb\n  user: dbuser\n  password: dbpass\n\nllm:\n  provider: anthropic\n  api_key: sk-ant-xxxxx\n</code></pre> <p>This gives you basic natural language querying without any optional features.</p>"},{"location":"configuration/overview/#full-configuration-structure","title":"Full Configuration Structure","text":"<p>Here's the complete configuration structure:</p> <pre><code>app:\n  host: 0.0.0.0\n  port: 5001\n  debug: false\n  cors:\n    enabled: true\n    origins: [\"*\"]\n\ndatabase:\n  provider: postgresql  # postgresql, mysql, trino, bigquery\n  host: localhost\n  port: 5432\n  database: mydb\n  user: dbuser\n  password: dbpass\n  # Provider-specific options...\n\nllm:\n  provider: anthropic  # anthropic, gemini, vertex\n  api_key: your-key\n  model: claude-sonnet-4-5-20250929\n  temperature: 0.0\n  max_tokens: 4096\n\nanalytics:\n  enabled: true\n  provider: postgresql\n  host: localhost\n  port: 5432\n  database: sqlatte_analytics\n  user: analytics_user\n  password: analytics_pass\n\nsession:\n  enabled: true\n  secret_key: your-secret-key\n  max_age: 86400\n\nscheduling:\n  enabled: true\n  email:\n    smtp_host: smtp.gmail.com\n    smtp_port: 587\n    smtp_user: your-email@gmail.com\n    smtp_password: your-app-password\n    from_address: sqlatte@yourcompany.com\n\nprompts:\n  system_prompt: |\n    You are a helpful data analyst assistant...\n  # Runtime prompts loaded from database when enabled\n</code></pre>"},{"location":"configuration/overview/#configuration-sections","title":"Configuration Sections","text":""},{"location":"configuration/overview/#app-settings","title":"App Settings","text":"<p>Controls the Flask application:</p> <pre><code>app:\n  host: 0.0.0.0          # Listen address\n  port: 5001             # Port number\n  debug: false           # Debug mode (dev only!)\n  cors:\n    enabled: true        # Enable CORS\n    origins: [\"*\"]       # Allowed origins\n</code></pre> <p>Learn more \u2192</p>"},{"location":"configuration/overview/#database-provider","title":"Database Provider","text":"<p>Your data source connection:</p> <pre><code>database:\n  provider: postgresql\n  # Connection details...\n</code></pre> <p>Supports: PostgreSQL, MySQL, Trino, BigQuery</p> <p>Learn more \u2192</p>"},{"location":"configuration/overview/#llm-provider","title":"LLM Provider","text":"<p>AI provider for natural language processing:</p> <pre><code>llm:\n  provider: anthropic\n  api_key: sk-ant-xxxxx\n  model: claude-sonnet-4-5-20250929\n</code></pre> <p>Supports: Anthropic Claude, Google Gemini, Vertex AI</p> <p>Learn more \u2192</p>"},{"location":"configuration/overview/#analytics-optional","title":"Analytics (Optional)","text":"<p>Track queries, insights, and usage:</p> <pre><code>analytics:\n  enabled: true\n  provider: postgresql\n  # Database connection...\n</code></pre> <p>Learn more \u2192</p>"},{"location":"configuration/overview/#session-management-optional","title":"Session Management (Optional)","text":"<p>Enable user sessions for auth widget:</p> <pre><code>session:\n  enabled: true\n  secret_key: your-secret-key\n  max_age: 86400  # 24 hours\n</code></pre> <p>Required for: Auth widget, scheduled queries per user</p>"},{"location":"configuration/overview/#scheduling-optional","title":"Scheduling (Optional)","text":"<p>Enable automated query execution:</p> <pre><code>scheduling:\n  enabled: true\n  email:\n    smtp_host: smtp.gmail.com\n    smtp_port: 587\n    # Email credentials...\n</code></pre> <p>Learn more \u2192</p>"},{"location":"configuration/overview/#runtime-prompts-optional","title":"Runtime Prompts (Optional)","text":"<p>Customize AI behavior through admin panel:</p> <pre><code>prompts:\n  intent_detection: |\n    Analyze user question and determine if it needs SQL.\n\n    Tables: {schema_info}\n    Question: {question}\n\n    Return: INTENT: sql|chat\n\n  barista_personality: |\n    You are SQLatte \u2615 - friendly data assistant.\n    Be helpful and use coffee metaphors occasionally.\n\n  sql_generation: |\n    Generate SQL from natural language.\n\n    Schema: {schema_info}\n    Question: {question}\n\n    Rules:\n    1. Use JOINs appropriately\n    2. Add LIMIT clause\n    3. Handle partitions (dt column) efficiently\n\n    Format: SQL: [query] | EXPLANATION: [details]\n\n  insights_generation: |\n    Analyze results and generate 1-3 insights.\n\n    Question: {user_question}\n    SQL: {sql_query}\n    Data: {data_preview}\n\n    Focus on: trends, anomalies, recommendations\n</code></pre> <p>Prompt Template Variables: - <code>{schema_info}</code> - Available tables and columns - <code>{question}</code> - User's natural language question - <code>{user_question}</code> - Original question (for insights) - <code>{sql_query}</code> - Generated SQL query - <code>{data_preview}</code> - Sample query results</p> <p>When analytics is enabled, prompts can be managed via admin UI with hot reload.</p> <p>Learn more \u2192</p>"},{"location":"configuration/overview/#configuration-patterns","title":"Configuration Patterns","text":""},{"location":"configuration/overview/#development-vs-production","title":"Development vs Production","text":"DevelopmentProduction <pre><code>app:\n  host: 127.0.0.1\n  port: 5001\n  debug: true\n  cors:\n    enabled: true\n    origins: [\"http://localhost:3000\"]\n\ndatabase:\n  provider: postgresql\n  host: localhost\n  # Local dev database\n\nanalytics:\n  enabled: false  # Keep it simple\n\nsession:\n  enabled: false  # Config-based widget only\n</code></pre> <pre><code>app:\n  host: 0.0.0.0\n  port: 5001\n  debug: false\n  cors:\n    enabled: true\n    origins: [\"https://yourapp.com\"]\n\ndatabase:\n  provider: postgresql\n  host: prod-db.company.com\n  # Production database\n\nanalytics:\n  enabled: true\n  provider: postgresql\n  # Separate analytics database\n\nsession:\n  enabled: true\n  secret_key: ${SESSION_SECRET}  # From env var\n\nscheduling:\n  enabled: true\n  # Email configuration\n</code></pre>"},{"location":"configuration/overview/#feature-progression","title":"Feature Progression","text":"<p>Start simple, add features incrementally:</p> <p>Phase 1: Basic Querying <pre><code>database: { ... }\nllm: { ... }\n</code></pre></p> <p>Phase 2: Add Analytics <pre><code>database: { ... }\nllm: { ... }\nanalytics:\n  enabled: true\n  # ...\n</code></pre></p> <p>Phase 3: Add Sessions <pre><code>database: { ... }\nllm: { ... }\nanalytics: { ... }\nsession:\n  enabled: true\n  # ...\n</code></pre></p> <p>Phase 4: Add Scheduling <pre><code>database: { ... }\nllm: { ... }\nanalytics: { ... }\nsession: { ... }\nscheduling:\n  enabled: true\n  # ...\n</code></pre></p>"},{"location":"configuration/overview/#environment-variable-overrides","title":"Environment Variable Overrides","text":"<p>Any configuration value can be overridden with environment variables:</p> <pre><code># Database\nexport SQLATTE_DB_HOST=prod-db.company.com\nexport SQLATTE_DB_PASSWORD=secure-password\n\n# LLM\nexport SQLATTE_LLM_API_KEY=sk-ant-xxxxx\n\n# Session\nexport SQLATTE_SESSION_SECRET=random-secret-key\n\n# Email\nexport SQLATTE_SMTP_PASSWORD=app-password\n</code></pre> <p>Environment variables take precedence over <code>config.yaml</code>.</p>"},{"location":"configuration/overview/#configuration-validation","title":"Configuration Validation","text":"<p>SQLatte validates configuration on startup:</p> <pre><code># Run validation manually\npython -m sqlatte.config validate\n</code></pre> <p>Common validation errors:</p> <ul> <li>Missing required fields</li> <li>Invalid provider names</li> <li>Unreachable database</li> <li>Invalid API keys</li> <li>Port already in use</li> </ul>"},{"location":"configuration/overview/#security-best-practices","title":"Security Best Practices","text":"<p>Credentials in Config</p> <p>Never commit <code>config.yaml</code> with real credentials to version control!</p> <p>Recommended approach:</p> <ol> <li>Create <code>config.template.yaml</code> with placeholder values</li> <li>Add <code>config.yaml</code> to <code>.gitignore</code></li> <li>Use environment variables for secrets in production</li> <li>Store secrets in a secrets manager (AWS Secrets, Vault, etc.)</li> </ol> <p>Example <code>.gitignore</code>: <pre><code>config.yaml\n*.env\n.env.local\n</code></pre></p> <p>Example <code>config.template.yaml</code>: <pre><code>database:\n  provider: postgresql\n  host: ${DB_HOST}\n  password: ${DB_PASSWORD}  # Set via environment variable\n\nllm:\n  api_key: ${LLM_API_KEY}  # Set via environment variable\n</code></pre></p>"},{"location":"configuration/overview/#hot-reload","title":"Hot Reload","text":"<p>Some configuration changes don't require restart:</p> <p>Requires Restart: - Database provider change - Port change - Analytics enable/disable - Session enable/disable</p> <p>Hot Reloadable (with reload endpoint): - Runtime prompts (via admin UI) - LLM temperature/parameters - CORS settings</p> <p>Use the reload endpoint: <pre><code>curl -X POST http://localhost:5001/api/admin/reload-config\n</code></pre></p>"},{"location":"configuration/overview/#configuration-examples","title":"Configuration Examples","text":""},{"location":"configuration/overview/#e-commerce-setup","title":"E-commerce Setup","text":"<pre><code>database:\n  provider: postgresql\n  host: prod-db.company.com\n  database: ecommerce_prod\n\nanalytics:\n  enabled: true\n  # Separate analytics DB\n\nscheduling:\n  enabled: true\n  # Morning reports to team\n</code></pre>"},{"location":"configuration/overview/#multi-tenant-saas","title":"Multi-tenant SaaS","text":"<pre><code>session:\n  enabled: true\n  # User isolation required\n\nanalytics:\n  enabled: true\n  # Track per-tenant usage\n\ndatabase:\n  # Shared database with tenant_id\n</code></pre>"},{"location":"configuration/overview/#data-warehouse-queries","title":"Data Warehouse Queries","text":"<pre><code>database:\n  provider: bigquery\n  project_id: my-project\n\nllm:\n  provider: vertex\n  # Same GCP project\n\nanalytics:\n  enabled: false\n  # Keep it lightweight\n</code></pre>"},{"location":"configuration/overview/#next-steps","title":"Next Steps","text":"<ul> <li>Database Setup: Configure your database provider \u2192</li> <li>LLM Setup: Configure your LLM provider \u2192</li> <li>Full Reference: Complete config.yaml reference \u2192</li> <li>Advanced Features: Enable analytics, scheduling, etc. \u2192</li> </ul>"},{"location":"configuration/overview/#troubleshooting","title":"Troubleshooting","text":""},{"location":"configuration/overview/#configuration-not-loading","title":"Configuration not loading","text":"<p>Check file location and permissions: <pre><code>ls -l config.yaml\n</code></pre></p>"},{"location":"configuration/overview/#environment-variables-not-working","title":"Environment variables not working","text":"<p>Verify variable names match pattern: <pre><code>env | grep SQLATTE\n</code></pre></p>"},{"location":"configuration/overview/#validation-errors","title":"Validation errors","text":"<p>Run explicit validation: <pre><code>python -m sqlatte.config validate --verbose\n</code></pre></p>"},{"location":"configuration/overview/#changes-not-taking-effect","title":"Changes not taking effect","text":"<p>Some changes require restart: <pre><code># Stop and restart\npkill -f \"python app.py\"\npython app.py\n</code></pre></p>"},{"location":"features/analytics/","title":"Analytics &amp; Insights","text":"<p>AI-powered insights and usage analytics for data-driven decision making.</p>"},{"location":"features/analytics/#overview","title":"Overview","text":"<p>SQLatte provides two analytics systems:</p> <ol> <li>Query Analytics - Track usage, performance, history</li> <li>Insights Engine - AI-powered data analysis</li> </ol>"},{"location":"features/analytics/#insights-engine","title":"Insights Engine","text":""},{"location":"features/analytics/#what-it-does","title":"What It Does","text":"<p>Automatically analyzes query results and generates actionable insights.</p> <p>Example Query: \"Show daily sales last 7 days\"</p> <p>Insights Generated: - \ud83d\udcc8 Trend: Sales increased 15% over the week - \u26a0\ufe0f Anomaly: Thursday had unusually low sales (holiday) - \ud83d\udca1 Recommendation: Focus marketing on slow days</p>"},{"location":"features/analytics/#enable-insights","title":"Enable Insights","text":"<pre><code>insights:\n  enabled: true\n  mode: \"hybrid\"              # llm_only, statistical_only, hybrid\n  max_insights: 3             # Per query\n  include_statistical: true\n</code></pre>"},{"location":"features/analytics/#insight-modes","title":"Insight Modes","text":"<p>LLM Only - Pure AI analysis <pre><code>mode: \"llm_only\"\n</code></pre> - \u2705 Creative, context-aware - \u2705 Natural language explanations - \u26a0\ufe0f Higher LLM cost - \u26a0\ufe0f Slower (1-2 seconds)</p> <p>Statistical Only - Rule-based <pre><code>mode: \"statistical_only\"\n</code></pre> - \u2705 Fast (&lt;100ms) - \u2705 No LLM cost - \u2705 Consistent results - \u26a0\ufe0f Less context-aware</p> <p>Hybrid - Best of both (Recommended) <pre><code>mode: \"hybrid\"\n</code></pre> - \u2705 AI + statistical analysis - \u2705 Balanced cost/quality - \u2705 Fallback to statistical if LLM fails</p>"},{"location":"features/analytics/#insight-types","title":"Insight Types","text":"<p>Trend - Patterns over time <pre><code>\ud83d\udcc8 Sales increased 25% compared to last month\n</code></pre></p> <p>Anomaly - Unexpected values <pre><code>\u26a0\ufe0f Login attempts 10x higher than average (possible attack)\n</code></pre></p> <p>Summary - Key takeaways <pre><code>\ud83d\udcca Top 3 products account for 60% of revenue\n</code></pre></p> <p>Recommendation - Action items <pre><code>\ud83d\udca1 Consider restocking Product A (low inventory, high demand)\n</code></pre></p>"},{"location":"features/analytics/#query-analytics","title":"Query Analytics","text":""},{"location":"features/analytics/#what-gets-tracked","title":"What Gets Tracked","text":"<p>Query History: - User questions - Generated SQL - Execution time - Rows returned - Success/failure - Timestamp</p> <p>Performance Metrics: - Average execution time - Query volume - Success rate - Popular tables - User activity</p>"},{"location":"features/analytics/#enable-analytics","title":"Enable Analytics","text":"<pre><code>analytics:\n  enabled: true\n  storage: \"postgresql\"       # or \"memory\"\n\n  postgresql:\n    host: \"localhost\"\n    port: 5432\n    database: \"sqlatte_analytics\"\n    user: \"sqlatte\"\n    password: \"password\"\n\n  query_history_days: 90      # Retention\n</code></pre>"},{"location":"features/analytics/#analytics-dashboard","title":"Analytics Dashboard","text":"<p>Access: <code>http://localhost:8000/analytics</code></p> <p>Metrics Cards: - Total queries executed - Average execution time - Success rate (%) - Active users (if auth enabled)</p> <p>Charts: - Queries per day/hour - Execution time trends - Top 10 queries - Table usage heatmap - Success vs failure ratio</p>"},{"location":"features/analytics/#example-queries","title":"Example Queries","text":"<p>Most popular queries: <pre><code>SELECT question, COUNT(*) as count\nFROM query_history\nWHERE created_at &gt; NOW() - INTERVAL '7 days'\nGROUP BY question\nORDER BY count DESC\nLIMIT 10;\n</code></pre></p> <p>Slow queries: <pre><code>SELECT question, sql, execution_time_ms\nFROM query_history\nWHERE execution_time_ms &gt; 5000\nORDER BY execution_time_ms DESC\nLIMIT 20;\n</code></pre></p> <p>Daily query volume: <pre><code>SELECT \n  DATE(created_at) as date,\n  COUNT(*) as queries,\n  AVG(execution_time_ms) as avg_time\nFROM query_history\nGROUP BY DATE(created_at)\nORDER BY date DESC\nLIMIT 30;\n</code></pre></p>"},{"location":"features/analytics/#insight-examples","title":"Insight Examples","text":""},{"location":"features/analytics/#sales-analysis","title":"Sales Analysis","text":"<p>Query: \"Show daily sales last 30 days\"</p> <p>Insights: <pre><code>\ud83d\udcc8 Trend: Sales growing 12% month-over-month\n\u26a0\ufe0f Anomaly: Weekend sales 40% lower than weekdays\n\ud83d\udca1 Recommendation: Run weekend promotions to boost sales\n</code></pre></p>"},{"location":"features/analytics/#user-behavior","title":"User Behavior","text":"<p>Query: \"Show login failures by IP today\"</p> <p>Insights: <pre><code>\u26a0\ufe0f Anomaly: IP 192.168.1.100 has 500 failed attempts (possible brute force)\n\ud83d\udcca Summary: 95% of failures from 3 IPs\n\ud83d\udca1 Recommendation: Block suspicious IPs, enable rate limiting\n</code></pre></p>"},{"location":"features/analytics/#inventory-management","title":"Inventory Management","text":"<p>Query: \"Show products with low stock\"</p> <p>Insights: <pre><code>\u26a0\ufe0f Anomaly: 15 products below reorder threshold\n\ud83d\udca1 Recommendation: Restock top 5 sellers immediately (high demand)\n\ud83d\udcca Summary: $50K potential lost revenue if out of stock\n</code></pre></p>"},{"location":"features/analytics/#configuration","title":"Configuration","text":""},{"location":"features/analytics/#full-configuration","title":"Full Configuration","text":"<pre><code>insights:\n  enabled: true\n  mode: \"hybrid\"\n  max_insights: 3\n  include_statistical: true\n\n  # Advanced settings\n  min_confidence: 0.7         # Filter low-confidence insights\n  context_window: 100         # Rows to analyze\n  llm_timeout: 10             # Seconds\n\nanalytics:\n  enabled: true\n  storage: \"postgresql\"\n\n  postgresql:\n    host: \"postgres\"\n    port: 5432\n    database: \"sqlatte_analytics\"\n    user: \"sqlatte\"\n    password: \"${ANALYTICS_PASSWORD}\"\n\n  # Retention\n  query_history_days: 90\n  execution_logs_days: 30\n\n  # Performance\n  batch_size: 100\n  flush_interval_seconds: 60\n</code></pre>"},{"location":"features/analytics/#best-practices","title":"Best Practices","text":""},{"location":"features/analytics/#insights","title":"Insights","text":"<ul> <li>\u2705 Enable hybrid mode for best results</li> <li>\u2705 Set <code>max_insights: 3</code> to avoid overwhelming users</li> <li>\u2705 Review insights for accuracy before relying on them</li> <li>\u26a0\ufe0f Don't use insights as sole decision-making tool</li> </ul>"},{"location":"features/analytics/#analytics","title":"Analytics","text":"<ul> <li>\u2705 Use PostgreSQL storage for production</li> <li>\u2705 Set appropriate retention (30-90 days)</li> <li>\u2705 Monitor database size regularly</li> <li>\u2705 Create indexes for performance</li> <li>\u26a0\ufe0f Don't track sensitive data (enable anonymization if needed)</li> </ul>"},{"location":"features/analytics/#performance","title":"Performance","text":"<ul> <li>\u2705 Use statistical mode for real-time dashboards</li> <li>\u2705 Cache insights for frequently-run queries</li> <li>\u2705 Limit context window for large result sets</li> <li>\u26a0\ufe0f LLM insights add 1-2 seconds to response time</li> </ul>"},{"location":"features/analytics/#privacy-compliance","title":"Privacy &amp; Compliance","text":""},{"location":"features/analytics/#anonymize-data","title":"Anonymize Data","text":"<pre><code>analytics:\n  anonymize_users: true       # Hash user IDs\n  anonymize_queries: false    # Keep queries readable\n  anonymize_results: false    # Keep results readable\n</code></pre>"},{"location":"features/analytics/#gdpr-compliance","title":"GDPR Compliance","text":"<p>Delete user data: <pre><code>DELETE FROM query_history WHERE user_id = 'user123';\nDELETE FROM execution_logs WHERE user_id = 'user123';\n</code></pre></p> <p>Export user data: <pre><code>SELECT * FROM query_history \nWHERE user_id = 'user123'\nORDER BY created_at DESC;\n</code></pre></p>"},{"location":"features/analytics/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/analytics/#no-insights-generated","title":"No Insights Generated","text":"<pre><code># Check insights are enabled\ninsights:\n  enabled: true\n\n# Check LLM provider is working\ncurl http://localhost:8000/health\n\n# Check logs for errors\ndocker-compose logs -f sqlatte | grep insights\n</code></pre>"},{"location":"features/analytics/#analytics-dashboard-empty","title":"Analytics Dashboard Empty","text":"<pre><code># Verify analytics enabled\nanalytics:\n  enabled: true\n\n# Check database connection\ndocker-compose exec postgres psql -U sqlatte -d sqlatte_analytics\n\n# Check tables exist\n\\dt\n\n# Check data exists\nSELECT COUNT(*) FROM query_history;\n</code></pre>"},{"location":"features/analytics/#slow-performance","title":"Slow Performance","text":"<pre><code># Add database indexes\nCREATE INDEX idx_query_history_created ON query_history(created_at);\nCREATE INDEX idx_query_history_user ON query_history(user_id);\n\n# Reduce retention\nanalytics:\n  query_history_days: 30  # Instead of 90\n\n# Use statistical mode only\ninsights:\n  mode: \"statistical_only\"\n</code></pre>"},{"location":"features/analytics/#monitoring","title":"Monitoring","text":""},{"location":"features/analytics/#database-size","title":"Database Size","text":"<pre><code>-- Total size\nSELECT pg_size_pretty(pg_database_size('sqlatte_analytics'));\n\n-- Table sizes\nSELECT \n  tablename,\n  pg_size_pretty(pg_total_relation_size(tablename::regclass))\nFROM pg_tables\nWHERE schemaname = 'public';\n</code></pre>"},{"location":"features/analytics/#query-volume","title":"Query Volume","text":"<pre><code>-- Today's queries\nSELECT COUNT(*) FROM query_history \nWHERE created_at &gt; CURRENT_DATE;\n\n-- Last 7 days by day\nSELECT \n  DATE(created_at) as date,\n  COUNT(*) as queries\nFROM query_history\nWHERE created_at &gt; CURRENT_DATE - INTERVAL '7 days'\nGROUP BY DATE(created_at);\n</code></pre>"},{"location":"features/analytics/#limitations","title":"Limitations","text":"<p>Insights Engine: - \u26a0\ufe0f Works best with time-series data - \u26a0\ufe0f Limited to numeric/date columns for trends - \u26a0\ufe0f May miss complex patterns - \u26a0\ufe0f Requires sufficient data (minimum 5-10 rows)</p> <p>Analytics: - \u26a0\ufe0f PostgreSQL required for persistence - \u26a0\ufe0f Not shared across multiple instances (use shared DB) - \u26a0\ufe0f No real-time streaming (batch updates)</p> <p>Next: Runtime Prompts | Configuration</p>"},{"location":"features/barista/","title":"Barista Personality","text":"<p>SQLatte's unique conversational AI personality that makes data analytics feel like ordering your favorite coffee.</p>"},{"location":"features/barista/#overview","title":"Overview","text":"<p>Barista Personality is SQLatte's friendly, approachable communication style that: - Makes data queries feel conversational - Uses coffee metaphors when appropriate - Balances helpfulness with professionalism - Adapts to user needs</p>"},{"location":"features/barista/#core-personality-traits","title":"Core Personality Traits","text":""},{"location":"features/barista/#1-friendly-approachable","title":"1. Friendly &amp; Approachable","text":"<p>Like a barista who knows your order:</p> <pre><code>User: \"Show me sales\"\nSQLatte: \"\u2615 Coming right up! Here are your sales numbers...\"\n</code></pre> <p>Not: <pre><code>SQLatte: \"Query executed successfully. Results:\"\n</code></pre></p>"},{"location":"features/barista/#2-context-aware","title":"2. Context-Aware","text":"<p>Remembers conversation history:</p> <pre><code>User: \"Show top customers\"\nSQLatte: [Returns top 10 customers]\n\nUser: \"What about last month?\"\nSQLatte: \"Here are last month's top customers...\"\n         (Understands \"last month\" refers to customers)\n</code></pre>"},{"location":"features/barista/#3-helpful-guidance","title":"3. Helpful Guidance","text":"<p>Guides users when they're stuck:</p> <pre><code>User: \"I need data\"\nSQLatte: \"I'd love to help! To brew up your data, I'll need to know:\n         - Which table(s) should I look at?\n         - What specific information are you looking for?\n\n         Try asking: 'Show me orders from last week'\"\n</code></pre>"},{"location":"features/barista/#4-coffee-metaphors-optional","title":"4. Coffee Metaphors (Optional)","text":"<p>Used sparingly and naturally:</p> <pre><code>\u2705 Good: \"Let me brew up those numbers for you\"\n\u2705 Good: \"Here's your data, served fresh!\"\n\u26a0\ufe0f Too much: \"Time to espresso these queries and filter out the grounds!\"\n</code></pre>"},{"location":"features/barista/#when-it-activates","title":"When It Activates","text":""},{"location":"features/barista/#chat-mode-non-sql-questions","title":"Chat Mode (Non-SQL Questions)","text":"<p>Greetings: <pre><code>User: \"Hello!\"\nSQLatte: \"Hi there! \u2615 I'm SQLatte, your data assistant. \n         Ask me anything about your database!\"\n</code></pre></p> <p>Help requests: <pre><code>User: \"How do I use this?\"\nSQLatte: \"I can help you query your database using natural language.\n         Just ask questions like:\n         - 'Show me top products'\n         - 'What were sales yesterday?'\n         - 'List all customers'\n\n         Select a table to get started!\"\n</code></pre></p> <p>General questions: <pre><code>User: \"What's the weather?\"\nSQLatte: \"I'm focused on helping you with data queries, but I appreciate\n         the chat! \u2615 Is there anything in your database I can help you find?\"\n</code></pre></p>"},{"location":"features/barista/#sql-mode-data-questions","title":"SQL Mode (Data Questions)","text":"<p>Before query execution: <pre><code>User: \"Show me orders\"\nSQLatte: \"Got it! Let me pull up those orders for you...\"\n</code></pre></p> <p>After query execution: <pre><code>SQLatte: \"Here are your orders! I found 150 results.\n\n         \ud83d\udcca Quick insight: Most orders were placed this week.\n\n         Want to filter by date or customer?\"\n</code></pre></p>"},{"location":"features/barista/#customizing-personality","title":"Customizing Personality","text":""},{"location":"features/barista/#via-admin-panel","title":"Via Admin Panel","text":"<ol> <li>Go to <code>http://localhost:8000/admin</code></li> <li>Click Prompts tab</li> <li>Select Barista Personality</li> <li>Edit prompt</li> <li>Save (applies immediately!)</li> </ol>"},{"location":"features/barista/#via-config-file","title":"Via Config File","text":"<pre><code>prompts:\n  barista_personality: |\n    You are SQLatte \u2615 - a friendly data assistant.\n\n    Personality:\n    - Helpful and approachable\n    - Professional but warm\n    - Use coffee metaphors occasionally\n    - Guide users when they're lost\n\n    When users ask non-data questions:\n    - Respond naturally\n    - Offer to help with data queries\n    - Be concise but friendly\n</code></pre>"},{"location":"features/barista/#personality-variations","title":"Personality Variations","text":""},{"location":"features/barista/#1-professional-formal","title":"1. Professional (Formal)","text":"<p>For: Enterprise, formal environments</p> <pre><code>barista_personality: |\n  You are SQLatte - a professional data assistant.\n\n  Communication style:\n  - Clear and concise\n  - Business-focused language\n  - No metaphors or casual language\n  - Direct answers\n\n  Example:\n  User: \"Hello\"\n  Response: \"Welcome. I'm ready to assist with your data queries.\"\n</code></pre>"},{"location":"features/barista/#2-playful-casual","title":"2. Playful (Casual)","text":"<p>For: Startups, creative teams</p> <pre><code>barista_personality: |\n  You are SQLatte \u2615 - the coolest data barista!\n\n  Vibe:\n  - Fun and energetic\n  - Use coffee puns liberally\n  - Emojis welcome\n  - Keep it light\n\n  Example:\n  User: \"Show me sales\"\n  Response: \"Time to espresso those numbers! \u2615\u2728\"\n</code></pre>"},{"location":"features/barista/#3-technical-expert","title":"3. Technical (Expert)","text":"<p>For: Data teams, developers</p> <pre><code>barista_personality: |\n  You are SQLatte - an advanced SQL assistant.\n\n  Communication:\n  - Technical terminology expected\n  - Explain SQL logic when helpful\n  - Suggest query optimizations\n  - Reference table schemas\n\n  Example:\n  User: \"Show me sales\"\n  Response: \"Executing aggregation query on orders table.\n           Using index on order_date for optimal performance.\"\n</code></pre>"},{"location":"features/barista/#4-educational-teaching","title":"4. Educational (Teaching)","text":"<p>For: Students, learners</p> <pre><code>barista_personality: |\n  You are SQLatte - a patient data tutor.\n\n  Teaching style:\n  - Explain SQL concepts\n  - Break down queries step-by-step\n  - Encourage questions\n  - Provide learning resources\n\n  Example:\n  User: \"Show me sales\"\n  Response: \"Great question! I'll query the 'orders' table,\n           which contains all sales transactions. The SQL I'm generating\n           will SELECT revenue data and SUM it for you.\"\n</code></pre>"},{"location":"features/barista/#examples-by-scenario","title":"Examples by Scenario","text":""},{"location":"features/barista/#first-time-user","title":"First-Time User","text":"<pre><code>User: [Opens SQLatte]\nSQLatte: \"Welcome to SQLatte! \u2615\n\n         I'm here to help you explore your data using natural language.\n         No SQL knowledge required!\n\n         To get started:\n         1. Select a table from the dropdown\n         2. Ask a question like 'Show me all records'\n         3. I'll generate the SQL and show results\n\n         What would you like to explore?\"\n</code></pre>"},{"location":"features/barista/#error-handling","title":"Error Handling","text":"<pre><code>User: \"Show me sales\" [but no tables selected]\nSQLatte: \"I'd love to help with that! \u2615\n\n         First, please select which table(s) I should look at.\n         Then I can brew up those sales numbers for you!\"\n</code></pre>"},{"location":"features/barista/#follow-up-questions","title":"Follow-Up Questions","text":"<pre><code>User: \"Show top 10 customers\"\nSQLatte: [Shows results]\n\nUser: \"What about their revenue?\"\nSQLatte: \"Good question! Here are those same customers with their total revenue...\"\n</code></pre>"},{"location":"features/barista/#complex-query-success","title":"Complex Query Success","text":"<pre><code>User: \"Show me customers who bought product A but not product B\"\nSQLatte: \"That's an interesting analysis! \n\n         I used a JOIN with a NOT EXISTS clause to find customers who\n         purchased product A but never bought product B.\n\n         Found 45 customers matching your criteria.\"\n</code></pre>"},{"location":"features/barista/#dos-and-donts","title":"Do's and Don'ts","text":""},{"location":"features/barista/#dos","title":"\u2705 Do's","text":"<ul> <li>Be helpful and guide users</li> <li>Remember conversation context</li> <li>Explain errors in plain language</li> <li>Celebrate successful queries</li> <li>Offer suggestions when stuck</li> <li>Use natural, conversational language</li> <li>Adapt tone to user's style</li> </ul>"},{"location":"features/barista/#donts","title":"\u274c Don'ts","text":"<ul> <li>Don't overwhelm with technical jargon</li> <li>Don't use coffee metaphors excessively</li> <li>Don't ignore user's actual question</li> <li>Don't be condescending</li> <li>Don't assume user's SQL knowledge</li> <li>Don't make up data or capabilities</li> <li>Don't break character into \"AI mode\"</li> </ul>"},{"location":"features/barista/#conversation-memory","title":"Conversation Memory","text":"<p>Barista personality leverages conversation memory:</p> <pre><code>Conversation 1:\nUser: \"Show me orders\"\nSQLatte: \"Here are your orders...\"\n\nUser: \"Filter by last week\"\nSQLatte: \"Here are last week's orders...\"\n         (Remembers we're talking about orders)\n\nUser: \"How many total?\"\nSQLatte: \"There were 127 orders last week\"\n         (Still in context)\n</code></pre>"},{"location":"features/barista/#multi-language-support-future","title":"Multi-Language Support (Future)","text":"<p>Adapt personality to different languages:</p> <pre><code># Spanish\nbarista_personality: |\n  Eres SQLatte \u2615 - un asistente de datos amigable.\n  Habla de manera clara y servicial...\n\n# Japanese  \nbarista_personality: |\n  \u3042\u306a\u305f\u306fSQLatte \u2615 \u3067\u3059 - \u89aa\u5207\u306a\u30c7\u30fc\u30bf\u30a2\u30b7\u30b9\u30bf\u30f3\u30c8\u3002\n  \u4e01\u5be7\u3067\u5206\u304b\u308a\u3084\u3059\u304f...\n</code></pre>"},{"location":"features/barista/#testing-personality","title":"Testing Personality","text":""},{"location":"features/barista/#test-scenarios","title":"Test Scenarios","text":"<p>Greeting: <pre><code>User: \"Hi\"\nExpected: Friendly welcome with guidance\n</code></pre></p> <p>Help: <pre><code>User: \"How do I use this?\"\nExpected: Clear instructions with examples\n</code></pre></p> <p>Error: <pre><code>User: \"Show me sales\" [no tables selected]\nExpected: Helpful error message, not technical error\n</code></pre></p> <p>Follow-up: <pre><code>User: \"Show customers\"\nUser: \"What about their orders?\"\nExpected: Context-aware response\n</code></pre></p>"},{"location":"features/barista/#monitoring-personality","title":"Monitoring Personality","text":""},{"location":"features/barista/#user-feedback","title":"User Feedback","text":"<p>Track if users respond well: - Repeat users (good sign) - Positive feedback - Fewer \"help\" requests - Natural conversation flow</p>"},{"location":"features/barista/#analytics","title":"Analytics","text":"<pre><code>-- Average conversation length\nSELECT AVG(message_count) \nFROM conversation_sessions;\n\n-- Questions vs chat messages\nSELECT \n  SUM(CASE WHEN intent='sql' THEN 1 ELSE 0 END) as sql_questions,\n  SUM(CASE WHEN intent='chat' THEN 1 ELSE 0 END) as chat_messages\nFROM query_history;\n</code></pre>"},{"location":"features/barista/#best-practices","title":"Best Practices","text":""},{"location":"features/barista/#for-different-audiences","title":"For Different Audiences","text":"<p>Business Users: - Focus on insights, not SQL - Use business terminology - Explain results clearly</p> <p>Data Analysts: - Show SQL queries - Mention optimizations - Technical language OK</p> <p>Executives: - High-level summaries - Key metrics highlighted - Action-oriented</p> <p>Developers: - Expose SQL logic - Explain query plans - Suggest improvements</p>"},{"location":"features/barista/#evolution","title":"Evolution","text":"<p>Barista personality improves over time:</p> <ol> <li>User feedback - Learn what works</li> <li>Conversation patterns - Adapt to common questions</li> <li>Domain knowledge - Understand business context</li> <li>Error handling - Better guidance when stuck</li> </ol> <p>Next: Runtime Prompts | Dashboard</p>"},{"location":"features/dashboard/","title":"Dashboard","text":"<p>SQLatte's unified dashboard brings all features together in one interface.</p>"},{"location":"features/dashboard/#overview","title":"Overview","text":"<p>The dashboard provides a single-page interface for: - Natural language queries - Scheduled reports - Analytics metrics - Admin configuration</p> <p>Access: <code>http://localhost:8000</code></p>"},{"location":"features/dashboard/#tabs","title":"Tabs","text":""},{"location":"features/dashboard/#1-home-tab","title":"1. Home Tab","text":"<p>Landing page with quick links and status overview.</p> <p>Features: - System health indicators (DB, LLM, services) - Recent activity summary - Quick action buttons - Feature highlights</p>"},{"location":"features/dashboard/#2-assistant-tab","title":"2. Assistant Tab","text":"<p>Embedded standard widget for natural language queries.</p> <p>Features: - Full widget functionality - Query history - Favorites - Visualizations - Same as standalone widget</p> <p>Use: Click \"Assistant\" tab and start asking questions.</p>"},{"location":"features/dashboard/#3-demo-tab","title":"3. Demo Tab","text":"<p>Interactive examples and tutorials.</p> <p>Features: - Sample queries to try - Tutorial walkthroughs - Feature showcase - Example database (optional)</p> <p>Use: Learn SQLatte by trying pre-built examples.</p>"},{"location":"features/dashboard/#4-analytics-tab","title":"4. Analytics Tab","text":"<p>Query performance and usage metrics dashboard.</p> <p>Requires: <code>analytics.enabled: true</code> in config</p> <p>Metrics: - Total queries executed - Average execution time - Success rate - Top queries - Table usage - Insights generated</p> <p>Charts: - Query volume trends - Performance over time - Success/failure ratio - User activity (if auth enabled)</p> <p>Use: Monitor system performance and user behavior.</p>"},{"location":"features/dashboard/#5-schedules-tab","title":"5. Schedules Tab","text":"<p>Manage scheduled queries and automated reports.</p> <p>Requires: <code>scheduler.enabled: true</code> in config</p> <p>Features: - Create new schedules - View all schedules - Edit/delete schedules - Execution history - Email delivery status</p> <p>Use: Automate recurring reports without manual queries.</p>"},{"location":"features/dashboard/#6-configuration-tab","title":"6. Configuration Tab","text":"<p>Admin panel embedded in dashboard.</p> <p>Features: - All admin panel functionality - Provider settings - Prompts editor - Email/SMTP config - System info</p> <p>Use: Configure SQLatte without leaving dashboard.</p>"},{"location":"features/dashboard/#navigation","title":"Navigation","text":""},{"location":"features/dashboard/#sidebar-navigation","title":"Sidebar Navigation","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u2615 SQLatte      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \ud83c\udfe0 Home         \u2502\n\u2502 \ud83d\udcac Assistant    \u2502\n\u2502 \ud83c\udfaf Demo         \u2502\n\u2502 \ud83d\udcca Analytics    \u2502\n\u2502 \ud83d\udcc5 Schedules    \u2502\n\u2502 \u2699\ufe0f  Config      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Responsive: Collapses to hamburger menu on mobile.</p>"},{"location":"features/dashboard/#user-experience","title":"User Experience","text":""},{"location":"features/dashboard/#first-time-user","title":"First-Time User","text":"<ol> <li>Home - See what SQLatte can do</li> <li>Demo - Try sample queries</li> <li>Assistant - Ask your own questions</li> <li>Schedules - Automate reports (optional)</li> </ol>"},{"location":"features/dashboard/#daily-user","title":"Daily User","text":"<ol> <li>Assistant - Quick queries</li> <li>Analytics - Check performance</li> <li>Schedules - Manage reports</li> </ol>"},{"location":"features/dashboard/#admin","title":"Admin","text":"<ol> <li>Configuration - Update settings</li> <li>Analytics - Monitor usage</li> <li>Schedules - Review automations</li> </ol>"},{"location":"features/dashboard/#deployment-modes","title":"Deployment Modes","text":""},{"location":"features/dashboard/#standalone-dashboard","title":"Standalone Dashboard","text":"<p>Full dashboard with all tabs:</p> <pre><code># config.yaml\napp:\n  host: 0.0.0.0\n  port: 8000\n\n# Access: http://localhost:8000\n</code></pre> <p>Best for: Internal tools, team analytics</p>"},{"location":"features/dashboard/#widget-only","title":"Widget-Only","text":"<p>Embed widget without dashboard:</p> <pre><code>&lt;!-- No dashboard, just widget --&gt;\n&lt;script src=\"http://localhost:8000/static/js/sqlatte-badge.js\"&gt;&lt;/script&gt;\n</code></pre> <p>Best for: External sites, customer-facing</p>"},{"location":"features/dashboard/#hybrid","title":"Hybrid","text":"<p>Dashboard for admins, widget for users:</p> <pre><code>Dashboard (http://localhost:8000) \u2192 Admin access\nWidget (embedded) \u2192 User access\n</code></pre> <p>Best for: SaaS products, enterprise</p>"},{"location":"features/dashboard/#customization","title":"Customization","text":""},{"location":"features/dashboard/#disable-tabs","title":"Disable Tabs","text":"<p>Hide unnecessary tabs:</p> <pre><code># config.yaml\ndashboard:\n  enabled_tabs:\n    - home\n    - assistant\n    # - demo      # Disabled\n    # - analytics # Disabled\n    - schedules\n    - config\n</code></pre>"},{"location":"features/dashboard/#tips","title":"Tips","text":""},{"location":"features/dashboard/#performance","title":"Performance","text":"<ul> <li>Analytics tab may be slow with large datasets</li> <li>Use filters to limit date range</li> <li>Enable PostgreSQL storage for better performance</li> </ul>"},{"location":"features/dashboard/#workflow","title":"Workflow","text":"<ul> <li>Pin frequently used queries in Assistant tab</li> <li>Use Schedules for recurring reports</li> <li>Check Analytics weekly for insights</li> </ul>"},{"location":"features/dashboard/#organization","title":"Organization","text":"<ul> <li>Use descriptive schedule names</li> <li>Tag queries with keywords (future feature)</li> <li>Archive old schedules</li> </ul>"},{"location":"features/dashboard/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/dashboard/#tab-not-loading","title":"Tab Not Loading","text":"<pre><code># Check feature is enabled\n# Example: Analytics tab requires analytics.enabled: true\n\n# Check logs\ndocker-compose logs -f sqlatte\n</code></pre>"},{"location":"features/dashboard/#slow-performance","title":"Slow Performance","text":"<pre><code># Enable PostgreSQL for analytics\nanalytics:\n  storage: \"postgresql\"\n\n# Add database indexes\n# Reduce retention period\n</code></pre>"},{"location":"features/dashboard/#empty-dashboard","title":"Empty Dashboard","text":"<pre><code># Verify config.yaml is loaded\n# Check database connection\n# Review browser console for errors\n</code></pre> <p>Next: Scheduled Queries | Analytics &amp; Insights</p>"},{"location":"features/runtime-prompts/","title":"Runtime Prompts","text":"<p>Customize SQLatte's AI behavior by editing prompts directly from the admin panel.</p>"},{"location":"features/runtime-prompts/#overview","title":"Overview","text":"<p>SQLatte uses 4 customizable prompts to control AI behavior:</p> <ol> <li>Intent Detection - Determine if question needs SQL or chat</li> <li>Barista Personality - Chat response tone and style</li> <li>SQL Generation - Natural language to SQL rules</li> <li>Insights Generation - Data analysis patterns</li> </ol> <p>Edit anytime: Changes apply immediately with hot reload (no restart needed).</p>"},{"location":"features/runtime-prompts/#quick-start","title":"Quick Start","text":""},{"location":"features/runtime-prompts/#edit-prompts","title":"Edit Prompts","text":"<ol> <li>Go to <code>http://localhost:8000/admin</code></li> <li>Click Prompts tab</li> <li>Select prompt to edit</li> <li>Modify text</li> <li>Click Save</li> <li>\u2705 Changes applied instantly!</li> </ol>"},{"location":"features/runtime-prompts/#the-4-prompts","title":"The 4 Prompts","text":""},{"location":"features/runtime-prompts/#1-intent-detection","title":"1. Intent Detection","text":"<p>Purpose: Decide if question requires SQL query or is general chat.</p> <p>Default behavior: - \"Show me sales\" \u2192 SQL - \"Hello!\" \u2192 Chat - \"What tables do I have?\" \u2192 SQL (metadata query)</p> <p>When to customize: - Add domain-specific keywords - Handle special cases - Adjust confidence thresholds</p> <p>Example customization: <pre><code>If question contains \"forecast\" or \"predict\" \u2192 intent: chat\n(Because we don't have forecasting capability)\n</code></pre></p>"},{"location":"features/runtime-prompts/#2-barista-personality","title":"2. Barista Personality","text":"<p>Purpose: Define chat response tone and style.</p> <p>Default personality: - Friendly and helpful - Uses coffee metaphors occasionally - Concise but warm - Professional yet approachable</p> <p>When to customize: - Match brand voice - Industry-specific tone (e.g., medical, legal) - Language/cultural adaptation - Formality level</p> <p>Example customization: <pre><code># More formal\nYou are SQLatte - a professional data assistant.\nBe concise and business-focused.\nAvoid metaphors. Provide direct answers.\n\n# More playful\nYou are SQLatte \u2615 - the coolest data barista around!\nServe up insights with a side of fun.\nUse coffee puns liberally. Keep it light!\n</code></pre></p>"},{"location":"features/runtime-prompts/#3-sql-generation","title":"3. SQL Generation","text":"<p>Purpose: Rules for converting natural language to SQL.</p> <p>Key sections: - Database-specific syntax - JOIN strategies - Performance optimizations - Partition handling</p> <p>When to customize: - Add database-specific optimizations - Enforce company SQL standards - Handle special table structures - Add partition column rules</p> <p>Example customization: <pre><code># Add partition optimization for your database\n\u26a1 PERFORMANCE RULES:\n- Table 'events' has partition column 'event_date'\n- ALWAYS filter: WHERE event_date &gt;= '2025-01-01'\n- Table 'logs' has partition column 'dt' (format: YYYYMMDD)\n- ALWAYS filter: WHERE dt &gt;= '20250101'\n\n# Add company standards\nCOMPANY STANDARDS:\n- Use table aliases: SELECT e.* FROM events e\n- Always add LIMIT (max 1000 rows)\n- Prefer EXISTS over IN for subqueries\n</code></pre></p>"},{"location":"features/runtime-prompts/#4-insights-generation","title":"4. Insights Generation","text":"<p>Purpose: Rules for analyzing query results and generating insights.</p> <p>Insight types: - Trends (increasing/decreasing) - Anomalies (outliers, unexpected values) - Summaries (key takeaways) - Recommendations (actions to take)</p> <p>When to customize: - Add domain-specific patterns - Adjust insight priorities - Change severity thresholds - Focus on specific metrics</p> <p>Example customization: <pre><code># E-commerce focus\nLook for patterns in:\n- Conversion rate changes\n- Cart abandonment spikes\n- Revenue per customer trends\n- Product performance shifts\n\n# Security focus\nPrioritize:\n- Unusual login patterns\n- Access anomalies\n- Failed authentication spikes\n- Suspicious IP addresses\n</code></pre></p>"},{"location":"features/runtime-prompts/#template-variables","title":"Template Variables","text":""},{"location":"features/runtime-prompts/#available-variables","title":"Available Variables","text":"<p>All prompts support template variables:</p> Variable Description Available In <code>{schema_info}</code> Table schemas Intent, SQL Generation <code>{question}</code> User's question All prompts <code>{user_question}</code> Original question Insights <code>{sql_query}</code> Generated SQL Insights <code>{data_preview}</code> Result sample Insights <p>Usage: <pre><code>sql_generation: |\n  Schema: {schema_info}\n  Question: {question}\n\n  Generate SQL based on the schema and question.\n</code></pre></p>"},{"location":"features/runtime-prompts/#prompt-management","title":"Prompt Management","text":""},{"location":"features/runtime-prompts/#save-restore","title":"Save &amp; Restore","text":"<p>Save prompt: - Edit in admin panel - Click Save - Stored in database (if analytics enabled)</p> <p>Reset to default: - Click Reset to Default - Restores original prompt - Previous custom prompt lost</p> <p>Export/Import: <pre><code># Export current prompts\ncurl http://localhost:8000/admin/prompts/export &gt; prompts.yaml\n\n# Import prompts\ncurl -X POST http://localhost:8000/admin/prompts/import \\\n  -F \"file=@prompts.yaml\"\n</code></pre></p>"},{"location":"features/runtime-prompts/#version-control","title":"Version Control","text":"<p>Keep prompts in version control:</p> <pre><code># config.yaml\nprompts:\n  intent_detection: |\n    [Your custom prompt]\n\n  sql_generation: |\n    [Your custom prompt]\n</code></pre> <p>Commit to git: <pre><code>git add config.yaml\ngit commit -m \"Update SQL generation prompt for partition optimization\"\n</code></pre></p>"},{"location":"features/runtime-prompts/#best-practices","title":"Best Practices","text":""},{"location":"features/runtime-prompts/#editing-prompts","title":"Editing Prompts","text":"<ul> <li>\u2705 Test changes with sample queries</li> <li>\u2705 Make small, incremental changes</li> <li>\u2705 Document why you made changes</li> <li>\u2705 Keep backup of original prompts</li> <li>\u26a0\ufe0f Don't remove template variable placeholders</li> <li>\u26a0\ufe0f Don't make prompts too long (LLM token limits)</li> </ul>"},{"location":"features/runtime-prompts/#sql-generation","title":"SQL Generation","text":"<ul> <li>\u2705 Add database-specific optimizations</li> <li>\u2705 Include partition column rules</li> <li>\u2705 Specify LIMIT clause requirements</li> <li>\u2705 Add JOIN strategy guidance</li> <li>\u26a0\ufe0f Don't over-constrain (reduces flexibility)</li> </ul>"},{"location":"features/runtime-prompts/#barista-personality","title":"Barista Personality","text":"<ul> <li>\u2705 Match your brand voice</li> <li>\u2705 Consider your audience</li> <li>\u2705 Be consistent with tone</li> <li>\u26a0\ufe0f Don't be overly casual in formal contexts</li> </ul>"},{"location":"features/runtime-prompts/#insights-generation","title":"Insights Generation","text":"<ul> <li>\u2705 Focus on actionable insights</li> <li>\u2705 Prioritize business-relevant patterns</li> <li>\u2705 Set appropriate severity levels</li> <li>\u26a0\ufe0f Don't generate too many insights (max 3)</li> </ul>"},{"location":"features/runtime-prompts/#examples","title":"Examples","text":""},{"location":"features/runtime-prompts/#e-commerce-optimization","title":"E-Commerce Optimization","text":"<p>SQL Generation prompt: <pre><code>sql_generation: |\n  E-COMMERCE RULES:\n  - Table 'orders' has partition 'order_date' (DATE)\n  - ALWAYS filter: WHERE order_date &gt;= CURRENT_DATE - 30\n  - Calculate conversion rate: orders / sessions\n  - Include customer_id for attribution\n\n  JOINS:\n  - orders \u27f7 customers ON customer_id\n  - orders \u27f7 products ON product_id\n  - orders \u27f7 sessions ON session_id\n</code></pre></p>"},{"location":"features/runtime-prompts/#security-monitoring","title":"Security Monitoring","text":"<p>Insights Generation prompt: <pre><code>insights_generation: |\n  SECURITY FOCUS:\n\n  High Priority Patterns:\n  - Failed login &gt; 10 attempts \u2192 CRITICAL anomaly\n  - New IP for existing user \u2192 WARNING\n  - Access outside business hours \u2192 INFO\n\n  Generate insights as:\n  TYPE: security_alert\n  SEVERITY: critical/warning/info\n  MESSAGE: [actionable description]\n</code></pre></p>"},{"location":"features/runtime-prompts/#healthcare-analytics","title":"Healthcare Analytics","text":"<p>Barista Personality prompt: <pre><code>barista_personality: |\n  You are SQLatte - a HIPAA-compliant data assistant for healthcare.\n\n  Guidelines:\n  - Professional and empathetic tone\n  - Never reference patient data in responses\n  - Use medical terminology appropriately\n  - Privacy is paramount\n\n  When users ask non-data questions:\n  - Respond helpfully but concisely\n  - Redirect to data queries when appropriate\n</code></pre></p>"},{"location":"features/runtime-prompts/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/runtime-prompts/#changes-not-applied","title":"Changes Not Applied","text":"<pre><code># Check analytics is enabled (required for persistence)\nanalytics:\n  enabled: true\n\n# Verify save was successful (check logs)\ndocker-compose logs -f sqlatte | grep prompt\n\n# Try hard refresh in browser\nCtrl+Shift+R\n</code></pre>"},{"location":"features/runtime-prompts/#prompt-too-long","title":"Prompt Too Long","text":"<pre><code># Error: Token limit exceeded\n# Solution: Shorten prompt or increase max_tokens\n\nllm:\n  anthropic:\n    max_tokens: 8192  # Increase from 4096\n</code></pre>"},{"location":"features/runtime-prompts/#variables-not-working","title":"Variables Not Working","text":"<pre><code># Ensure correct syntax: {variable_name}\n# Not: {{variable_name}} or $variable_name\n\n# Check variable is available for that prompt type\n# Example: {sql_query} only available in insights prompt\n</code></pre>"},{"location":"features/runtime-prompts/#advanced-usage","title":"Advanced Usage","text":""},{"location":"features/runtime-prompts/#multi-tenant-prompts","title":"Multi-Tenant Prompts","text":"<p>Different prompts per customer (future feature):</p> <pre><code>prompts:\n  customer_a:\n    sql_generation: |\n      [Customer A specific rules]\n\n  customer_b:\n    sql_generation: |\n      [Customer B specific rules]\n</code></pre>"},{"location":"features/runtime-prompts/#ab-testing-prompts","title":"A/B Testing Prompts","text":"<p>Test different prompts to find best performance:</p> <pre><code># Route 50% to prompt_v1, 50% to prompt_v2\nif random.random() &lt; 0.5:\n    use_prompt(\"sql_generation_v1\")\nelse:\n    use_prompt(\"sql_generation_v2\")\n\n# Track which performs better\n</code></pre>"},{"location":"features/runtime-prompts/#dynamic-prompt-injection","title":"Dynamic Prompt Injection","text":"<p>Add context at runtime:</p> <pre><code># Inject current user's access level\nprompt = base_prompt + f\"\\nUser access level: {user.access_level}\"\n\n# Inject current date context\nprompt = base_prompt + f\"\\nCurrent date: {datetime.now()}\"\n</code></pre>"},{"location":"features/runtime-prompts/#migration-guide","title":"Migration Guide","text":""},{"location":"features/runtime-prompts/#from-config-file-to-database","title":"From Config File to Database","text":"<p>Before: <pre><code># config.yaml\nprompts:\n  sql_generation: |\n    [Custom prompt]\n</code></pre></p> <p>After: 1. Enable analytics 2. Go to Admin \u2192 Prompts 3. Paste prompt from config.yaml 4. Save 5. Remove from config.yaml</p> <p>Benefit: Edit without code deployment</p> <p>Next: Barista Personality | Full Config Reference</p>"},{"location":"features/schedules/","title":"Scheduled Queries","text":"<p>Automate recurring reports with scheduled query execution and email delivery.</p>"},{"location":"features/schedules/#quick-start","title":"Quick Start","text":""},{"location":"features/schedules/#enable-scheduler","title":"Enable Scheduler","text":"<pre><code># config.yaml\nscheduler:\n  enabled: true\n  timezone: \"UTC\"\n\nemail:\n  enabled: true\n  smtp:\n    host: \"smtp.gmail.com\"\n    port: 587\n    user: \"your-email@gmail.com\"\n    password: \"app-password\"\n</code></pre>"},{"location":"features/schedules/#create-first-schedule","title":"Create First Schedule","text":"<ol> <li>Go to <code>http://localhost:8000</code> \u2192 Schedules tab</li> <li>Click \"+ New Schedule\"</li> <li>Fill in details:</li> <li>Name: \"Daily Sales Report\"</li> <li>Question: \"Show total sales by product today\"</li> <li>Frequency: Daily at 9:00 AM</li> <li>Recipients: <code>team@company.com</code></li> <li>Click Save</li> </ol> <p>Done! Report will be emailed daily at 9 AM.</p>"},{"location":"features/schedules/#creating-schedules","title":"Creating Schedules","text":""},{"location":"features/schedules/#via-dashboard","title":"Via Dashboard","text":"<pre><code>Schedules Tab \u2192 New Schedule \u2192 Fill Form \u2192 Save\n</code></pre> <p>Form Fields:</p> Field Description Example Name Schedule name Daily Sales Report Question Natural language query Show sales by region Tables Select table(s) orders, customers Frequency Cron expression <code>0 9 * * *</code> (9 AM daily) Recipients Email addresses john@company.com, team@company.com Format Report format Excel, CSV, HTML Subject Email subject Sales Report - {{date}}"},{"location":"features/schedules/#via-api","title":"Via API","text":"<pre><code>curl -X POST http://localhost:8000/api/schedules \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"Daily Sales Report\",\n    \"question\": \"Show total sales by product today\",\n    \"tables\": [\"orders\"],\n    \"cron\": \"0 9 * * *\",\n    \"email_recipients\": [\"team@company.com\"],\n    \"format\": \"excel\"\n  }'\n</code></pre>"},{"location":"features/schedules/#cron-expressions","title":"Cron Expressions","text":""},{"location":"features/schedules/#common-schedules","title":"Common Schedules","text":"Schedule Cron Expression Description Daily 9 AM <code>0 9 * * *</code> Every day at 9:00 AM Weekdays 8 AM <code>0 8 * * 1-5</code> Monday-Friday at 8 AM Weekly Monday <code>0 9 * * 1</code> Every Monday at 9 AM Monthly 1st <code>0 6 1 * *</code> 1st of month at 6 AM Hourly <code>0 * * * *</code> Every hour on the hour"},{"location":"features/schedules/#cron-format","title":"Cron Format","text":"<pre><code>* * * * *\n\u2502 \u2502 \u2502 \u2502 \u2502\n\u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500 Day of week (0-7, 0 and 7 = Sunday)\n\u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500 Month (1-12)\n\u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Day of month (1-31)\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Hour (0-23)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Minute (0-59)\n</code></pre> <p>Examples: <pre><code>0 9 * * *      # Daily at 9:00 AM\n30 8 * * 1     # Every Monday at 8:30 AM\n0 6 1 * *      # First day of month at 6:00 AM\n*/15 * * * *   # Every 15 minutes\n0 9 * * 1-5    # Weekdays at 9:00 AM\n</code></pre></p>"},{"location":"features/schedules/#email-reports","title":"Email Reports","text":""},{"location":"features/schedules/#report-formats","title":"Report Formats","text":"<p>CSV - Simple, universal <pre><code>format: \"csv\"\n</code></pre> - Lightweight - Opens in Excel/Google Sheets - Best for data export</p> <p>Excel - Formatted spreadsheet <pre><code>format: \"excel\"\n</code></pre> - Professional formatting - Multiple sheets possible - Best for business reports</p> <p>HTML - Embedded in email <pre><code>format: \"html\"\n</code></pre> - No attachment needed - Readable in email client - Best for quick summaries</p>"},{"location":"features/schedules/#email-template","title":"Email Template","text":"<p>Default subject: <pre><code>\u2705 {{schedule_name}} - {{date}}\n</code></pre></p> <p>Custom subject: <pre><code>templates:\n  success_subject: \"\ud83d\udcca {{schedule_name}} - {{date}}\"\n  failure_subject: \"\u274c Report Failed: {{schedule_name}}\"\n</code></pre></p> <p>Variables: - <code>{{schedule_name}}</code> - Schedule name - <code>{{date}}</code> - YYYY-MM-DD - <code>{{time}}</code> - HH:MM:SS - <code>{{format}}</code> - csv, excel, html</p>"},{"location":"features/schedules/#managing-schedules","title":"Managing Schedules","text":""},{"location":"features/schedules/#view-all-schedules","title":"View All Schedules","text":"<pre><code>Dashboard \u2192 Schedules Tab\n</code></pre> <p>Shows: - Schedule name - Frequency - Next run time - Last run status - Recipients - Actions (Edit, Delete, Run Now)</p>"},{"location":"features/schedules/#edit-schedule","title":"Edit Schedule","text":"<pre><code>Schedules Tab \u2192 Click schedule \u2192 Edit \u2192 Save\n</code></pre> <p>Editable: - Name - Question - Frequency (cron) - Recipients - Format</p> <p>Not editable: - Schedule ID - Creation date</p>"},{"location":"features/schedules/#delete-schedule","title":"Delete Schedule","text":"<pre><code>Schedules Tab \u2192 Click schedule \u2192 Delete \u2192 Confirm\n</code></pre> <p>\u26a0\ufe0f Warning: Deletes all execution history for this schedule.</p>"},{"location":"features/schedules/#run-now","title":"Run Now","text":"<p>Test schedule without waiting:</p> <pre><code>Schedules Tab \u2192 Click schedule \u2192 \"Run Now\"\n</code></pre> <p>Executes immediately and sends email.</p>"},{"location":"features/schedules/#execution-history","title":"Execution History","text":"<p>View past executions:</p> <pre><code>Schedules Tab \u2192 Click schedule \u2192 \"History\"\n</code></pre> <p>Details: - Execution time - Success/failure status - Rows returned - Execution duration - Email sent status - Error messages (if failed)</p> <p>Retention: <pre><code>scheduler:\n  keep_history_days: 30  # Keep logs for 30 days\n</code></pre></p>"},{"location":"features/schedules/#configuration","title":"Configuration","text":""},{"location":"features/schedules/#full-configuration","title":"Full Configuration","text":"<pre><code>scheduler:\n  enabled: true\n  timezone: \"America/New_York\"     # IANA timezone\n  max_concurrent_jobs: 10          # Parallel executions\n  job_timeout_seconds: 300         # 5 minutes per job\n  keep_history_days: 30            # Log retention\n\nemail:\n  enabled: true\n  smtp:\n    host: \"smtp.gmail.com\"\n    port: 587\n    user: \"your-email@gmail.com\"\n    password: \"app-password\"\n    from_email: \"noreply@company.com\"\n    from_name: \"SQLatte Reports\"\n    use_tls: true\n\n  templates:\n    success_subject: \"\u2705 {{schedule_name}} - {{date}}\"\n    failure_subject: \"\u274c Failed: {{schedule_name}}\"\n\n  max_emails_per_day: 1000\n  max_recipients_per_email: 10\n\nexport:\n  formats: [csv, excel, html]\n  max_rows: 1000                   # Limit per report\n  max_file_size_mb: 25             # Attachment limit\n</code></pre>"},{"location":"features/schedules/#best-practices","title":"Best Practices","text":""},{"location":"features/schedules/#scheduling","title":"Scheduling","text":"<ul> <li>\u2705 Use descriptive names</li> <li>\u2705 Test with \"Run Now\" before scheduling</li> <li>\u2705 Avoid peak hours for heavy queries</li> <li>\u2705 Spread schedules throughout the day</li> <li>\u26a0\ufe0f Don't schedule too frequently (respect DB load)</li> </ul>"},{"location":"features/schedules/#email","title":"Email","text":"<ul> <li>\u2705 Use distribution lists (team@company.com)</li> <li>\u2705 Keep recipient count reasonable (&lt;10)</li> <li>\u2705 Choose appropriate format (CSV for data, HTML for summaries)</li> <li>\u2705 Include date in subject line</li> <li>\u26a0\ufe0f Don't spam users with too many reports</li> </ul>"},{"location":"features/schedules/#queries","title":"Queries","text":"<ul> <li>\u2705 Use LIMIT to control result size</li> <li>\u2705 Add date filters (e.g., \"today\", \"this week\")</li> <li>\u2705 Test queries manually first</li> <li>\u26a0\ufe0f Avoid expensive aggregations in hourly schedules</li> </ul>"},{"location":"features/schedules/#examples","title":"Examples","text":""},{"location":"features/schedules/#daily-sales-summary","title":"Daily Sales Summary","text":"<pre><code>Name: Daily Sales Summary\nQuestion: Show total sales by product category today\nTables: orders, products\nCron: 0 9 * * *          # 9 AM daily\nRecipients: sales@company.com\nFormat: excel\n</code></pre>"},{"location":"features/schedules/#weekly-kpi-report","title":"Weekly KPI Report","text":"<pre><code>Name: Weekly KPI Dashboard\nQuestion: Show weekly sales, top customers, and product performance\nTables: orders, customers, products\nCron: 0 8 * * 1          # Monday 8 AM\nRecipients: executives@company.com\nFormat: html\n</code></pre>"},{"location":"features/schedules/#monthly-revenue-report","title":"Monthly Revenue Report","text":"<pre><code>Name: Monthly Revenue Report\nQuestion: Show monthly revenue by region and product line\nTables: orders, regions\nCron: 0 6 1 * *          # 1st of month 6 AM\nRecipients: finance@company.com\nFormat: excel\n</code></pre>"},{"location":"features/schedules/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/schedules/#schedule-not-running","title":"Schedule Not Running","text":"<pre><code># Check scheduler is enabled\nscheduler:\n  enabled: true\n\n# Check cron expression\n# Use crontab.guru to validate\n\n# Check logs\ndocker-compose logs -f sqlatte | grep scheduler\n</code></pre>"},{"location":"features/schedules/#email-not-sent","title":"Email Not Sent","text":"<pre><code># Check email is enabled\nemail:\n  enabled: true\n\n# Test SMTP settings\nDashboard \u2192 Email &amp; SMTP \u2192 Send Test Email\n\n# Check email logs\nSELECT * FROM execution_logs WHERE email_sent = false;\n</code></pre>"},{"location":"features/schedules/#query-failed","title":"Query Failed","text":"<pre><code># Check execution history for error\n# Test query manually in Assistant tab\n# Verify tables still exist\n# Check database permissions\n</code></pre>"},{"location":"features/schedules/#too-many-emails","title":"Too Many Emails","text":"<pre><code># Reduce frequency\n# Combine multiple schedules\n# Use distribution lists instead of individual emails\n</code></pre>"},{"location":"features/schedules/#monitoring","title":"Monitoring","text":""},{"location":"features/schedules/#via-dashboard_1","title":"Via Dashboard","text":"<pre><code>Schedules Tab \u2192 View execution history\nAnalytics Tab \u2192 Schedule performance metrics\n</code></pre>"},{"location":"features/schedules/#via-database","title":"Via Database","text":"<pre><code>-- Failed executions today\nSELECT schedule_name, error_message\nFROM execution_logs\nWHERE execution_time &gt; CURRENT_DATE\n  AND success = false;\n\n-- Most executed schedules\nSELECT schedule_name, COUNT(*) as executions\nFROM execution_logs\nWHERE execution_time &gt; NOW() - INTERVAL '30 days'\nGROUP BY schedule_name\nORDER BY executions DESC;\n</code></pre>"},{"location":"features/schedules/#limitations","title":"Limitations","text":"<ul> <li>\u26a0\ufe0f Single instance only - Schedules run on one SQLatte instance</li> <li>\u26a0\ufe0f No distributed execution - Not shared across multiple instances</li> <li>\u26a0\ufe0f In-memory jobs - Restart clears pending jobs</li> <li>\u26a0\ufe0f Email rate limits - Respect SMTP provider limits</li> </ul> <p>Roadmap: - Redis-backed job queue - Distributed scheduler - Webhook notifications - Slack/Teams integration</p> <p>Next: Analytics &amp; Insights | Email Settings</p>"},{"location":"getting-started/docker/","title":"Docker Deployment","text":"<p>Deploy SQLatte with Docker for production-ready, containerized environments.</p>"},{"location":"getting-started/docker/#quick-start-5-minutes","title":"Quick Start (5 Minutes)","text":""},{"location":"getting-started/docker/#1-prerequisites","title":"1. Prerequisites","text":"<pre><code># Verify Docker is installed\ndocker --version          # 20.10+\ndocker-compose --version  # 1.29+\n</code></pre>"},{"location":"getting-started/docker/#2-clone-configure","title":"2. Clone &amp; Configure","text":"<pre><code># Clone repository\ngit clone https://github.com/osmanuygar/sqlatte.git\ncd sqlatte\n\n# Create config file\ncp config/config.example.yaml config/config.yaml\nnano config/config.yaml\n</code></pre>"},{"location":"getting-started/docker/#3-start-sqlatte","title":"3. Start SQLatte","text":"<pre><code># Start with Docker Compose\ndocker-compose up -d\n\n# Check logs\ndocker-compose logs -f\n\n# Access SQLatte\nhttp://localhost:8000\n</code></pre> <p>Done! SQLatte is running in Docker.</p>"},{"location":"getting-started/docker/#docker-compose-recommended","title":"Docker Compose (Recommended)","text":""},{"location":"getting-started/docker/#basic-setup","title":"Basic Setup","text":"<p>docker-compose.yml: <pre><code>version: '3.8'\n\nservices:\n  sqlatte:\n    build: .\n    container_name: sqlatte\n    restart: unless-stopped\n    ports:\n      - \"8000:8000\"\n    volumes:\n      - ./config:/app/config\n      - ./logs:/app/logs\n    environment:\n      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}\n      - DB_PASSWORD=${DB_PASSWORD}\n    env_file:\n      - .env\n</code></pre></p> <p>Start: <pre><code>docker-compose up -d\n</code></pre></p>"},{"location":"getting-started/docker/#with-postgresql-analytics","title":"With PostgreSQL Analytics","text":"<p>docker-compose.yml: <pre><code>version: '3.8'\n\nservices:\n  sqlatte:\n    build: .\n    container_name: sqlatte\n    restart: unless-stopped\n    ports:\n      - \"8000:8000\"\n    volumes:\n      - ./config:/app/config\n      - ./logs:/app/logs\n    environment:\n      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}\n      - ANALYTICS_DB_PASSWORD=${ANALYTICS_DB_PASSWORD}\n    depends_on:\n      - postgres\n    networks:\n      - sqlatte_network\n\n  postgres:\n    image: postgres:15-alpine\n    container_name: sqlatte_postgres\n    restart: unless-stopped\n    environment:\n      - POSTGRES_USER=sqlatte\n      - POSTGRES_PASSWORD=${ANALYTICS_DB_PASSWORD}\n      - POSTGRES_DB=sqlatte_analytics\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    networks:\n      - sqlatte_network\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U sqlatte\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\nvolumes:\n  postgres_data:\n\nnetworks:\n  sqlatte_network:\n    driver: bridge\n</code></pre></p> <p>config.yaml: <pre><code>analytics:\n  enabled: true\n  storage: \"postgresql\"\n  postgresql:\n    host: \"postgres\"              # Container name\n    port: 5432\n    database: \"sqlatte_analytics\"\n    user: \"sqlatte\"\n    password: \"${ANALYTICS_DB_PASSWORD}\"\n</code></pre></p> <p>Start: <pre><code># Set password in .env\necho \"ANALYTICS_DB_PASSWORD=strong_password\" &gt;&gt; .env\n\n# Start services\ndocker-compose up -d\n\n# Check health\ndocker-compose ps\n</code></pre></p>"},{"location":"getting-started/docker/#production-deployment","title":"Production Deployment","text":""},{"location":"getting-started/docker/#with-nginx-reverse-proxy","title":"With Nginx Reverse Proxy","text":"<p>docker-compose.production.yml: <pre><code>version: '3.8'\n\nservices:\n  sqlatte:\n    build: .\n    container_name: sqlatte_prod\n    restart: unless-stopped\n    expose:\n      - \"8000\"\n    volumes:\n      - ./config:/app/config\n      - ./logs:/app/logs\n    environment:\n      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}\n      - DB_PASSWORD=${DB_PASSWORD}\n      - ANALYTICS_DB_PASSWORD=${ANALYTICS_DB_PASSWORD}\n    env_file:\n      - .env.production\n    depends_on:\n      - postgres\n    networks:\n      - sqlatte_network\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8000/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\n  postgres:\n    image: postgres:15-alpine\n    container_name: sqlatte_postgres\n    restart: unless-stopped\n    environment:\n      - POSTGRES_USER=sqlatte\n      - POSTGRES_PASSWORD=${ANALYTICS_DB_PASSWORD}\n      - POSTGRES_DB=sqlatte_analytics\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    networks:\n      - sqlatte_network\n\n  nginx:\n    image: nginx:alpine\n    container_name: sqlatte_nginx\n    restart: unless-stopped\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./ssl:/etc/nginx/ssl:ro\n    depends_on:\n      - sqlatte\n    networks:\n      - sqlatte_network\n\nvolumes:\n  postgres_data:\n\nnetworks:\n  sqlatte_network:\n    driver: bridge\n</code></pre></p> <p>nginx.conf: <pre><code>events {\n    worker_connections 1024;\n}\n\nhttp {\n    upstream sqlatte {\n        server sqlatte:8000;\n    }\n\n    # Redirect HTTP to HTTPS\n    server {\n        listen 80;\n        server_name analytics.company.com;\n        return 301 https://$server_name$request_uri;\n    }\n\n    # HTTPS Server\n    server {\n        listen 443 ssl http2;\n        server_name analytics.company.com;\n\n        ssl_certificate /etc/nginx/ssl/cert.pem;\n        ssl_certificate_key /etc/nginx/ssl/key.pem;\n\n        client_max_body_size 50M;\n\n        location / {\n            proxy_pass http://sqlatte;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n\n            # WebSocket support\n            proxy_http_version 1.1;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection \"upgrade\";\n        }\n    }\n}\n</code></pre></p> <p>Deploy: <pre><code># Create SSL directory\nmkdir -p ssl\n\n# Get SSL certificate (Let's Encrypt)\nsudo certbot certonly --standalone -d analytics.company.com\nsudo cp /etc/letsencrypt/live/analytics.company.com/fullchain.pem ssl/cert.pem\nsudo cp /etc/letsencrypt/live/analytics.company.com/privkey.pem ssl/key.pem\n\n# Start production stack\ndocker-compose -f docker-compose.production.yml up -d\n\n# Verify\ncurl https://analytics.company.com/health\n</code></pre></p>"},{"location":"getting-started/docker/#dockerfile","title":"Dockerfile","text":"<p>SQLatte includes a production-ready Dockerfile:</p> <pre><code>FROM python:3.10-slim\n\nWORKDIR /app\n\n# Install dependencies\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\n# Copy application\nCOPY . .\n\n# Expose port\nEXPOSE 8000\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=10s --retries=3 \\\n  CMD curl -f http://localhost:8000/health || exit 1\n\n# Run application\nCMD [\"python\", \"run.py\"]\n</code></pre> <p>Build manually: <pre><code>docker build -t sqlatte:latest .\ndocker run -d -p 8000:8000 --name sqlatte sqlatte:latest\n</code></pre></p>"},{"location":"getting-started/docker/#environment-variables","title":"Environment Variables","text":"<p>.env.production: <pre><code># LLM Provider\nANTHROPIC_API_KEY=sk-ant-xxxxx\n\n# Database Credentials\nDB_HOST=trino.company.com\nDB_PORT=443\nDB_USER=sqlatte_service\nDB_PASSWORD=secure_password\n\n# Analytics Database\nANALYTICS_DB_PASSWORD=analytics_password\n\n# Email/SMTP\nSMTP_USER=your-email@gmail.com\nSMTP_PASSWORD=app_password\n\n# Application\nSQLATTE_ENV=production\nLOG_LEVEL=INFO\n</code></pre></p> <p>Load in Docker Compose: <pre><code>services:\n  sqlatte:\n    env_file:\n      - .env.production\n</code></pre></p>"},{"location":"getting-started/docker/#docker-commands","title":"Docker Commands","text":""},{"location":"getting-started/docker/#startstop","title":"Start/Stop","text":"<pre><code># Start all services\ndocker-compose up -d\n\n# Stop all services\ndocker-compose down\n\n# Restart\ndocker-compose restart\n\n# Stop and remove volumes (\u26a0\ufe0f deletes data!)\ndocker-compose down -v\n</code></pre>"},{"location":"getting-started/docker/#logs","title":"Logs","text":"<pre><code># Follow all logs\ndocker-compose logs -f\n\n# SQLatte logs only\ndocker-compose logs -f sqlatte\n\n# Last 100 lines\ndocker-compose logs --tail=100 sqlatte\n\n# PostgreSQL logs\ndocker-compose logs -f postgres\n</code></pre>"},{"location":"getting-started/docker/#execute-commands","title":"Execute Commands","text":"<pre><code># Access SQLatte container\ndocker-compose exec sqlatte bash\n\n# Run Python command\ndocker-compose exec sqlatte python -c \"from src.core.config import load_config; print(load_config())\"\n\n# Access PostgreSQL\ndocker-compose exec postgres psql -U sqlatte -d sqlatte_analytics\n</code></pre>"},{"location":"getting-started/docker/#health-checks","title":"Health Checks","text":"<pre><code># Check container health\ndocker-compose ps\n\n# Check SQLatte health endpoint\ncurl http://localhost:8000/health\n\n# Check PostgreSQL\ndocker-compose exec postgres pg_isready -U sqlatte\n</code></pre>"},{"location":"getting-started/docker/#volumes-persistence","title":"Volumes &amp; Persistence","text":""},{"location":"getting-started/docker/#important-volumes","title":"Important Volumes","text":"<pre><code>volumes:\n  # Config files (editable from host)\n  - ./config:/app/config\n\n  # Logs (accessible from host)\n  - ./logs:/app/logs\n\n  # PostgreSQL data (persistent)\n  - postgres_data:/var/lib/postgresql/data\n</code></pre>"},{"location":"getting-started/docker/#backup-postgresql","title":"Backup PostgreSQL","text":"<pre><code># Backup\ndocker-compose exec postgres pg_dump -U sqlatte sqlatte_analytics &gt; backup.sql\n\n# Restore\ndocker-compose exec -T postgres psql -U sqlatte sqlatte_analytics &lt; backup.sql\n</code></pre>"},{"location":"getting-started/docker/#scaling-performance","title":"Scaling &amp; Performance","text":""},{"location":"getting-started/docker/#horizontal-scaling-multiple-instances","title":"Horizontal Scaling (Multiple Instances)","text":"<pre><code>version: '3.8'\n\nservices:\n  sqlatte:\n    build: .\n    restart: unless-stopped\n    deploy:\n      replicas: 3              # Run 3 instances\n    # ... rest of config\n\n  nginx:\n    # Load balancer\n    # ... upstream config\n</code></pre> <p>Note: Requires Redis for shared session storage (future feature)</p>"},{"location":"getting-started/docker/#resource-limits","title":"Resource Limits","text":"<pre><code>services:\n  sqlatte:\n    deploy:\n      resources:\n        limits:\n          cpus: '2.0'\n          memory: 2G\n        reservations:\n          cpus: '0.5'\n          memory: 512M\n</code></pre>"},{"location":"getting-started/docker/#monitoring","title":"Monitoring","text":""},{"location":"getting-started/docker/#with-prometheus-grafana","title":"With Prometheus &amp; Grafana","text":"<p>docker-compose.monitoring.yml: <pre><code>version: '3.8'\n\nservices:\n  # ... (sqlatte, postgres, nginx)\n\n  prometheus:\n    image: prom/prometheus\n    container_name: prometheus\n    restart: unless-stopped\n    ports:\n      - \"9090:9090\"\n    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\n      - prometheus_data:/prometheus\n    networks:\n      - sqlatte_network\n\n  grafana:\n    image: grafana/grafana\n    container_name: grafana\n    restart: unless-stopped\n    ports:\n      - \"3000:3000\"\n    environment:\n      - GF_SECURITY_ADMIN_PASSWORD=admin\n    volumes:\n      - grafana_data:/var/lib/grafana\n    networks:\n      - sqlatte_network\n\nvolumes:\n  prometheus_data:\n  grafana_data:\n</code></pre></p> <p>prometheus.yml: <pre><code>global:\n  scrape_interval: 15s\n\nscrape_configs:\n  - job_name: 'sqlatte'\n    static_configs:\n      - targets: ['sqlatte:8000']\n</code></pre></p>"},{"location":"getting-started/docker/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/docker/#container-wont-start","title":"Container Won't Start","text":"<pre><code># Check logs\ndocker-compose logs sqlatte\n\n# Check config\ndocker-compose config\n\n# Validate Dockerfile\ndocker build -t sqlatte:test .\n</code></pre>"},{"location":"getting-started/docker/#connection-issues","title":"Connection Issues","text":"<pre><code># Check network\ndocker network ls\ndocker network inspect sqlatte_sqlatte_network\n\n# Ping containers\ndocker-compose exec sqlatte ping postgres\n</code></pre>"},{"location":"getting-started/docker/#database-connection-failed","title":"Database Connection Failed","text":"<pre><code># Check PostgreSQL is running\ndocker-compose ps postgres\n\n# Test connection\ndocker-compose exec postgres psql -U sqlatte -d sqlatte_analytics\n\n# Check config.yaml\ndocker-compose exec sqlatte cat /app/config/config.yaml\n</code></pre>"},{"location":"getting-started/docker/#port-already-in-use","title":"Port Already in Use","text":"<pre><code># Find process using port\nlsof -i :8000\n# or\nnetstat -tulpn | grep 8000\n\n# Kill process or change port in docker-compose.yml\nports:\n  - \"8001:8000\"  # Use 8001 on host\n</code></pre>"},{"location":"getting-started/docker/#security-best-practices","title":"Security Best Practices","text":""},{"location":"getting-started/docker/#1-use-secrets","title":"1. Use Secrets","text":"<pre><code># Don't commit .env files\necho \".env\" &gt;&gt; .gitignore\necho \".env.production\" &gt;&gt; .gitignore\n\n# Use Docker secrets (Swarm mode)\necho \"sk-ant-xxxxx\" | docker secret create anthropic_key -\n</code></pre>"},{"location":"getting-started/docker/#2-non-root-user","title":"2. Non-Root User","text":"<p>Dockerfile: <pre><code># Create non-root user\nRUN useradd -m -u 1000 sqlatte\nUSER sqlatte\n</code></pre></p>"},{"location":"getting-started/docker/#3-read-only-filesystem","title":"3. Read-Only Filesystem","text":"<pre><code>services:\n  sqlatte:\n    read_only: true\n    tmpfs:\n      - /tmp\n      - /app/logs\n</code></pre>"},{"location":"getting-started/docker/#4-network-isolation","title":"4. Network Isolation","text":"<pre><code>networks:\n  sqlatte_network:\n    driver: bridge\n    internal: true  # No external access\n</code></pre>"},{"location":"getting-started/docker/#updates-upgrades","title":"Updates &amp; Upgrades","text":""},{"location":"getting-started/docker/#update-sqlatte","title":"Update SQLatte","text":"<pre><code># Pull latest code\ngit pull origin main\n\n# Rebuild image\ndocker-compose build sqlatte\n\n# Restart with new image\ndocker-compose up -d sqlatte\n</code></pre>"},{"location":"getting-started/docker/#update-dependencies","title":"Update Dependencies","text":"<pre><code># Update requirements.txt\npip install -r requirements.txt --upgrade\npip freeze &gt; requirements.txt\n\n# Rebuild\ndocker-compose build --no-cache\ndocker-compose up -d\n</code></pre>"},{"location":"getting-started/docker/#production-checklist","title":"Production Checklist","text":"<p>Before deploying to production:</p> <ul> <li>[ ] Use environment variables for secrets</li> <li>[ ] Enable HTTPS with valid SSL certificate</li> <li>[ ] Set up PostgreSQL for analytics persistence</li> <li>[ ] Configure email/SMTP for scheduled reports</li> <li>[ ] Enable health checks</li> <li>[ ] Set resource limits (CPU, memory)</li> <li>[ ] Configure log rotation</li> <li>[ ] Set up monitoring (Prometheus + Grafana)</li> <li>[ ] Create backup strategy for PostgreSQL</li> <li>[ ] Use read-only config volume</li> <li>[ ] Restrict CORS to specific domains</li> <li>[ ] Enable rate limiting (nginx)</li> <li>[ ] Test disaster recovery</li> </ul>"},{"location":"getting-started/docker/#next-steps","title":"Next Steps","text":"<ul> <li>Configure Database: Database Providers</li> <li>Configure LLM: LLM Providers</li> <li>Enable Analytics: Analytics Setup</li> <li>Setup Email: Email Settings</li> </ul> <p>Need help? Check GitHub Issues or Installation Guide.</p>"},{"location":"getting-started/installation/","title":"Installation Guide","text":"<p>This comprehensive guide will walk you through installing SQLatte on your system, from basic setup to production deployment.</p>"},{"location":"getting-started/installation/#overview","title":"Overview","text":"<p>SQLatte can be installed in multiple ways depending on your use case:</p> <ul> <li>Quick Start (5 minutes) - Docker Compose for immediate testing</li> <li>Standard Installation (10 minutes) - Python installation for development</li> <li>Production Deployment (30 minutes) - Docker with persistent storage and monitoring</li> <li>Development Setup (15 minutes) - Full development environment</li> </ul> <p>Choose the method that best fits your needs.</p>"},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":""},{"location":"getting-started/installation/#required","title":"Required","text":"All InstallationsProductionDevelopment <ul> <li>Python 3.8+ (3.10+ recommended for best performance)</li> <li>Database Access: One of the following<ul> <li>Trino (distributed SQL)</li> <li>PostgreSQL 12+</li> <li>MySQL 8.0+</li> <li>Google BigQuery (with service account)</li> </ul> </li> <li>LLM API Key: One of the following<ul> <li>Anthropic Claude API key (recommended)</li> <li>Google Gemini API key (free tier available)</li> <li>Google Cloud Vertex AI access</li> </ul> </li> </ul> <ul> <li>Operating System: Linux (Ubuntu 20.04+ recommended) or macOS</li> <li>Docker (optional but recommended): Docker 20.10+ and Docker Compose 1.29+</li> <li>Reverse Proxy: Nginx or Caddy (for HTTPS)</li> <li>Monitoring: Prometheus + Grafana (optional)</li> <li>Email Server: SMTP access (for scheduled reports)</li> </ul> <ul> <li>Git for version control</li> <li>Code Editor: VS Code, PyCharm, or similar</li> <li>Virtual Environment: <code>venv</code> or <code>conda</code></li> <li>Database Client: pgAdmin, DBeaver, or similar (for testing)</li> </ul>"},{"location":"getting-started/installation/#optional-for-advanced-features","title":"Optional (for Advanced Features)","text":"<ul> <li>PostgreSQL 12+ for persistent analytics storage (otherwise uses in-memory)</li> <li>Redis (for production caching and queue management)</li> <li>SMTP Server access (Gmail, SendGrid, etc.) for email reports</li> <li>Google Cloud Account (for BigQuery or Vertex AI)</li> </ul>"},{"location":"getting-started/installation/#installation-methods","title":"Installation Methods","text":""},{"location":"getting-started/installation/#method-1-quick-start-with-docker-compose-recommended-for-testing","title":"Method 1: Quick Start with Docker Compose (Recommended for Testing)","text":"<p>Time: ~5 minutes | Difficulty: Easy | Best for: Testing, demos, quick evaluation</p> <p>This is the fastest way to get SQLatte running with all features enabled.</p>"},{"location":"getting-started/installation/#step-1-prerequisites","title":"Step 1: Prerequisites","text":"<pre><code># Verify Docker and Docker Compose are installed\ndocker --version          # Should be 20.10+\ndocker-compose --version  # Should be 1.29+\n</code></pre>"},{"location":"getting-started/installation/#step-2-download-sqlatte","title":"Step 2: Download SQLatte","text":"<pre><code># Clone the repository\ngit clone https://github.com/osmanuygar/sqlatte.git\ncd sqlatte\n</code></pre>"},{"location":"getting-started/installation/#step-3-configure-environment","title":"Step 3: Configure Environment","text":"<p>Create a <code>.env</code> file (or edit <code>config/config.yaml</code>):</p> <pre><code># Quick config with PostgreSQL example\ncat &gt; config/config.yaml &lt;&lt; 'EOF'\napp:\n  name: \"SQLatte\"\n  host: \"0.0.0.0\"\n  port: 8000\n  debug: false\n\ndatabase:\n  provider: \"postgresql\"\n  postgresql:\n    host: \"localhost\"\n    port: 5432\n    database: \"your_database\"\n    user: \"your_user\"\n    password: \"your_password\"\n    schema: \"public\"\n\nllm:\n  provider: \"anthropic\"\n  anthropic:\n    api_key: \"your-anthropic-api-key\"\n    model: \"claude-sonnet-4-20250514\"\n\ncors:\n  allow_origins:\n    - \"*\"  # For testing only! Restrict in production\n  allow_credentials: true\n  allow_methods: [\"*\"]\n  allow_headers: [\"*\"]\n\n# Optional: Enable features\nscheduler:\n  enabled: false\n\nemail:\n  enabled: false\n\ninsights:\n  enabled: true\n  mode: \"hybrid\"\n\nplugins:\n  auth:\n    enabled: false\nEOF\n</code></pre>"},{"location":"getting-started/installation/#step-4-start-sqlatte","title":"Step 4: Start SQLatte","text":"<pre><code># Using Docker Compose\ndocker-compose up -d\n\n# Check logs\ndocker-compose logs -f sqlatte\n\n# Or without Docker (direct Python)\npip install -r requirements.txt\npython run.py\n</code></pre>"},{"location":"getting-started/installation/#step-5-verify-installation","title":"Step 5: Verify Installation","text":"<pre><code># Test API health\ncurl http://localhost:8000/health\n\n# Expected response:\n# {\n#   \"status\": \"healthy\",\n#   \"version\": \"1.0.0\",\n#   \"database\": \"connected\",\n#   \"llm\": \"available\"\n# }\n</code></pre>"},{"location":"getting-started/installation/#step-6-access-sqlatte","title":"Step 6: Access SQLatte","text":"<p>Open your browser:</p> <ul> <li>Main Dashboard: http://localhost:8000</li> <li>Admin Panel: http://localhost:8000/admin</li> <li>Demo Page: http://localhost:8000/demo</li> <li>Analytics: http://localhost:8000/analytics</li> </ul> <p>\u2705 You're done! SQLatte is now running and ready to use.</p>"},{"location":"getting-started/installation/#method-2-standard-python-installation-for-development","title":"Method 2: Standard Python Installation (For Development)","text":"<p>Time: ~10 minutes | Difficulty: Moderate | Best for: Development, customization</p> <p>This method gives you more control and is ideal for development or when Docker isn't available.</p>"},{"location":"getting-started/installation/#step-1-system-preparation","title":"Step 1: System Preparation","text":"<pre><code># Update system packages (Ubuntu/Debian)\nsudo apt update &amp;&amp; sudo apt upgrade -y\n\n# Install Python 3.10+ (if not already installed)\nsudo apt install python3.10 python3.10-venv python3-pip -y\n\n# Verify Python version\npython3 --version  # Should be 3.8 or higher\n</code></pre>"},{"location":"getting-started/installation/#step-2-clone-repository","title":"Step 2: Clone Repository","text":"<pre><code>git clone https://github.com/osmanuygar/sqlatte.git\ncd sqlatte\n</code></pre>"},{"location":"getting-started/installation/#step-3-create-virtual-environment","title":"Step 3: Create Virtual Environment","text":"<pre><code># Create virtual environment\npython3 -m venv venv\n\n# Activate it\nsource venv/bin/activate  # Linux/macOS\n# OR\nvenv\\Scripts\\activate     # Windows\n</code></pre>"},{"location":"getting-started/installation/#step-4-install-dependencies","title":"Step 4: Install Dependencies","text":"<pre><code># Upgrade pip\npip install --upgrade pip\n\n# Install SQLatte dependencies\npip install -r requirements.txt\n\n# Verify installations\npip list | grep -E \"anthropic|fastapi|trino|psycopg2\"\n</code></pre>"},{"location":"getting-started/installation/#step-3-configure-sqlatte","title":"Step 3: Configure SQLatte","text":"<pre><code># Create config directory if it doesn't exist\nmkdir -p config\n\n# Copy example config\ncp config/config.example.yaml config/config.yaml\n\n# Edit configuration\nnano config/config.yaml  # or use your preferred editor\n</code></pre> <p>Minimal config.yaml:</p> <pre><code>app:\n  name: \"SQLatte\"\n  host: \"0.0.0.0\"\n  port: 8000\n  debug: true  # Enable for development\n\ndatabase:\n  provider: \"postgresql\"  # or \"trino\", \"mysql\", \"bigquery\"\n  postgresql:\n    host: \"localhost\"\n    port: 5432\n    database: \"mydb\"\n    user: \"postgres\"\n    password: \"your_password\"\n    schema: \"public\"\n\nllm:\n  provider: \"anthropic\"\n  anthropic:\n    api_key: \"sk-ant-xxxxx\"  # Your API key\n    model: \"claude-sonnet-4-20250514\"\n    max_tokens: 4096\n    temperature: 0.0\n\ncors:\n  allow_origins:\n    - \"http://localhost:3000\"\n    - \"http://localhost:8000\"\n  allow_credentials: true\n</code></pre> <p>With Prompts Customization (Optional):</p> <p>If you want to customize AI behavior from the start:</p> <pre><code># ... (database and llm config above) ...\n\n# Customize AI prompts\nprompts:\n  # Intent Detection\n  intent_detection: |\n    Analyze this user question and determine if it requires a SQL query.\n\n    Available Tables: {schema_info}\n    Question: {question}\n\n    Rules:\n    1. Data/analytics questions \u2192 intent: \"sql\"\n    2. Greetings/chat \u2192 intent: \"chat\"\n\n    Format: INTENT: sql|chat\n\n  # SQL Generation (with your database-specific optimizations)\n  sql_generation: |\n    Generate SQL for the question.\n\n    Schema: {schema_info}\n    Question: {question}\n\n    Rules:\n    1. Use proper JOINs\n    2. Add LIMIT 100 for safety\n    3. For Trino: use catalog.schema.table format\n    4. If 'dt' partition column exists, ALWAYS filter by it\n\n    Format:\n    SQL: [query]\n    EXPLANATION: [brief explanation]\n\n  # Barista Personality\n  barista_personality: |\n    You are SQLatte \u2615 - a friendly data assistant.\n    Be helpful, concise, and use coffee metaphors occasionally.\n\n  # Insights Generation\n  insights_generation: |\n    Analyze results and provide 1-3 actionable insights.\n\n    Focus on: trends, anomalies, recommendations\n    Format: TYPE: [type] | SEVERITY: [level] | MESSAGE: [insight]\n</code></pre> <p>Prompts Can Be Edited Later</p> <p>You can skip prompt customization now and edit them later via the Admin Panel at http://localhost:8000/admin</p>"},{"location":"getting-started/installation/#step-6-initialize-database-optional-for-analytics","title":"Step 6: Initialize Database (Optional - for Analytics)","text":"<p>If you want persistent analytics:</p> <pre><code># Create PostgreSQL database for SQLatte analytics\npsql -U postgres -c \"CREATE DATABASE sqlatte_analytics;\"\n\n# Update config.yaml\nanalytics:\n  enabled: true\n  storage: \"postgresql\"\n  postgresql:\n    host: \"localhost\"\n    port: 5432\n    database: \"sqlatte_analytics\"\n    user: \"postgres\"\n    password: \"your_password\"\n</code></pre>"},{"location":"getting-started/installation/#step-7-run-sqlatte","title":"Step 7: Run SQLatte","text":"<pre><code># Start the server\npython run.py\n\n# Or with auto-reload for development\nuvicorn src.api.app:app --reload --host 0.0.0.0 --port 8000\n</code></pre>"},{"location":"getting-started/installation/#step-8-test-installation","title":"Step 8: Test Installation","text":"<pre><code># In another terminal\ncurl http://localhost:8000/health\n\n# Test database connection\ncurl http://localhost:8000/api/tables\n\n# Test a simple query\ncurl -X POST http://localhost:8000/api/query \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"question\": \"show me all tables\"}'\n</code></pre>"},{"location":"getting-started/installation/#method-3-production-deployment-with-docker","title":"Method 3: Production Deployment with Docker","text":"<p>Time: ~30 minutes | Difficulty: Advanced | Best for: Production environments</p> <p>This method includes SSL, persistent storage, monitoring, and high availability.</p>"},{"location":"getting-started/installation/#architecture-overview","title":"Architecture Overview","text":"<pre><code>Internet \u2192 Nginx (SSL) \u2192 SQLatte Container(s)\n                              \u2193\n                         PostgreSQL (Analytics)\n                              \u2193\n                         Your Database (Trino/PG/MySQL)\n</code></pre>"},{"location":"getting-started/installation/#step-1-server-preparation","title":"Step 1: Server Preparation","text":"<pre><code># Install Docker and Docker Compose\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\nsudo usermod -aG docker $USER\n\n# Install Docker Compose\nsudo curl -L \"https://github.com/docker/compose/releases/download/v2.20.0/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\n\n# Verify\ndocker --version\ndocker-compose --version\n</code></pre>"},{"location":"getting-started/installation/#step-2-clone-and-configure","title":"Step 2: Clone and Configure","text":"<pre><code># Clone repository\ngit clone https://github.com/osmanuygar/sqlatte.git\ncd sqlatte\n\n# Create production config\ncp config/config.example.yaml config/config.production.yaml\n</code></pre>"},{"location":"getting-started/installation/#step-3-production-configyaml","title":"Step 3: Production config.yaml","text":"<pre><code>app:\n  name: \"SQLatte Production\"\n  host: \"0.0.0.0\"\n  port: 8000\n  debug: false\n  log_level: \"INFO\"\n\ndatabase:\n  provider: \"trino\"  # Your production database\n  trino:\n    host: \"trino.company.com\"\n    port: 443\n    user: \"sqlatte_service\"\n    password: \"${TRINO_PASSWORD}\"  # From environment\n    catalog: \"hive\"\n    schema: \"analytics\"\n    http_scheme: \"https\"\n\nllm:\n  provider: \"anthropic\"\n  anthropic:\n    api_key: \"${ANTHROPIC_API_KEY}\"\n    model: \"claude-sonnet-4-20250514\"\n    max_tokens: 4096\n\n# Enable all production features\nscheduler:\n  enabled: true\n  timezone: \"UTC\"\n  max_concurrent_jobs: 20\n  job_timeout_seconds: 600\n\nemail:\n  enabled: true\n  smtp:\n    host: \"smtp.gmail.com\"\n    port: 587\n    user: \"${SMTP_USER}\"\n    password: \"${SMTP_PASSWORD}\"\n    from_email: \"sqlatte@company.com\"\n    from_name: \"SQLatte Reports\"\n\nanalytics:\n  enabled: true\n  storage: \"postgresql\"\n  postgresql:\n    host: \"postgres\"\n    port: 5432\n    database: \"sqlatte_analytics\"\n    user: \"sqlatte\"\n    password: \"${ANALYTICS_DB_PASSWORD}\"\n\ninsights:\n  enabled: true\n  mode: \"hybrid\"\n\ncors:\n  allow_origins:\n    - \"https://analytics.company.com\"\n    - \"https://dashboard.company.com\"\n  allow_credentials: true\n\nplugins:\n  auth:\n    enabled: true  # For multi-tenant deployments\n    session_ttl_minutes: 480\n    max_workers: 100\n</code></pre>"},{"location":"getting-started/installation/#step-4-docker-compose-for-production","title":"Step 4: Docker Compose for Production","text":"<p>Create <code>docker-compose.production.yml</code>:</p> <pre><code>version: '3.8'\n\nservices:\n  sqlatte:\n    build: .\n    container_name: sqlatte_prod\n    restart: unless-stopped\n    ports:\n      - \"8000:8000\"\n    volumes:\n      - ./config:/app/config\n      - ./logs:/app/logs\n    environment:\n      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}\n      - TRINO_PASSWORD=${TRINO_PASSWORD}\n      - SMTP_USER=${SMTP_USER}\n      - SMTP_PASSWORD=${SMTP_PASSWORD}\n      - ANALYTICS_DB_PASSWORD=${ANALYTICS_DB_PASSWORD}\n    env_file:\n      - .env.production\n    depends_on:\n      - postgres\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8000/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    networks:\n      - sqlatte_network\n\n  postgres:\n    image: postgres:15\n    container_name: sqlatte_postgres\n    restart: unless-stopped\n    environment:\n      - POSTGRES_USER=sqlatte\n      - POSTGRES_PASSWORD=${ANALYTICS_DB_PASSWORD}\n      - POSTGRES_DB=sqlatte_analytics\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    networks:\n      - sqlatte_network\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U sqlatte\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  nginx:\n    image: nginx:alpine\n    container_name: sqlatte_nginx\n    restart: unless-stopped\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./ssl:/etc/nginx/ssl:ro\n    depends_on:\n      - sqlatte\n    networks:\n      - sqlatte_network\n\nvolumes:\n  postgres_data:\n\nnetworks:\n  sqlatte_network:\n    driver: bridge\n</code></pre>"},{"location":"getting-started/installation/#step-5-nginx-configuration","title":"Step 5: Nginx Configuration","text":"<p>Create <code>nginx.conf</code>:</p> <pre><code>events {\n    worker_connections 1024;\n}\n\nhttp {\n    upstream sqlatte {\n        server sqlatte:8000;\n    }\n\n    server {\n        listen 80;\n        server_name analytics.company.com;\n        return 301 https://$server_name$request_uri;\n    }\n\n    server {\n        listen 443 ssl http2;\n        server_name analytics.company.com;\n\n        ssl_certificate /etc/nginx/ssl/cert.pem;\n        ssl_certificate_key /etc/nginx/ssl/key.pem;\n\n        client_max_body_size 50M;\n\n        location / {\n            proxy_pass http://sqlatte;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n\n            # WebSocket support\n            proxy_http_version 1.1;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection \"upgrade\";\n        }\n    }\n}\n</code></pre>"},{"location":"getting-started/installation/#step-6-environment-variables","title":"Step 6: Environment Variables","text":"<p>Create <code>.env.production</code>:</p> <pre><code># LLM API Keys\nANTHROPIC_API_KEY=sk-ant-xxxxx\n\n# Database Credentials\nTRINO_PASSWORD=your_trino_password\n\n# Email Configuration\nSMTP_USER=your_email@gmail.com\nSMTP_PASSWORD=your_app_password\n\n# Analytics Database\nANALYTICS_DB_PASSWORD=strong_postgres_password\n\n# Application\nSQLATTE_ENV=production\nLOG_LEVEL=INFO\n</code></pre>"},{"location":"getting-started/installation/#step-7-ssl-certificates","title":"Step 7: SSL Certificates","text":"<pre><code># Create SSL directory\nmkdir -p ssl\n\n# Option 1: Let's Encrypt (recommended)\nsudo apt install certbot\nsudo certbot certonly --standalone -d analytics.company.com\nsudo cp /etc/letsencrypt/live/analytics.company.com/fullchain.pem ssl/cert.pem\nsudo cp /etc/letsencrypt/live/analytics.company.com/privkey.pem ssl/key.pem\n\n# Option 2: Self-signed (for testing)\nopenssl req -x509 -nodes -days 365 -newkey rsa:2048 \\\n  -keyout ssl/key.pem -out ssl/cert.pem\n</code></pre>"},{"location":"getting-started/installation/#step-8-deploy","title":"Step 8: Deploy","text":"<pre><code># Build and start services\ndocker-compose -f docker-compose.production.yml up -d\n\n# Check logs\ndocker-compose -f docker-compose.production.yml logs -f\n\n# Verify health\ncurl https://analytics.company.com/health\n</code></pre>"},{"location":"getting-started/installation/#step-9-monitoring-optional","title":"Step 9: Monitoring (Optional)","text":"<p>Add Prometheus and Grafana:</p> <pre><code># Add to docker-compose.production.yml\n  prometheus:\n    image: prom/prometheus\n    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\n      - prometheus_data:/prometheus\n    ports:\n      - \"9090:9090\"\n    networks:\n      - sqlatte_network\n\n  grafana:\n    image: grafana/grafana\n    ports:\n      - \"3000:3000\"\n    environment:\n      - GF_SECURITY_ADMIN_PASSWORD=admin\n    volumes:\n      - grafana_data:/var/lib/grafana\n    networks:\n      - sqlatte_network\n</code></pre>"},{"location":"getting-started/installation/#method-4-development-setup","title":"Method 4: Development Setup","text":"<p>Time: ~15 minutes | Difficulty: Moderate | Best for: Contributing, customization</p> <p>Full development environment with hot reload, testing, and debugging.</p>"},{"location":"getting-started/installation/#step-1-fork-and-clone","title":"Step 1: Fork and Clone","text":"<pre><code># Fork on GitHub first, then:\ngit clone https://github.com/YOUR_USERNAME/sqlatte.git\ncd sqlatte\n\n# Add upstream remote\ngit remote add upstream https://github.com/osmanuygar/sqlatte.git\n</code></pre>"},{"location":"getting-started/installation/#step-2-development-environment","title":"Step 2: Development Environment","text":"<pre><code># Create virtual environment\npython3 -m venv venv\nsource venv/bin/activate\n\n# Install development dependencies\npip install -r requirements.txt\npip install -r requirements-dev.txt  # Includes pytest, black, flake8\n\n# Install pre-commit hooks\npre-commit install\n</code></pre>"},{"location":"getting-started/installation/#step-3-ide-setup","title":"Step 3: IDE Setup","text":"<p>For VS Code, create <code>.vscode/settings.json</code>:</p> <pre><code>{\n  \"python.linting.enabled\": true,\n  \"python.linting.flake8Enabled\": true,\n  \"python.formatting.provider\": \"black\",\n  \"python.testing.pytestEnabled\": true,\n  \"python.testing.unittestEnabled\": false,\n  \"editor.formatOnSave\": true\n}\n</code></pre>"},{"location":"getting-started/installation/#step-4-run-with-hot-reload","title":"Step 4: Run with Hot Reload","text":"<pre><code># Start with auto-reload\nuvicorn src.api.app:app --reload --host 0.0.0.0 --port 8000\n\n# Or with debugging\npython -m debugpy --listen 5678 run.py\n</code></pre>"},{"location":"getting-started/installation/#step-5-run-tests","title":"Step 5: Run Tests","text":"<pre><code># Run all tests\npytest\n\n# With coverage\npytest --cov=src --cov-report=html\n\n# Run specific test\npytest tests/test_query_engine.py -v\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":""},{"location":"getting-started/installation/#test-the-api","title":"Test the API","text":"<pre><code>curl http://localhost:8000/health\n</code></pre> <p>Expected response: <pre><code>{\n  \"status\": \"healthy\",\n  \"database\": \"connected\",\n  \"llm\": \"available\"\n}\n</code></pre></p>"},{"location":"getting-started/installation/#test-widget","title":"Test Widget","text":"<p>Open your browser and navigate to: <pre><code>http://localhost:8000/demo.html\n</code></pre></p> <p>You should see the SQLatte widget interface.</p>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<p>Now that SQLatte is installed:</p> <ol> <li>Configure your database - See Database Providers</li> <li>Configure your LLM - See LLM Providers</li> <li>Try your first query - See Quick Start</li> <li>Enable optional features - See Configuration Overview</li> </ol>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/installation/#database-connection-issues","title":"Database Connection Issues","text":"<p>If you see database connection errors:</p> <pre><code># Test database connectivity\npython -c \"from sqlatte.db import test_connection; test_connection()\"\n</code></pre> <p>Check: - Database host and port are correct - User credentials are valid - Database exists and is accessible - Firewall rules allow connections</p>"},{"location":"getting-started/installation/#llm-api-issues","title":"LLM API Issues","text":"<p>If LLM queries fail:</p> <ul> <li>Verify API key is correct</li> <li>Check API key has sufficient credits/quota</li> <li>Ensure model name matches provider's offerings</li> <li>Test with a simple query first</li> </ul>"},{"location":"getting-started/installation/#port-already-in-use","title":"Port Already in Use","text":"<p>If port 5001 is already in use:</p> <pre><code># Change port in config.yaml\napp:\n  port: 8000\n\n# Or use environment variable\nexport SQLATTE_PORT=8001\n</code></pre>"},{"location":"getting-started/installation/#upgrading","title":"Upgrading","text":"<p>To upgrade to the latest version:</p> <pre><code>cd sqlatte\ngit pull origin main\npip install -r requirements.txt --upgrade\n</code></pre> <p>Check the Changelog for breaking changes.</p>"},{"location":"getting-started/installation/#system-requirements","title":"System Requirements","text":""},{"location":"getting-started/installation/#minimum-requirements","title":"Minimum Requirements","text":"<ul> <li>CPU: 2 cores</li> <li>RAM: 2 GB</li> <li>Storage: 500 MB</li> </ul>"},{"location":"getting-started/installation/#recommended-for-production","title":"Recommended for Production","text":"<ul> <li>CPU: 4+ cores</li> <li>RAM: 4+ GB</li> <li>Storage: 2+ GB (if using PostgreSQL analytics)</li> <li>Database: Separate database server</li> <li>Network: Low latency to database and LLM API</li> </ul>"},{"location":"getting-started/installation/#security-considerations","title":"Security Considerations","text":"<p>Production Deployment</p> <p>Before deploying to production:</p> <ul> <li>Use HTTPS/TLS for all connections</li> <li>Store credentials in environment variables or secrets manager</li> <li>Enable authentication if exposing publicly</li> <li>Configure CORS appropriately</li> </ul>"},{"location":"getting-started/installation/#getting-help","title":"Getting Help","text":"<p>If you encounter issues:</p> <ol> <li>Check the Troubleshooting section</li> <li>Search GitHub Issues</li> <li>Create a new issue with:<ul> <li>SQLatte version</li> <li>Python version</li> <li>Database provider and version</li> <li>Error messages and logs</li> <li>Steps to reproduce</li> </ul> </li> </ol>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>Get started with SQLatte in 5 minutes! This guide walks you through your first natural language queries.</p>"},{"location":"getting-started/quickstart/#step-1-verify-installation","title":"Step 1: Verify Installation","text":"<p>Make sure SQLatte is running:</p> <pre><code>curl http://localhost:8000/health\n</code></pre> <p>If you see a healthy response, you're ready to go! If not, check the Installation Guide.</p>"},{"location":"getting-started/quickstart/#step-2-access-the-interface","title":"Step 2: Access the Interface","text":"<p>SQLatte provides multiple interfaces:</p> Widget InterfaceEmbedded WidgetDashboard (if enabled) <p>Open your browser to: <pre><code>http://localhost:8000/widget.html\n</code></pre></p> <p>This gives you the standalone widget interface for testing.</p> <p>Add SQLatte to your HTML page:</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;My App with SQLatte&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Sales Dashboard&lt;/h1&gt;\n\n    &lt;div id=\"sqlatte-widget\"&gt;&lt;/div&gt;\n\n    &lt;script src=\"http://0.0.0.0:8000/static/js/sqlatte-widget.js\"&gt;&lt;/script&gt;\n    &lt;script&gt;\n        SQLatte.init({\n            container: 'sqlatte-widget',\n            apiUrl: 'http://0.0.0.0:8000'\n        });\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>If you have analytics enabled: <pre><code>http://localhost:8000/dashboard\n</code></pre></p>"},{"location":"getting-started/quickstart/#step-3-your-first-query","title":"Step 3: Your First Query","text":"<p>Let's try some natural language queries!</p>"},{"location":"getting-started/quickstart/#basic-query","title":"Basic Query","text":"<p>Type in the widget: <pre><code>Show me all customers\n</code></pre></p> <p>SQLatte will: 1. Convert your question to SQL 2. Execute the query 3. Display results in a table 4. Show the generated SQL</p>"},{"location":"getting-started/quickstart/#filter-query","title":"Filter Query","text":"<p>Try adding conditions: <pre><code>Show me customers from New York who signed up this year\n</code></pre></p>"},{"location":"getting-started/quickstart/#aggregate-query","title":"Aggregate Query","text":"<p>Get some analytics: <pre><code>What's the total revenue by month for the last 6 months?\n</code></pre></p>"},{"location":"getting-started/quickstart/#join-query","title":"Join Query","text":"<p>Combine tables: <pre><code>Show me top 10 products by revenue with their category names\n</code></pre></p>"},{"location":"getting-started/quickstart/#step-4-understanding-results","title":"Step 4: Understanding Results","text":"<p>When you submit a query, SQLatte shows:</p> <p>Generated SQL : The SQL query that was created from your natural language question</p> <p>Results Table : Data returned from your database, with pagination if needed</p> <p>Insights (optional) : AI-generated observations about the data</p> <p>Actions : Save query, schedule it, or download results</p>"},{"location":"getting-started/quickstart/#step-5-save-and-schedule","title":"Step 5: Save and Schedule","text":""},{"location":"getting-started/quickstart/#save-a-query","title":"Save a Query","text":"<p>Click the Save button after running a query. Give it a name: <pre><code>Monthly Revenue Report\n</code></pre></p>"},{"location":"getting-started/quickstart/#schedule-a-query-if-enabled","title":"Schedule a Query (if enabled)","text":"<p>If scheduling is enabled:</p> <ol> <li>Click Schedule after running a query</li> <li>Set frequency: Daily, Weekly, Monthly</li> <li>Choose time: <code>09:00</code></li> <li>Add email recipients: <code>team@company.com</code></li> <li>Click Create Schedule</li> </ol> <p>You'll receive automated reports via email!</p>"},{"location":"getting-started/quickstart/#understanding-the-barista","title":"Understanding the Barista","text":"<p>SQLatte's \"barista personality\" means:</p> <p>It remembers context : \"Show me those customers again\" works in follow-up queries</p> <p>It suggests insights : \"I notice revenue dropped in March - want to see why?\"</p> <p>It clarifies when needed : \"Which table are you asking about - customers or orders?\"</p> <p>It stays friendly : Conversational tone instead of technical jargon</p>"},{"location":"getting-started/quickstart/#common-query-patterns","title":"Common Query Patterns","text":""},{"location":"getting-started/quickstart/#time-based-queries","title":"Time-based Queries","text":"<pre><code>Show me sales from last month\nShow me daily active users for the past week\nWhat's the trend of signups over the last quarter?\n</code></pre>"},{"location":"getting-started/quickstart/#aggregations","title":"Aggregations","text":"<pre><code>What's the average order value by customer segment?\nCount how many orders each customer has made\nSum up revenue by product category\n</code></pre>"},{"location":"getting-started/quickstart/#rankings","title":"Rankings","text":"<pre><code>Top 10 customers by total spend\nBottom 5 products by units sold\nMost active users this week\n</code></pre>"},{"location":"getting-started/quickstart/#comparisons","title":"Comparisons","text":"<pre><code>Compare revenue between Q1 and Q2\nShow growth rate month over month\nWhich region has the highest conversion rate?\n</code></pre>"},{"location":"getting-started/quickstart/#query-tips","title":"Query Tips","text":"<p>Be Specific</p> <p>Instead of: \"Show me data\"</p> <p>Try: \"Show me customers who made purchases in the last 30 days\"</p> <p>Use Time References</p> <p>SQLatte understands: - \"last month\", \"this year\", \"yesterday\" - \"past 7 days\", \"last quarter\" - \"between January and March\"</p> <p>Name Your Metrics</p> <p>Instead of: \"Calculate that thing\"</p> <p>Try: \"Calculate total revenue\", \"Count active users\"</p> <p>Reference Table Names</p> <p>If your database has multiple tables:</p> <p>\"Show me customers from the users table\"</p>"},{"location":"getting-started/quickstart/#example-conversation","title":"Example Conversation","text":"<p>Here's a realistic conversation with SQLatte:</p> <pre><code>You: Show me our top customers\n\nSQLatte: Here are the top 10 customers by total order value...\n[Results displayed]\n\nYou: What about last month specifically?\n\nSQLatte: Here are the top customers for last month...\n[Results displayed]\n\nYou: Can you show me what they purchased?\n\nSQLatte: Here are the purchases from those customers...\n[Results displayed with joins]\n\nYou: Schedule this to run monthly and email it to me\n\nSQLatte: I've scheduled this query to run on the 1st of each month\nand email results to your@email.com\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<p>Now that you've run your first queries:</p> <ol> <li>Explore Configuration - Customize SQLatte's behavior in Configuration Guide 2Set Up Scheduling - Automate reports with Scheduled Queries 3Enable Analytics - Track usage with Analytics Dashboard 4Customize AI Behavior - Use Runtime Prompts</li> </ol>"},{"location":"getting-started/quickstart/#troubleshooting-first-queries","title":"Troubleshooting First Queries","text":""},{"location":"getting-started/quickstart/#no-tables-found","title":"\"No tables found\"","text":"<p>Your database connection might not have permissions to see tables.</p> <p>Solution: Grant proper permissions or check your database configuration.</p>"},{"location":"getting-started/quickstart/#i-dont-understand-that-question","title":"\"I don't understand that question\"","text":"<p>The query might be too vague or reference unknown tables.</p> <p>Solution: Be more specific about table names and columns.</p>"},{"location":"getting-started/quickstart/#query-timeout","title":"\"Query timeout\"","text":"<p>The generated SQL might be too complex or the database is slow.</p> <p>Solution: Try narrowing your question or optimizing database indexes.</p>"},{"location":"getting-started/quickstart/#results-look-wrong","title":"Results look wrong","text":"<p>The AI might have misunderstood your schema.</p> <p>Solution:  - Check table and column names match what you asked - Review the generated SQL - Be more explicit about joins and filters</p>"},{"location":"getting-started/quickstart/#sample-questions-by-database-type","title":"Sample Questions by Database Type","text":"E-commerceSaaS AnalyticsMarketingOperations <pre><code>Show me top selling products this month\nWhat's the average cart value?\nWhich customers haven't ordered in 90 days?\nCompare sales between categories\nShow daily revenue for the last 30 days\n</code></pre> <pre><code>How many active users do we have?\nWhat's the churn rate this quarter?\nShow signup trends over time\nWhich features are most used?\nCalculate monthly recurring revenue\n</code></pre> <pre><code>What's the conversion rate by campaign?\nShow email open rates by segment\nWhich channels drive the most traffic?\nCalculate cost per acquisition\nCompare performance month over month\n</code></pre> <pre><code>Show inventory levels by warehouse\nWhich orders are delayed?\nCalculate on-time delivery rate\nShow production output by shift\nIdentify bottlenecks in the process\n</code></pre>"},{"location":"getting-started/quickstart/#getting-help","title":"Getting Help","text":"<p>If you get stuck:</p> <ul> <li>Check the generated SQL to understand what query was created</li> <li>Try rephrasing your question</li> <li>Be more specific about table and column names</li> <li>Open an issue on GitHub</li> </ul> <p>Happy querying! \u2615</p>"}]}